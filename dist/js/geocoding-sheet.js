!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=149)}([function(t,e,i){"use strict";i.r(e),i.d(e,"boundingExtent",function(){return a}),i.d(e,"buffer",function(){return s}),i.d(e,"clone",function(){return c}),i.d(e,"closestSquaredDistanceXY",function(){return u}),i.d(e,"containsCoordinate",function(){return l}),i.d(e,"containsExtent",function(){return h}),i.d(e,"containsXY",function(){return f}),i.d(e,"coordinateRelationship",function(){return p}),i.d(e,"createEmpty",function(){return d}),i.d(e,"createOrUpdate",function(){return g}),i.d(e,"createOrUpdateEmpty",function(){return y}),i.d(e,"createOrUpdateFromCoordinate",function(){return _}),i.d(e,"createOrUpdateFromCoordinates",function(){return v}),i.d(e,"createOrUpdateFromFlatCoordinates",function(){return m}),i.d(e,"createOrUpdateFromRings",function(){return b}),i.d(e,"equals",function(){return O}),i.d(e,"extend",function(){return E}),i.d(e,"extendCoordinate",function(){return C}),i.d(e,"extendCoordinates",function(){return S}),i.d(e,"extendFlatCoordinates",function(){return T}),i.d(e,"extendRings",function(){return x}),i.d(e,"extendXY",function(){return j}),i.d(e,"forEachCorner",function(){return w}),i.d(e,"getArea",function(){return I}),i.d(e,"getBottomLeft",function(){return R}),i.d(e,"getBottomRight",function(){return P}),i.d(e,"getCenter",function(){return L}),i.d(e,"getCorner",function(){return k}),i.d(e,"getEnlargedArea",function(){return M}),i.d(e,"getForViewAndSize",function(){return F}),i.d(e,"getHeight",function(){return A}),i.d(e,"getIntersectionArea",function(){return N}),i.d(e,"getIntersection",function(){return D}),i.d(e,"getMargin",function(){return G}),i.d(e,"getSize",function(){return Y}),i.d(e,"getTopLeft",function(){return X}),i.d(e,"getTopRight",function(){return B}),i.d(e,"getWidth",function(){return H}),i.d(e,"intersects",function(){return U}),i.d(e,"isEmpty",function(){return z}),i.d(e,"returnOrUpdate",function(){return W}),i.d(e,"scaleFromCenter",function(){return K}),i.d(e,"intersectsSegment",function(){return V}),i.d(e,"applyTransform",function(){return Z});var n=i(11),o=i(66),r=i(25);function a(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,n=t.length;i<n;++i)C(e,t[i]);return e}function s(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function c(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function u(t,e,i){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*o}function l(t,e){return f(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function f(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function p(t,e){var i=t[0],n=t[1],o=t[2],a=t[3],s=e[0],c=e[1],u=r.a.UNKNOWN;return s<i?u|=r.a.LEFT:s>o&&(u|=r.a.RIGHT),c<n?u|=r.a.BELOW:c>a&&(u|=r.a.ABOVE),u===r.a.UNKNOWN&&(u=r.a.INTERSECTING),u}function d(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,i,n,o){return o?(o[0]=t,o[1]=e,o[2]=i,o[3]=n,o):[t,e,i,n]}function y(t){return g(1/0,1/0,-1/0,-1/0,t)}function _(t,e){var i=t[0],n=t[1];return g(i,n,i,n,e)}function v(t,e){return S(y(e),t)}function m(t,e,i,n,o){return T(y(o),t,e,i,n)}function b(t,e){return x(y(e),t)}function O(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function E(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function C(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function S(t,e){for(var i=0,n=e.length;i<n;++i)C(t,e[i]);return t}function T(t,e,i,n,o){for(;i<n;i+=o)j(t,e[i],e[i+1]);return t}function x(t,e){for(var i=0,n=e.length;i<n;++i)S(t,e[i]);return t}function j(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function w(t,e,i){var n;return(n=e.call(i,R(t)))?n:(n=e.call(i,P(t)))?n:(n=e.call(i,B(t)))?n:(n=e.call(i,X(t)))||!1}function I(t){var e=0;return z(t)||(e=H(t)*A(t)),e}function R(t){return[t[0],t[1]]}function P(t){return[t[2],t[1]]}function L(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function k(t,e){var i;return e===o.a.BOTTOM_LEFT?i=R(t):e===o.a.BOTTOM_RIGHT?i=P(t):e===o.a.TOP_LEFT?i=X(t):e===o.a.TOP_RIGHT?i=B(t):Object(n.a)(!1,13),i}function M(t,e){var i=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-i)*(Math.max(t[3],e[3])-n)}function F(t,e,i,n,o){var r=e*n[0]/2,a=e*n[1]/2,s=Math.cos(i),c=Math.sin(i),u=r*s,l=r*c,h=a*s,f=a*c,p=t[0],d=t[1],y=p-u+f,_=p-u-f,v=p+u-f,m=p+u+f,b=d-l-h,O=d-l+h,E=d+l+h,C=d+l-h;return g(Math.min(y,_,v,m),Math.min(b,O,E,C),Math.max(y,_,v,m),Math.max(b,O,E,C),o)}function A(t){return t[3]-t[1]}function N(t,e){return I(D(t,e))}function D(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return U(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):y(n),n}function G(t){return H(t)+A(t)}function Y(t){return[t[2]-t[0],t[3]-t[1]]}function X(t){return[t[0],t[3]]}function B(t){return[t[2],t[3]]}function H(t){return t[2]-t[0]}function U(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function z(t){return t[2]<t[0]||t[3]<t[1]}function W(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function K(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function V(t,e,i){var n=!1,o=p(t,e),a=p(t,i);if(o===r.a.INTERSECTING||a===r.a.INTERSECTING)n=!0;else{var s,c,u=t[0],l=t[1],h=t[2],f=t[3],d=e[0],g=e[1],y=i[0],_=i[1],v=(_-g)/(y-d);a&r.a.ABOVE&&!(o&r.a.ABOVE)&&(n=(s=y-(_-f)/v)>=u&&s<=h),n||!(a&r.a.RIGHT)||o&r.a.RIGHT||(n=(c=_-(y-h)*v)>=l&&c<=f),n||!(a&r.a.BELOW)||o&r.a.BELOW||(n=(s=y-(_-l)/v)>=u&&s<=h),n||!(a&r.a.LEFT)||o&r.a.LEFT||(n=(c=_-(y-u)*v)>=l&&c<=f)}return n}function Z(t,e,i){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),function(t,e,i){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],i)}},function(t,e,i){"use strict";i.d(e,"a",function(){return c}),i.d(e,"b",function(){return u}),i.d(e,"c",function(){return l}),i.d(e,"e",function(){return h}),i.d(e,"d",function(){return f});var n=i(12);function o(t,e,i,n){for(var o,r=0,a=t.length;r<a;++r)if((o=t[r]).listener===e&&o.bindTo===i)return n&&(o.deleteIndex=r),o}function r(t,e){var i=a(t);return i?i[e]:void 0}function a(t,e){var i=t.ol_lm;return!i&&e&&(i=t.ol_lm={}),i}function s(t,e){var i=r(t,e);if(i){for(var o=0,s=i.length;o<s;++o)t.removeEventListener(e,i[o].boundListener),Object(n.b)(i[o]);i.length=0;var c=a(t);c&&(delete c[e],0===Object.keys(c).length&&function(t){delete t.ol_lm}(t))}}function c(t,e,i,n,r){var s=a(t,!0),c=s[e];c||(c=s[e]=[]);var u=o(c,i,n,!1);return u?r||(u.callOnce=!1):(u={bindTo:n,callOnce:!!r,listener:i,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var i=t.listener,n=t.bindTo||t.target;return t.callOnce&&h(t),i.call(n,e)};return t.boundListener=e,e}(u)),c.push(u)),u}function u(t,e,i,n){return c(t,e,i,n,!0)}function l(t,e,i,n){var a=r(t,e);if(a){var s=o(a,i,n,!0);s&&h(s)}}function h(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=r(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&s(t.target,t.type)}Object(n.b)(t)}}function f(t){var e=a(t);if(e)for(var i in e)s(t,i)}},function(t,e,i){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(e,"b",function(){return n}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return a});var o=0;function r(t){return t.ol_uid||(t.ol_uid=String(++o))}var a="5.3.3"},function(t,e,i){"use strict";e.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,i){"use strict";i.d(e,"c",function(){return c}),i.d(e,"b",function(){return u}),i.d(e,"d",function(){return l}),i.d(e,"e",function(){return h}),i.d(e,"f",function(){return f}),i.d(e,"g",function(){return p}),i.d(e,"i",function(){return d}),i.d(e,"k",function(){return g}),i.d(e,"l",function(){return y}),i.d(e,"m",function(){return _}),i.d(e,"j",function(){return v}),i.d(e,"h",function(){return m}),i.d(e,"o",function(){return b}),i.d(e,"a",function(){return S}),i.d(e,"p",function(){return w}),i.d(e,"q",function(){return I}),i.d(e,"s",function(){return R}),i.d(e,"r",function(){return P}),i.d(e,"n",function(){return L});var n=i(73),o=i(16),r=i(12),a=i(90),s=i(9),c="10px sans-serif",u=[0,0,0,1],l="round",h=[],f=0,p="round",d=10,g=[0,0,0,1],y="center",_="middle",v=[0,0,0,0],m=1,b=new a.a,O={},E=null,C={},S=function(){var t,e,i=60,o=O,a="32px ",s=["monospace","serif"],c=s.length,u="wmytzilWMYTZIL@#/&?$%10ï€“";function l(t){for(var i=T(),n=100;n<=700;n+=300){for(var o=n+" ",r=!0,l=0;l<c;++l){var h=s[l];if(i.font=o+a+h,e=i.measureText(u).width,t!=h){i.font=o+a+t+","+h;var f=i.measureText(u).width;r=r&&f!=e}}if(r)return!0}return!1}function h(){var e=!0;for(var n in o)o[n]<i&&(l(n)?(o[n]=i,Object(r.b)(C),E=null,b.clear()):(++o[n],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var r=Object(n.c)(e);if(r)for(var a=0,s=r.length;a<s;++a){var c=r[a];c in o||(o[c]=i,l(c)||(o[c]=0,void 0===t&&(t=setInterval(h,32))))}}}();function T(){return E||(E=Object(o.a)(1,1)),E}var x,j,w=(j=C,function(t){var e=j[t];return null==e&&(x||((x=document.createElement("span")).textContent="M",x.style.margin=x.style.padding="0 !important",x.style.position="absolute !important",x.style.left="-99999px !important"),x.style.font=t,document.body.appendChild(x),e=j[t]=x.offsetHeight,document.body.removeChild(x)),e});function I(t,e){var i=T();return t!=i.font&&(i.font=t),i.measureText(e).width}function R(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}var P=Object(s.c)();function L(t,e,i,n,o,r,a,s,c,u,l){var h;1!=i&&(h=t.globalAlpha,t.globalAlpha=h*i),e&&t.setTransform.apply(t,e),t.drawImage(n,o,r,a,s,c,u,a*l,s*l),h&&(t.globalAlpha=h),e&&t.setTransform.apply(t,P)}},function(t,e,i){"use strict";e.a={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,i){"use strict";function n(t,e,i){return Math.min(Math.max(t,e),i)}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"g",function(){return r}),i.d(e,"f",function(){return a}),i.d(e,"e",function(){return s}),i.d(e,"h",function(){return c}),i.d(e,"i",function(){return u}),i.d(e,"d",function(){return l}),i.d(e,"c",function(){return h}),i(11);var o="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function r(t,e,i,n,o,r){var s=o-i,c=r-n;if(0!==s||0!==c){var u=((t-i)*s+(e-n)*c)/(s*s+c*c);u>1?(i=o,n=r):u>0&&(i+=s*u,n+=c*u)}return a(t,e,i,n)}function a(t,e,i,n){var o=i-t,r=n-e;return o*o+r*r}function s(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,o=Math.abs(t[i][i]),r=i+1;r<e;r++){var a=Math.abs(t[r][i]);a>o&&(o=a,n=r)}if(0===o)return null;var s=t[n];t[n]=t[i],t[i]=s;for(var c=i+1;c<e;c++)for(var u=-t[c][i]/t[i][i],l=i;l<e+1;l++)i==l?t[c][l]=0:t[c][l]+=u*t[i][l]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}function c(t){return 180*t/Math.PI}function u(t){return t*Math.PI/180}function l(t,e){var i=t%e;return i*e<0?i+e:i}function h(t,e,i){return t+i*(e-t)}},function(t,e,i){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e){t.exports=jQuery},function(t,e,i){"use strict";i.d(e,"c",function(){return r}),i.d(e,"e",function(){return a}),i.d(e,"g",function(){return u}),i.d(e,"a",function(){return l}),i.d(e,"f",function(){return h}),i.d(e,"h",function(){return f}),i.d(e,"b",function(){return p}),i.d(e,"d",function(){return d});var n=i(11),o=new Array(6);function r(){return[1,0,0,1,0,0]}function a(t){return c(t,1,0,0,1,0,0)}function s(t,e){var i=t[0],n=t[1],o=t[2],r=t[3],a=t[4],s=t[5],c=e[0],u=e[1],l=e[2],h=e[3],f=e[4],p=e[5];return t[0]=i*c+o*u,t[1]=n*c+r*u,t[2]=i*l+o*h,t[3]=n*l+r*h,t[4]=i*f+o*p+a,t[5]=n*f+r*p+s,t}function c(t,e,i,n,o,r,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=o,t[4]=r,t[5]=a,t}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function l(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function h(t,e,i){return s(t,c(o,e,0,0,i,0,0))}function f(t,e,i){return s(t,c(o,1,0,0,1,e,i))}function p(t,e,i,n,o,r,a,s){var c=Math.sin(r),u=Math.cos(r);return t[0]=n*u,t[1]=o*c,t[2]=-n*c,t[3]=o*u,t[4]=a*n*u-s*n*c+e,t[5]=a*o*c+s*o*u+i,t}function d(t){var e,i=(e=t)[0]*e[3]-e[1]*e[2];Object(n.a)(0!==i,32);var o=t[0],r=t[1],a=t[2],s=t[3],c=t[4],u=t[5];return t[0]=s/i,t[1]=-r/i,t[2]=-a/i,t[3]=o/i,t[4]=(a*u-s*c)/i,t[5]=-(o*u-r*c)/i,t}},function(t,e,i){"use strict";i.r(e);var n=i(79),o=i(0),r=i(6),a=i(60),s=i(26),c=6378137,u=Math.PI*c,l=[-u,-u,u,u],h=[-180,-85,180,85],f=function(t){function e(e){t.call(this,{code:e,units:s.b.METERS,extent:l,global:!0,worldExtent:h,getPointResolution:function(t,e){return t/Object(r.b)(e[1]/c)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),p=[new f("EPSG:3857"),new f("EPSG:102100"),new f("EPSG:102113"),new f("EPSG:900913"),new f("urn:ogc:def:crs:EPSG:6.18:3:3857"),new f("urn:ogc:def:crs:EPSG::3857"),new f("http://www.opengis.net/gml/srs/epsg.xml#3857")];function d(t,e,i){var n=t.length,o=i>1?i:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(n));for(var a=u,s=0;s<n;s+=o){r[s]=a*t[s]/180;var l=c*Math.log(Math.tan(Math.PI*(t[s+1]+90)/360));l>a?l=a:l<-a&&(l=-a),r[s+1]=l}return r}function g(t,e,i){var n=t.length,o=i>1?i:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(n));for(var a=0;a<n;a+=o)r[a]=180*t[a]/u,r[a+1]=360*Math.atan(Math.exp(t[a+1]/c))/Math.PI-90;return r}var y=[-180,-90,180,90],_=6378137*Math.PI/180,v=function(t){function e(e,i){t.call(this,{code:e,units:s.b.DEGREES,extent:y,axisOrientation:i,global:!0,metersPerUnit:_,worldExtent:y})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),m=[new v("CRS:84"),new v("EPSG:4326","neu"),new v("urn:ogc:def:crs:EPSG::4326","neu"),new v("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new v("urn:ogc:def:crs:OGC:1.3:CRS84"),new v("urn:ogc:def:crs:OGC:2:84"),new v("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new v("urn:x-ogc:def:crs:EPSG:4326","neu")],b={},O=i(50);function E(t,e,i){var n;if(void 0!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];n=e}else n=t.slice();return n}function C(t,e,i){if(void 0!==e&&t!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];t=e}return t}function S(t){!function(t,e){b[t]=e}(t.getCode(),t),Object(O.a)(t,t,E)}function T(t){t.forEach(S)}function x(t){return"string"==typeof t?b[t]||null:t||null}function j(t,e,i,o){var r,a=(t=x(t)).getPointResolutionFunc();if(a)r=a(e,i);else if(t.getUnits()==s.b.DEGREES&&!o||o==s.b.DEGREES)r=e;else{var c=N(t,x("EPSG:4326")),u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];u=c(u,u,2),r=(Object(n.a)(u.slice(0,2),u.slice(2,4))+Object(n.a)(u.slice(4,6),u.slice(6,8)))/2;var l=o?s.a[o]:t.getMetersPerUnit();void 0!==l&&(r/=l)}return r}function w(t){T(t),t.forEach(function(e){t.forEach(function(t){e!==t&&Object(O.a)(e,t,E)})})}function I(t,e,i,n){t.forEach(function(t){e.forEach(function(e){Object(O.a)(t,e,i),Object(O.a)(e,t,n)})})}function R(){b={},Object(O.b)()}function P(t,e){return t?"string"==typeof t?x(t):t:x(e)}function L(t){return function(e,i,n){for(var o=e.length,r=void 0!==n?n:2,a=void 0!==i?i:new Array(o),s=0;s<o;s+=r){var c=t([e[s],e[s+1]]);a[s]=c[0],a[s+1]=c[1];for(var u=r-1;u>=2;--u)a[s+u]=e[s+u]}return a}}function k(t,e,i,n){var o=x(t),r=x(e);Object(O.a)(o,r,L(i)),Object(O.a)(r,o,L(n))}function M(t,e){return G(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function F(t,e){var i=G(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=Object(r.d)(n+180,360)-180),i}function A(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:N(t,e)===E&&i}function N(t,e){var i=t.getCode(),n=e.getCode(),o=Object(O.c)(i,n);return o||(o=C),o}function D(t,e){return N(x(t),x(e))}function G(t,e,i){return D(e,i)(t,void 0,t.length)}function Y(t,e,i){var n=D(e,i);return Object(o.applyTransform)(t,n)}function X(t,e,i){return N(e,i)(t)}function B(){w(p),w(m),I(m,p,d,g)}i.d(e,"cloneTransform",function(){return E}),i.d(e,"identityTransform",function(){return C}),i.d(e,"addProjection",function(){return S}),i.d(e,"addProjections",function(){return T}),i.d(e,"get",function(){return x}),i.d(e,"getPointResolution",function(){return j}),i.d(e,"addEquivalentProjections",function(){return w}),i.d(e,"addEquivalentTransforms",function(){return I}),i.d(e,"clearAllProjections",function(){return R}),i.d(e,"createProjection",function(){return P}),i.d(e,"createTransformFromCoordinateTransform",function(){return L}),i.d(e,"addCoordinateTransforms",function(){return k}),i.d(e,"fromLonLat",function(){return M}),i.d(e,"toLonLat",function(){return F}),i.d(e,"equivalent",function(){return A}),i.d(e,"getTransformFromProjections",function(){return N}),i.d(e,"getTransform",function(){return D}),i.d(e,"transform",function(){return G}),i.d(e,"transformExtent",function(){return Y}),i.d(e,"transformWithProjections",function(){return X}),i.d(e,"addCommon",function(){return B}),i.d(e,"METERS_PER_UNIT",function(){return s.a}),i.d(e,"Projection",function(){return a.a}),B()},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i(87);function o(t,e){if(!t)throw new n.a(e)}},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return r}),i.d(e,"d",function(){return a});var n="function"==typeof Object.assign?Object.assign:function(t,e){var i=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1,r=arguments.length;o<r;++o){var a=i[o];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])}return n};function o(t){for(var e in t)delete t[e]}function r(t){var e=[];for(var i in t)e.push(t[i]);return e}function a(t){var e;for(e in t)return!1;return!e}},function(t,e,i){"use strict";function n(t,e,i){for(var n,r,a=i||o,s=0,c=t.length,u=!1;s<c;)(r=+a(t[n=s+(c-s>>1)],e))<0?s=n+1:(c=n,u=!r);return u?s:~s}function o(t,e){return t>e?1:t<e?-1:0}function r(t,e){return t.indexOf(e)>=0}function a(t,e,i){var n,o=t.length;if(t[0]<=e)return 0;if(e<=t[o-1])return o-1;if(i>0){for(n=1;n<o;++n)if(t[n]<e)return n-1}else if(i<0){for(n=1;n<o;++n)if(t[n]<=e)return n}else for(n=1;n<o;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return o-1}function s(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function c(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,o=0;o<n;o++)t[t.length]=i[o]}function u(t,e){var i=t.indexOf(e),n=i>-1;return n&&t.splice(i,1),n}function l(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function h(t,e){var i,n=t.length,o=Array(t.length);for(i=0;i<n;i++)o[i]={index:i,value:t[i]};for(o.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=o[i].value}function f(t,e,i){var n=e||o;return t.every(function(e,o){if(0===o)return!0;var r=n(t[o-1],e);return!(r>0||i&&0===r)})}i.d(e,"a",function(){return n}),i.d(e,"g",function(){return o}),i.d(e,"d",function(){return r}),i.d(e,"f",function(){return a}),i.d(e,"i",function(){return s}),i.d(e,"c",function(){return c}),i.d(e,"h",function(){return u}),i.d(e,"b",function(){return l}),i.d(e,"j",function(){return h}),i.d(e,"e",function(){return f})},function(t,e,i){"use strict";e.a={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}},function(t,e,i){"use strict";i.d(e,"b",function(){return h});var n=i(2),o=i(54),r=i(86),a=i(23),s=i(12),c=function(t){function e(e,i,n){t.call(this,e),this.key=i,this.oldValue=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),u=function(t){function e(e){t.call(this),Object(n.c)(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Object(s.a)({},this.values_)},e.prototype.notify=function(t,e){var i;i=h(t),this.dispatchEvent(new c(i,t,e)),i=o.a.PROPERTYCHANGE,this.dispatchEvent(new c(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(r.a),l={};function h(t){return l.hasOwnProperty(t)?l[t]:l[t]="change:"+t}e.a=u},function(t,e,i){"use strict";function n(t,e){var i=document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function o(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+(parseInt(i.marginLeft,10)+parseInt(i.marginRight,10))}function r(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+(parseInt(i.marginTop,10)+parseInt(i.marginBottom,10))}function a(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function s(t){for(;t.lastChild;)t.removeChild(t.lastChild)}i.d(e,"a",function(){return n}),i.d(e,"c",function(){return o}),i.d(e,"b",function(){return r}),i.d(e,"e",function(){return a}),i.d(e,"d",function(){return s})},function(t,e,i){"use strict";var n=i(5);e.a={SINGLECLICK:"singleclick",CLICK:n.a.CLICK,DBLCLICK:n.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,i){"use strict";e.a={ANIMATING:0,INTERACTING:1}},function(t,e,i){"use strict";i.d(e,"c",function(){return o}),i.d(e,"h",function(){return r}),i.d(e,"j",function(){return a}),i.d(e,"e",function(){return s}),i.d(e,"b",function(){return c}),i.d(e,"a",function(){return u}),i.d(e,"d",function(){return l}),i.d(e,"i",function(){return h}),i.d(e,"g",function(){return f}),i.d(e,"f",function(){return p});var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=-1!==n.indexOf("firefox"),r=-1!==n.indexOf("safari")&&-1==n.indexOf("chrom"),a=-1!==n.indexOf("webkit")&&-1==n.indexOf("edge"),s=-1!==n.indexOf("macintosh"),c=window.devicePixelRatio||1,u=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),l="geolocation"in navigator,h="ontouchstart"in window,f="PointerEvent"in window,p=!!navigator.msPointerEnabled},function(t,e,i){"use strict";function n(){return!0}function o(){return!1}function r(){}i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o}),i.d(e,"c",function(){return r})},function(t,e,i){"use strict";e.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,i){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=function(t){this.propagationStopped,this.type=t,this.target=null};function o(t){t.stopPropagation()}n.prototype.preventDefault=function(){this.propagationStopped=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},e.a=n},function(t,e,i){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,i){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},o={};o[n.DEGREES]=2*Math.PI*6370997/360,o[n.FEET]=.3048,o[n.METERS]=1,o[n.USFEET]=1200/3937,e.b=n},function(t,e,i){"use strict";e.a={ADD:"add",REMOVE:"remove"}},function(t,e,i){"use strict";function n(t){return Math.pow(t,3)}function o(t){return 1-n(1-t)}function r(t){return 3*t*t-2*t*t*t}function a(t){return t}function s(t){return t<.5?r(2*t):1-r(2*(t-.5))}i.r(e),i.d(e,"easeIn",function(){return n}),i.d(e,"easeOut",function(){return o}),i.d(e,"inAndOut",function(){return r}),i.d(e,"linear",function(){return a}),i.d(e,"upAndDown",function(){return s})},function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s}),i.d(e,"d",function(){return c}),i.d(e,"e",function(){return u}),i.d(e,"f",function(){return l}),i.d(e,"c",function(){return h}),i(17);var n=i(11),o=i(20),r=i(19),a=o.b,s=function(t){var e=t.originalEvent;return 0==e.button&&!(r.j&&r.e&&e.ctrlKey)},c=(o.a,function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}),u=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},l=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},h=function(t){var e=t.pointerEvent;return Object(n.a)(void 0!==e,56),"mouse"==e.pointerType}},function(t,e,i){"use strict";var n=i(15),o=i(28),r="active",a=i(6);i.d(e,"b",function(){return c}),i.d(e,"c",function(){return u}),i.d(e,"d",function(){return l}),i.d(e,"e",function(){return h});var s=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(r)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(r,t)},e.prototype.setMap=function(t){this.map_=t},e}(n.a);function c(t,e,i){var n=t.getCenter();if(n){var r=t.constrainCenter([n[0]+e[0],n[1]+e[1]]);i?t.animate({duration:i,easing:o.linear,center:r}):t.setCenter(r)}}function u(t,e,i,n,o){h(t,e=t.constrainResolution(e,0,o),i,n)}function l(t,e,i,n){var o=t.getResolution(),r=t.constrainResolution(o,e,0);if(void 0!==r){var s=t.getResolutions();r=Object(a.a)(r,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==r&&r!==o){var c=t.getCenter(),u=t.calculateCenterZoom(r,i);u=t.constrainCenter(u),i=[(r*c[0]-o*u[0])/(r-o),(r*c[1]-o*u[1])/(r-o)]}h(t,r,i,n)}function h(t,e,i,n){if(e){var r=t.getResolution(),a=t.getCenter();if(void 0!==r&&a&&e!==r&&n)t.animate({resolution:e,anchor:i,duration:n,easing:o.easeOut});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}}e.a=s},function(t,e,i){"use strict";i.d(e,"b",function(){return h});var n=i(2),o=i(0),r=i(88),a=i(21),s=i(34),c=i(12),u=function(t){function e(){t.call(this),this.layout=a.a.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return Object(o.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Object(n.b)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(c.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(n.b)()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=l(t);else{for(var o=0;o<i;++o){if(0===e.length)return this.layout=a.a.XY,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=a.a.XY:3==t?e=a.a.XYZ:4==t&&(e=a.a.XYZM),e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();Object(s.a)(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=Object(o.getCenter)(this.getExtent()));var a=this.getFlatCoordinates();if(a){var c=this.getStride();Object(s.b)(a,0,a.length,c,t,n,r,a),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();Object(s.d)(i,0,i.length,n,t,e,i),this.changed()}},e}(r.a);function l(t){var e;return t==a.a.XY?e=2:t==a.a.XYZ||t==a.a.XYM?e=3:t==a.a.XYZM&&(e=4),e}function h(t,e,i){var n=t.getFlatCoordinates();if(n){var o=t.getStride();return Object(s.c)(n,0,n.length,o,e,i)}return null}e.a=u},function(t,e,i){"use strict";function n(t,e,i,n,o){for(var r=void 0!==o?o:[],a=0,s=e;s<i;s+=n)r[a++]=t.slice(s,s+n);return r.length=a,r}function o(t,e,i,o,r){for(var a=void 0!==r?r:[],s=0,c=0,u=i.length;c<u;++c){var l=i[c];a[s++]=n(t,e,l,o,a[s]),e=l}return a.length=s,a}function r(t,e,i,n,r){for(var a=void 0!==r?r:[],s=0,c=0,u=i.length;c<u;++c){var l=i[c];a[s++]=o(t,e,l,n,a[s]),e=l[l.length-1]}return a.length=s,a}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return r})},function(t,e,i){"use strict";function n(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function o(t,e,i){return t+"/"+e+"/"+i}function r(t){return o(t[0],t[1],t[2])}function a(t){return t.split("/").map(Number)}function s(t){return(t[1]<<t[0])+t[2]}function c(t,e){var i=t[0],n=t[1],o=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var r,a=e.getExtent();return!(r=a?e.getTileRangeForExtentAndZ(a,i):e.getFullTileRange(i))||r.containsXY(n,o)}i.d(e,"a",function(){return n}),i.d(e,"d",function(){return o}),i.d(e,"c",function(){return r}),i.d(e,"b",function(){return a}),i.d(e,"e",function(){return s}),i.d(e,"f",function(){return c})},function(t,e,i){"use strict";function n(t,e,i,n,o,r){for(var a=r||[],s=0,c=e;c<i;c+=n){var u=t[c],l=t[c+1];a[s++]=o[0]*u+o[2]*l+o[4],a[s++]=o[1]*u+o[3]*l+o[5]}return r&&a.length!=s&&(a.length=s),a}function o(t,e,i,n,o,r,a){for(var s=a||[],c=Math.cos(o),u=Math.sin(o),l=r[0],h=r[1],f=0,p=e;p<i;p+=n){var d=t[p]-l,g=t[p+1]-h;s[f++]=l+d*c-g*u,s[f++]=h+d*u+g*c;for(var y=p+2;y<p+n;++y)s[f++]=t[y]}return a&&s.length!=f&&(s.length=f),s}function r(t,e,i,n,o,r,a,s){for(var c=s||[],u=a[0],l=a[1],h=0,f=e;f<i;f+=n){var p=t[f]-u,d=t[f+1]-l;c[h++]=u+o*p,c[h++]=l+r*d;for(var g=f+2;g<f+n;++g)c[h++]=t[g]}return s&&c.length!=h&&(c.length=h),c}function a(t,e,i,n,o,r,a){for(var s=a||[],c=0,u=e;u<i;u+=n){s[c++]=t[u]+o,s[c++]=t[u+1]+r;for(var l=u+2;l<u+n;++l)s[c++]=t[l]}return a&&s.length!=c&&(s.length=c),s}i.d(e,"c",function(){return n}),i.d(e,"a",function(){return o}),i.d(e,"b",function(){return r}),i.d(e,"d",function(){return a})},function(t,e,i){"use strict";i.d(e,"e",function(){return r}),i.d(e,"a",function(){return a}),i.d(e,"f",function(){return s}),i.d(e,"d",function(){return c}),i.d(e,"b",function(){return u}),i.d(e,"c",function(){return l});var n=i(6);function o(t,e,i,o,r,a,s){var c,u=t[e],l=t[e+1],h=t[i]-u,f=t[i+1]-l;if(0===h&&0===f)c=e;else{var p=((r-u)*h+(a-l)*f)/(h*h+f*f);if(p>1)c=i;else{if(p>0){for(var d=0;d<o;++d)s[d]=Object(n.c)(t[e+d],t[i+d],p);return void(s.length=o)}c=e}}for(var g=0;g<o;++g)s[g]=t[c+g];s.length=o}function r(t,e,i,o,r){var a=t[e],s=t[e+1];for(e+=o;e<i;e+=o){var c=t[e],u=t[e+1],l=Object(n.f)(a,s,c,u);l>r&&(r=l),a=c,s=u}return r}function a(t,e,i,n,o){for(var a=0,s=i.length;a<s;++a){var c=i[a];o=r(t,e,c,n,o),e=c}return o}function s(t,e,i,n,o){for(var r=0,s=i.length;r<s;++r){var c=i[r];o=a(t,e,c,n,o),e=c[c.length-1]}return o}function c(t,e,i,r,a,s,c,u,l,h,f){if(e==i)return h;var p,d;if(0===a){if((d=Object(n.f)(c,u,t[e],t[e+1]))<h){for(p=0;p<r;++p)l[p]=t[e+p];return l.length=r,d}return h}for(var g=f||[NaN,NaN],y=e+r;y<i;)if(o(t,y-r,y,r,c,u,g),(d=Object(n.f)(c,u,g[0],g[1]))<h){for(h=d,p=0;p<r;++p)l[p]=g[p];l.length=r,y+=r}else y+=r*Math.max((Math.sqrt(d)-Math.sqrt(h))/a|0,1);if(s&&(o(t,i-r,e,r,c,u,g),(d=Object(n.f)(c,u,g[0],g[1]))<h)){for(h=d,p=0;p<r;++p)l[p]=g[p];l.length=r}return h}function u(t,e,i,n,o,r,a,s,u,l,h){for(var f=h||[NaN,NaN],p=0,d=i.length;p<d;++p){var g=i[p];l=c(t,e,g,n,o,r,a,s,u,l,f),e=g}return l}function l(t,e,i,n,o,r,a,s,c,l,h){for(var f=h||[NaN,NaN],p=0,d=i.length;p<d;++p){var g=i[p];l=u(t,e,g,n,o,r,a,s,c,l,f),e=g[g.length-1]}return l}},function(t,e,i){"use strict";function n(t,e,i,n){for(var o=0,r=i.length;o<r;++o)t[e++]=i[o];return e}function o(t,e,i,n){for(var o=0,r=i.length;o<r;++o)for(var a=i[o],s=0;s<n;++s)t[e++]=a[s];return e}function r(t,e,i,n,r){for(var a=r||[],s=0,c=0,u=i.length;c<u;++c){var l=o(t,e,i[c],n);a[s++]=l,e=l}return a.length=s,a}function a(t,e,i,n,o){for(var a=o||[],s=0,c=0,u=i.length;c<u;++c){var l=r(t,e,i[c],n,a[s]);a[s++]=l,e=l[l.length-1]}return a.length=s,a}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return r}),i.d(e,"d",function(){return a})},function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"a",function(){return h}),i.d(e,"c",function(){return p});var n=i(11),o=i(6),r=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,a=/^([a-z]*)$/i;function s(t){return"string"==typeof t?t:p(t)}var c,u,l=(c={},u=0,function(t){var e;if(c.hasOwnProperty(t))e=c[t];else{if(u>=1024){var i=0;for(var o in c)0==(3&i++)&&(delete c[o],--u)}e=function(t){var e,i,o,s,c;if(a.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),r.exec(t)){var u,l=t.length-1;u=l<=4?1:2;var h=4===l||8===l;e=parseInt(t.substr(1+0*u,u),16),i=parseInt(t.substr(1+1*u,u),16),o=parseInt(t.substr(1+2*u,u),16),s=h?parseInt(t.substr(1+3*u,u),16):255,1==u&&(e=(e<<4)+e,i=(i<<4)+i,o=(o<<4)+o,h&&(s=(s<<4)+s)),c=[e,i,o,s/255]}else 0==t.indexOf("rgba(")?f(c=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((c=t.slice(4,-1).split(",").map(Number)).push(1),f(c)):Object(n.a)(!1,14);return c}(t),c[t]=e,++u}return e});function h(t){return Array.isArray(t)?t:l(t)}function f(t){return t[0]=Object(o.a)(t[0]+.5|0,0,255),t[1]=Object(o.a)(t[1]+.5|0,0,255),t[2]=Object(o.a)(t[2]+.5|0,0,255),t[3]=Object(o.a)(t[3],0,1),t}function p(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}},function(t,e,i){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"}},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i(37);function o(t){return Array.isArray(t)?Object(n.c)(t):t}},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i(8)),r=a(i(85));function a(t){return t&&t.__esModule?t:{default:t}}r.default.defs([["EPSG:2263","+proj=lcc +lat_1=41.03333333333333 +lat_2=40.66666666666666 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000.0000000001 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=ft +to_meter=0.3048006096012192 +no_defs"],["EPSG:6539","+proj=lcc +lat_1=40.66666666666666 +lat_2=41.03333333333333 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000 +y_0=0 +ellps=GRS80 +units=us-ft +no_defs"]]);var s={proj4:r.default,inherits:function(t,e){s.copyFromParentProperties(t.prototype,e.prototype)},subclass:function(t,e){var i=Object.getPrototypeOf(e);s.copyFromParentProperties(t,i),s.copyFromParentKeys(t,e)},mixin:function(t,e){e.forEach(function(e){o.default.extend(t,e)})},copyFromParentProperties:function(t,e){Object.getOwnPropertyNames(e).forEach(function(i){i in t||(t[i]=e[i])})},copyFromParentKeys:function(t,e){Object.keys(e).forEach(function(i){i in t||(t[i]=e[i])})},capitalize:function(t){var e="";return t.split(" ").forEach(function(t){var i=t.toLowerCase();e+=i.substr(0,1).toUpperCase(),e+=i.substr(1).toLowerCase(),e+=" "}),e.trim()},nextId:function(t){var e=s.uniqueIds[t];return s.uniqueIds[t]="number"==typeof e?e+1:0,"".concat(t,"-").concat(s.uniqueIds[t])},html:function(t){if("function"==typeof t.html)return(0,o.default)(t.html());var e=(0,o.default)('<div class="nyc-html"></div>');return t.getProperties?t=t.getProperties():t.properties&&(t=t.properties),Object.keys(t).forEach(function(i){e.append('<div><span class="fld">'.concat(i,'</span><span class="val">').concat(t[i],"</span></div>"))}),e},loading:function(t){t.hasClass("loading")&&t.append((0,o.default)("#loading").get(0)||s.LOADING_HTML)},ready:function(t){(0,o.default)(t||(0,o.default)("body")).removeClass("loading").attr("aria-hidden",!1),(0,o.default)("#loading").fadeOut()},cacheBust:function(t){var e=6e4*t;return Math.round((new Date).getTime()/e)*e},noSpaceBarScroll:function(){(0,o.default)(document).keypress(s.noSpaceBarHandler)},noSpaceBarHandler:function(t){var e=t.target.tagName;if(-1===o.default.inArray(e,["INPUT","TEXTAREA","SELECT"])){var i=t.key;if(o.default.inArray(i,[" ","Enter"])>-1){var n=(0,o.default)(t.target),r=n.attr("href");t.preventDefault(),r&&"#"!==r?n.attr("target")?window.open(r):s.location(r):n.trigger("click")}}},location:function(t){window.location=t},activeElement:function(){var t=document.activeElement;return{activeElement:t,isTextInput:"INPUT"===t.tagName&&"text"===t.type}},removeDups:function(t){var e={},i=[];return t.forEach(function(t){e[t]=n(t)}),Object.keys(e).forEach(function(t){i.push("number"===e[t]?1*t:t)}),i},uniqueIds:{},LOADING_HTML:'<div id="loading"><div><svg xmlns="http://www.w3.org/2000/svg" width="152" height="52"><g transform="translate(1.5,0)"><polygon points="15.5,1.2 3.1,1.2 0,4.3 0,47.7 3.1,50.8 15.5,50.8 18.6,47.7 18.6,35.3 34.1,50.8 46.6,50.8 49.7,47.7 49.7,4.3 46.6,1.2 34.1,1.2 31,4.3 31,16.7 "/><polygon points="83.8,47.7 83.8,38.4 99.3,22.9 99.3,10.5 99.3,4.3 96.2,1.2 83.8,1.2 80.7,4.3 80.7,10.5 74.5,16.7 68.3,10.5 68.3,4.3 65.2,1.2 52.8,1.2 49.7,4.3 49.7,22.9 65.2,38.4 65.2,47.7 68.3,50.8 80.7,50.8 "/><polygon points="145.9,29.1 130.4,29.1 130.4,32.2 118,32.2 118,19.8 130.4,19.8 130.4,22.9 145.9,22.9 149,19.8 149,10.5 139.7,1.2 108.6,1.2 99.3,10.5 99.3,41.5 108.6,50.8 139.7,50.8 149,41.5 149,32.2 "/></g></svg><h1>maps.nyc.gov</h1></div></div>'};(0,o.default)(document).ready(function(){s.loading((0,o.default)("body"))});var c=s;e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(6);function o(t,e,i){var n=void 0!==i?t.toFixed(i):""+t,o=n.indexOf(".");return(o=-1===o?n.length:o)>e?n:new Array(1+e-o).join("0")+n}function r(t,e){return t[0]+=e[0],t[1]+=e[1],t}function a(t,e){var i=e.getRadius(),n=e.getCenter(),o=n[0],r=n[1],a=t[0]-o,s=t[1]-r;0===a&&0===s&&(a=1);var c=Math.sqrt(a*a+s*s);return[o+i*a/c,r+i*s/c]}function s(t,e){var i,n,o=t[0],r=t[1],a=e[0],s=e[1],c=a[0],u=a[1],l=s[0],h=s[1],f=l-c,p=h-u,d=0===f&&0===p?0:(f*(o-c)+p*(r-u))/(f*f+p*p||0);return d<=0?(i=c,n=u):d>=1?(i=l,n=h):(i=c+d*f,n=u+d*p),[i,n]}function c(t){return function(e){return v(e,t)}}function u(t,e,i){var r=Object(n.d)(e+180,360)-180,a=Math.abs(3600*r),s=i||0,c=Math.pow(10,s),u=Math.floor(a/3600),l=Math.floor((a-3600*u)/60),h=a-3600*u-60*l;return(h=Math.ceil(h*c)/c)>=60&&(h=0,l+=1),l>=60&&(l=0,u+=1),u+"Â° "+o(l,2)+"â€² "+o(h,2,s)+"â€³"+(0==r?"":" "+t.charAt(r<0?1:0))}function l(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function h(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function f(t,e){var i=Math.cos(e),n=Math.sin(e),o=t[0]*i-t[1]*n,r=t[1]*i+t[0]*n;return t[0]=o,t[1]=r,t}function p(t,e){return t[0]*=e,t[1]*=e,t}function d(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function g(t,e){return Math.sqrt(d(t,e))}function y(t,e){return d(t,s(t,e))}function _(t,e){return t?u("NS",t[1],e)+" "+u("EW",t[0],e):""}function v(t,e){return l(t,"{x}, {y}",e)}i.d(e,"add",function(){return r}),i.d(e,"closestOnCircle",function(){return a}),i.d(e,"closestOnSegment",function(){return s}),i.d(e,"createStringXY",function(){return c}),i.d(e,"degreesToStringHDMS",function(){return u}),i.d(e,"format",function(){return l}),i.d(e,"equals",function(){return h}),i.d(e,"rotate",function(){return f}),i.d(e,"scale",function(){return p}),i.d(e,"squaredDistance",function(){return d}),i.d(e,"distance",function(){return g}),i.d(e,"squaredDistanceToSegment",function(){return y}),i.d(e,"toStringHDMS",function(){return _}),i.d(e,"toStringXY",function(){return v})},function(t,e,i){"use strict";function n(t){return t[0]>0&&t[1]>0}function o(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function r(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return r})},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return r});var n=i(14),o=[n.a.POLYGON,n.a.CIRCLE,n.a.LINE_STRING,n.a.IMAGE,n.a.TEXT,n.a.DEFAULT],r={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1}},function(t,e,i){"use strict";var n=i(70),o=i(1),r=i(20),a=i(23),s=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new a.a(t):t,i=e.type;e.target=this;var n,o=this.listeners_[i];if(o){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var s=0,c=o.length;s<c;++s)if(!1===o[s].call(this,e)||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var u=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];u--;)this.removeEventListener(i,r.c);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){Object(o.d)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);t in this.pendingRemovals_?(i[n]=r.c,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t])}},e}(n.a);e.a=s},function(t,e,i){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return r}),i.d(e,"e",function(){return a}),i.d(e,"c",function(){return c}),i.d(e,"d",function(){return u});var n=i(6);function o(t,e,i,o,r,a,s){var c=(i-e)/o;if(c<3){for(;e<i;e+=o)a[s++]=t[e],a[s++]=t[e+1];return s}var u=new Array(c);u[0]=1,u[c-1]=1;for(var l=[e,i-o],h=0;l.length>0;){for(var f=l.pop(),p=l.pop(),d=0,g=t[p],y=t[p+1],_=t[f],v=t[f+1],m=p+o;m<f;m+=o){var b=t[m],O=t[m+1],E=Object(n.g)(b,O,g,y,_,v);E>d&&(h=m,d=E)}d>r&&(u[(h-e)/o]=1,p+o<h&&l.push(p,h),h+o<f&&l.push(h,f))}for(var C=0;C<c;++C)u[C]&&(a[s++]=t[e+C*o],a[s++]=t[e+C*o+1]);return s}function r(t,e,i,n,r,a,s,c){for(var u=0,l=i.length;u<l;++u){var h=i[u];s=o(t,e,h,n,r,a,s),c.push(s),e=h}return s}function a(t,e){return e*Math.round(t/e)}function s(t,e,i,n,o,r,s){if(e==i)return s;var c,u,l=a(t[e],o),h=a(t[e+1],o);e+=n,r[s++]=l,r[s++]=h;do{if(c=a(t[e],o),u=a(t[e+1],o),(e+=n)==i)return r[s++]=c,r[s++]=u,s}while(c==l&&u==h);for(;e<i;){var f=a(t[e],o),p=a(t[e+1],o);if(e+=n,f!=c||p!=u){var d=c-l,g=u-h,y=f-l,_=p-h;d*_==g*y&&(d<0&&y<d||d==y||d>0&&y>d)&&(g<0&&_<g||g==_||g>0&&_>g)?(c=f,u=p):(r[s++]=c,r[s++]=u,l=c,h=u,c=f,u=p)}}return r[s++]=c,r[s++]=u,s}function c(t,e,i,n,o,r,a,c){for(var u=0,l=i.length;u<l;++u){var h=i[u];a=s(t,e,h,n,o,r,a),c.push(a),e=h}return a}function u(t,e,i,n,o,r,a,s){for(var u=0,l=i.length;u<l;++u){var h=i[u],f=[];a=c(t,e,h,n,o,r,a,f),s.push(f),e=h[h.length-1]}return a}},function(t,e,i){"use strict";var n=i(13),o=i(0),r=i(21),a=i(3),s=i(31),c=i(75),u=i(35),l=i(36),h=i(32),f=i(46),p=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,r.a.XY)},e.prototype.getType=function(){return a.a.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.a),d=i(52),g=i(79),y=i(48),_=i(97),v=i(61),m=i(63);i(6),i.d(e,"a",function(){return O}),i.d(e,"c",function(){return E});var b=function(t){function e(e,i,n){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&n?(this.setFlatCoordinates(i,e),this.ends_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Object(y.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(c.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(m.c)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(h.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(o.getCenter)(this.getExtent());this.flatInteriorPoint_=Object(_.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new d.default(this.getFlatInteriorPoint(),r.a.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new p(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],o=0,r=0,a=i.length;r<a;++r){var s=i[r],c=new p(e.slice(o,s),t);n.push(c),o=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(m.a)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(m.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(f.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,r.a.XY,n)},e.prototype.getType=function(){return a.a.POLYGON},e.prototype.intersectsExtent=function(t){return Object(v.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(l.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(s.a);function O(t,e,i,o){for(var a=i||32,s=[],c=0;c<a;++c)Object(n.c)(s,Object(g.b)(t,e,2*Math.PI*c/a,o));return s.push(s[0],s[1]),new b(s,r.a.XY,[s.length])}function E(t){var e=t[0],i=t[1],n=t[2],o=t[3],a=[e,i,e,o,n,o,n,i,e,i];return new b(a,r.a.XY,[a.length])}e.b=b},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return a}),i.d(e,"d",function(){return s});var n=i(0);function o(t,e,i,o,a){return!Object(n.forEachCorner)(a,function(n){return!r(t,e,i,o,n[0],n[1])})}function r(t,e,i,n,o,r){for(var a=0,s=t[i-n],c=t[i-n+1];e<i;e+=n){var u=t[e],l=t[e+1];c<=r?l>r&&(u-s)*(r-c)-(o-s)*(l-c)>0&&a++:l<=r&&(u-s)*(r-c)-(o-s)*(l-c)<0&&a--,s=u,c=l}return 0!==a}function a(t,e,i,n,o,a){if(0===i.length)return!1;if(!r(t,e,i[0],n,o,a))return!1;for(var s=1,c=i.length;s<c;++s)if(r(t,i[s-1],i[s],n,o,a))return!1;return!0}function s(t,e,i,n,o,r){if(0===i.length)return!1;for(var s=0,c=i.length;s<c;++s){var u=i[s];if(a(t,e,u,n,o,r))return!0;e=u[u.length-1]}return!1}},function(t,e,i){"use strict";var n=i(87),o=i(27),r=i(15),a="length",s=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(23).a),c=function(t){function e(e,i){t.call(this);var n=i||{};if(this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(var o=0,r=this.array_.length;o<r;++o)this.assertUnique_(this.array_[o],o);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(a)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new s(o.a.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new s(o.a.REMOVE,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new s(o.a.REMOVE,n)),this.dispatchEvent(new s(o.a.ADD,e))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(a,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==e)throw new n.a(58)},e}(r.a);e.a=c},function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"a",function(){return r}),i.d(e,"c",function(){return a}),i(12);var n={};function o(){n={}}function r(t,e,i){var o=t.getCode(),r=e.getCode();o in n||(n[o]={}),n[o][r]=i}function a(t,e){var i;return t in n&&e in n[t]&&(i=n[t][e]),i}},function(t,e,i){"use strict";i.d(e,"a",function(){return u}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return h}),i.d(e,"d",function(){return f});var n=i(2),o=i(22),r=i(3),a=i(14),s=.5,c={Point:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=o.a.LOADED)return;var s=t.getReplay(i.getZIndex(),a.a.IMAGE);s.setImageStyle(r,t.addDeclutter(!1)),s.drawPoint(e,n)}var c=i.getText();if(c){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(c,t.addDeclutter(!!r)),u.drawText(e,n)}},LineString:function(t,e,i,n){var o=i.getStroke();if(o){var r=t.getReplay(i.getZIndex(),a.a.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawLineString(e,n)}var s=i.getText();if(s){var c=t.getReplay(i.getZIndex(),a.a.TEXT);c.setTextStyle(s,t.addDeclutter(!1)),c.drawText(e,n)}},Polygon:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(o||r){var s=t.getReplay(i.getZIndex(),a.a.POLYGON);s.setFillStrokeStyle(o,r),s.drawPolygon(e,n)}var c=i.getText();if(c){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(c,t.addDeclutter(!1)),u.drawText(e,n)}},MultiPoint:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=o.a.LOADED)return;var s=t.getReplay(i.getZIndex(),a.a.IMAGE);s.setImageStyle(r,t.addDeclutter(!1)),s.drawMultiPoint(e,n)}var c=i.getText();if(c){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(c,t.addDeclutter(!!r)),u.drawText(e,n)}},MultiLineString:function(t,e,i,n){var o=i.getStroke();if(o){var r=t.getReplay(i.getZIndex(),a.a.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,n)}var s=i.getText();if(s){var c=t.getReplay(i.getZIndex(),a.a.TEXT);c.setTextStyle(s,t.addDeclutter(!1)),c.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(r||o){var s=t.getReplay(i.getZIndex(),a.a.POLYGON);s.setFillStrokeStyle(o,r),s.drawMultiPolygon(e,n)}var c=i.getText();if(c){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(c,t.addDeclutter(!1)),u.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var o,r,a=e.getGeometriesArray();for(o=0,r=a.length;o<r;++o)(0,c[a[o].getType()])(t,a[o],i,n)},Circle:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(o||r){var s=t.getReplay(i.getZIndex(),a.a.CIRCLE);s.setFillStrokeStyle(o,r),s.drawCircle(e,n)}var c=i.getText();if(c){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(c,t.addDeclutter(!1)),u.drawText(e,n)}}};function u(t,e){return parseInt(Object(n.c)(t),10)-parseInt(Object(n.c)(e),10)}function l(t,e){var i=h(t,e);return i*i}function h(t,e){return s*t/e}function f(t,e,i,n,s,u){var l=!1,h=i.getImage();if(h){var f=h.getImageState();f==o.a.LOADED||f==o.a.ERROR?h.unlistenImageChange(s,u):(f==o.a.IDLE&&h.load(),f=h.getImageState(),h.listenImageChange(s,u),l=!0)}return function(t,e,i,n){var o=i.getGeometryFunction()(e);if(o){var s=o.getSimplifiedGeometry(n);i.getRenderer()?function t(e,i,n,o){if(i.getType()!=r.a.GEOMETRY_COLLECTION)e.getReplay(n.getZIndex(),a.a.DEFAULT).drawCustom(i,o,n.getRenderer());else for(var s=i.getGeometries(),c=0,u=s.length;c<u;++c)t(e,s[c],n,o)}(t,s,i,e):(0,c[s.getType()])(t,s,i,e)}}(t,e,i,n),l}},function(t,e,i){"use strict";i.r(e);var n=i(0),o=i(3),r=i(31),a=i(36),s=i(6),c=function(t){function e(e,i){t.call(this),this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var o=this.flatCoordinates,r=Object(s.f)(t,e,o[0],o[1]);if(r<n){for(var a=this.stride,c=0;c<a;++c)i[c]=o[c];return i.length=a,r}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(n.createOrUpdateFromCoordinate)(this.flatCoordinates,t)},e.prototype.getType=function(){return o.a.POINT},e.prototype.intersectsExtent=function(t){return Object(n.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(a.a)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(r.a);e.default=c},function(t,e,i){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,i){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,i){"use strict";i.d(e,"b",function(){return p});var n=i(1),o=i(5),r=i(2),a=i(15),s=i(93),c=i(24),u=i(12),l=i(38),h=i(45),f=function(t){function e(e){var i=Object(u.a)({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Object(n.a)(this,Object(a.b)(c.a.SOURCE),this.handleSourcePropertyChange_,this);var o=e.source?e.source:null;this.setSource(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(c.a.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():h.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(n.e)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(n.a)(t,o.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(n.e)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(n.e)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(n.a)(t,l.a.PRECOMPOSE,function(t){var e=t,i=this.getLayerState();i.managed=!1,void 0===this.getZIndex()&&(i.zIndex=1/0),e.frameState.layerStatesArray.push(i),e.frameState.layerStates[Object(r.c)(this)]=i},this),this.mapRenderKey_=Object(n.a)(this,o.a.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(c.a.SOURCE,t)},e}(s.a);function p(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}e.a=f},function(t,e,i){"use strict";i.r(e);var n=i(65),o=i(42),r=i(0),a=i(66),s=i(10),c=i(26),u=i(11),l=i(67),h=i(13),f=i(6),p=i(33),d=[0,0,0],g=function(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(u.a)(Object(h.e)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var i=0,o=this.resolutions_.length-1;i<o;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(u.a)(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=Object(r.getTopLeft)(a)),Object(u.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(u.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:n.b,Object(u.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new l.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):a&&this.calculateTileRanges_(a)};g.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),o=n.minX,r=n.maxX;o<=r;++o)for(var a=n.minY,s=n.maxY;a<=s;++a)i([e,o,a])},g.prototype.forEachTileCoordParentTileRange=function(t,e,i,n,o){var r,a,s,c=null,u=t[0]-1;for(2===this.zoomFactor_?(a=t[1],s=t[2]):c=this.getTileCoordExtent(t,o);u>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),s=Math.floor(s/2),r=Object(l.a)(a,a,s,s,n)):r=this.getTileRangeForExtentAndZ(c,u,n),e.call(i,u,r))return!0;--u}return!1},g.prototype.getExtent=function(){return this.extent_},g.prototype.getMaxZoom=function(){return this.maxZoom},g.prototype.getMinZoom=function(){return this.minZoom},g.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},g.prototype.getResolution=function(t){return this.resolutions_[t]},g.prototype.getResolutions=function(){return this.resolutions_},g.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],o=2*t[2];return Object(l.a)(n,n+1,o,o+1,e)}var r=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},g.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),a=this.getResolution(t),s=Object(o.c)(this.getTileSize(t),this.tmpSize_),c=n[0]+e.minX*s[0]*a,u=n[0]+(e.maxX+1)*s[0]*a,l=n[1]+e.minY*s[1]*a,h=n[1]+(e.maxY+1)*s[1]*a;return Object(r.createOrUpdate)(c,l,u,h,i)},g.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=d;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n);var o=n[1],r=n[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,n),Object(l.a)(o,n[1],r,n[2],i)},g.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Object(o.c)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]+(t[2]+.5)*n[1]*i]},g.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),a=Object(o.c)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*a[0]*n,c=i[1]+t[2]*a[1]*n,u=s+a[0]*n,l=c+a[1]*n;return Object(r.createOrUpdate)(s,c,u,l,e)},g.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},g.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){var a=this.getZForResolution(i),s=i/this.getResolution(a),c=this.getOrigin(a),u=Object(o.c)(this.getTileSize(a),this.tmpSize_),l=n?.5:0,h=n?0:.5,f=Math.floor((t-c[0])/i+l),d=Math.floor((e-c[1])/i+h),g=s*f/u[0],y=s*d/u[1];return n?(g=Math.ceil(g)-1,y=Math.ceil(y)-1):(g=Math.floor(g),y=Math.floor(y)),Object(p.a)(a,g,y,r)},g.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){var a=this.getOrigin(i),s=this.getResolution(i),c=Object(o.c)(this.getTileSize(i),this.tmpSize_),u=n?.5:0,l=n?0:.5,h=Math.floor((t-a[0])/s+u),f=Math.floor((e-a[1])/s+l),d=h/c[0],g=f/c[1];return n?(d=Math.ceil(d)-1,g=Math.ceil(g)-1):(d=Math.floor(d),g=Math.floor(g)),Object(p.a)(i,d,g,r)},g.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},g.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},g.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},g.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},g.prototype.getZForResolution=function(t,e){var i=Object(h.f)(this.resolutions_,t,e||0);return Object(f.a)(i,this.minZoom,this.maxZoom)},g.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i};var y=g;function _(t){var e=t.getDefaultTileGrid();return e||(e=E(t),t.setDefaultTileGrid(e)),e}function v(t,e,i){var n=e[0],o=t.getTileCoordCenter(e),a=C(i);if(Object(r.containsCoordinate)(a,o))return e;var s=Object(r.getWidth)(a),c=Math.ceil((a[0]-o[0])/s);return o[0]+=s*c,t.getTileCoordForCoordAndZ(o,n)}function m(t,e,i,n){var o=void 0!==n?n:a.a.TOP_LEFT,s=O(t,e,i);return new y({extent:t,origin:Object(r.getCorner)(t,o),resolutions:s,tileSize:i})}function b(t){var e=t||{},i=e.extent||Object(s.get)("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:O(i,e.maxZoom,e.tileSize)};return new y(n)}function O(t,e,i){for(var a=void 0!==e?e:n.a,s=Object(r.getHeight)(t),c=Object(r.getWidth)(t),u=Object(o.c)(void 0!==i?i:n.b),l=Math.max(c/u[0],s/u[1]),h=a+1,f=new Array(h),p=0;p<h;++p)f[p]=l/Math.pow(2,p);return f}function E(t,e,i,n){return m(C(t),e,i,n)}function C(t){var e=(t=Object(s.get)(t)).getExtent();if(!e){var i=180*s.METERS_PER_UNIT[c.b.DEGREES]/t.getMetersPerUnit();e=Object(r.createOrUpdate)(-i,-i,i,i)}return e}i.d(e,"getForProjection",function(){return _}),i.d(e,"wrapX",function(){return v}),i.d(e,"createForExtent",function(){return m}),i.d(e,"createXYZ",function(){return b}),i.d(e,"createForProjection",function(){return E}),i.d(e,"extentFromProjection",function(){return C})},function(t,e,i){"use strict";i.r(e),e.default={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,i){"use strict";var n=i(2),o=i(37),r=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};r.prototype.clone=function(){var t=this.getColor();return new r({color:Array.isArray(t)?t.slice():t||void 0})},r.prototype.getColor=function(){return this.color_},r.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},r.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+Object(o.b)(t):this.checksum_=Object(n.c)(this.color_):this.checksum_="f-"}return this.checksum_},e.a=r},function(t,e,i){"use strict";i.r(e),i.d(e,"createStyleFunction",function(){return c});var n=i(11),o=i(1),r=i(5),a=i(15),s=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(o.a)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;this.setGeometry(i)}else{var n=e;this.setProperties(n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(o.e)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(o.a)(t,r.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?c(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){Object(o.c)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(o.a)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(a.a);function c(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(Object(n.a)("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}e.default=s},function(t,e,i){"use strict";var n=i(26),o=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};o.prototype.canWrapX=function(){return this.canWrapX_},o.prototype.getCode=function(){return this.code_},o.prototype.getExtent=function(){return this.extent_},o.prototype.getUnits=function(){return this.units_},o.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||n.a[this.units_]},o.prototype.getWorldExtent=function(){return this.worldExtent_},o.prototype.getAxisOrientation=function(){return this.axisOrientation_},o.prototype.isGlobal=function(){return this.global_},o.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},o.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},o.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},o.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},o.prototype.setWorldExtent=function(t){this.worldExtent_=t},o.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},o.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e.a=o},function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s}),i.d(e,"c",function(){return c}),i.d(e,"d",function(){return u});var n=i(0),o=i(48),r=i(95);function a(t,e,i,o,a){var s=Object(n.extendFlatCoordinates)(Object(n.createEmpty)(),t,e,i,o);return!!Object(n.intersects)(a,s)&&(!!Object(n.containsExtent)(a,s)||s[0]>=a[0]&&s[2]<=a[2]||s[1]>=a[1]&&s[3]<=a[3]||Object(r.a)(t,e,i,o,function(t,e){return Object(n.intersectsSegment)(a,t,e)}))}function s(t,e,i,n,o){for(var r=0,s=i.length;r<s;++r){if(a(t,e,i[r],n,o))return!0;e=i[r]}return!1}function c(t,e,i,n,r){if(!function(t,e,i,n,r){return!!(a(t,e,i,n,r)||Object(o.b)(t,e,i,n,r[0],r[1])||Object(o.b)(t,e,i,n,r[0],r[3])||Object(o.b)(t,e,i,n,r[2],r[1])||Object(o.b)(t,e,i,n,r[2],r[3]))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var s=1,c=i.length;s<c;++s)if(Object(o.a)(t,i[s-1],i[s],n,r)&&!a(t,i[s-1],i[s],n,r))return!1;return!0}function u(t,e,i,n,o){for(var r=0,a=i.length;r<a;++r){var s=i[r];if(c(t,e,s,n,o))return!0;e=s[s.length-1]}return!1}},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i(17),o=i(30),r=i(12),a=function(t){function e(e){var i=e||{};t.call(this,i),i.handleDownEvent&&(this.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(this.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(this.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(this.handleUpEvent=i.handleUpEvent),i.stopDown&&(this.stopDown=i.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==n.a.POINTERDRAG)this.handleDragEvent(t);else if(t.type==n.a.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==n.a.POINTERDOWN){var o=this.handleDownEvent(t);o&&t.preventDefault(),this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==n.a.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===n.a.POINTERDOWN||e===n.a.POINTERDRAG||e===n.a.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==n.a.POINTERUP?delete this.trackedPointers_[i]:t.type==n.a.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=Object(r.c)(this.trackedPointers_)}},e}(o.a);function s(t){for(var e=t.length,i=0,n=0,o=0;o<e;o++)i+=t[o].clientX,n+=t[o].clientY;return[i/e,n/e]}e.b=a},function(t,e,i){"use strict";function n(t,e,i,n){for(;e<i-n;){for(var o=0;o<n;++o){var r=t[e+o];t[e+o]=t[i-n+o],t[i-n+o]=r}e+=n,i-=n}}function o(t,e,i,n){for(var o=0,r=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],c=t[e+1];o+=(s-r)*(c+a),r=s,a=c}return o>0}function r(t,e,i,n,r){for(var a=void 0!==r&&r,s=0,c=i.length;s<c;++s){var u=i[s],l=o(t,e,u,n);if(0===s){if(a&&l||!a&&!l)return!1}else if(a&&!l||!a&&l)return!1;e=u}return!0}function a(t,e,i,n,o){for(var a=0,s=i.length;a<s;++a)if(!r(t,e,i[a],n,o))return!1;return!0}function s(t,e,i,r,a){for(var s=void 0!==a&&a,c=0,u=i.length;c<u;++c){var l=i[c],h=o(t,e,l,r);(0===c?s&&h||!s&&!h:s&&!h||!s&&h)&&n(t,e,l,r),e=l}return e}function c(t,e,i,n,o){for(var r=0,a=i.length;r<a;++r)e=s(t,e,i[r],n,o);return e}i.d(e,"a",function(){return r}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return s}),i.d(e,"d",function(){return c})},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=i(8))&&o.__esModule?o:{default:o},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.evtHdlrs={}}var e,i;return e=t,(i=[{key:"on",value:function(t,e,i){this.addHdlr(t,e,i)}},{key:"one",value:function(t,e,i){this.addHdlr(t,e,i,!0)}},{key:"trigger",value:function(t,e){var i=this.evtHdlrs[t],n=[];i&&(i.forEach(function(t){t.scope?t.handler.call(t.scope,e):t.handler(e),t.remove&&n.push(t)}),n.forEach(function(t){i.splice(r.default.inArray(t,i),1)}))}},{key:"off",value:function(t,e,i){var n=this.evtHdlrs[t];n.forEach(function(t,o){if(t.handler===e&&t.scope===i)return n.splice(o,1),!1})}},{key:"addHdlr",value:function(t,e,i,n){this.evtHdlrs[t]=this.evtHdlrs[t]||[],this.evtHdlrs[t].push({handler:e,scope:i,remove:n})}}])&&n(e.prototype,i),t}();a.Handler;var s=a;e.default=s},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o});var n=42,o=256},function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=function(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n};function o(t,e,i,o,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=o,r):new n(t,e,i,o)}n.prototype.contains=function(t){return this.containsXY(t[1],t[2])},n.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},n.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},n.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},n.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.b=n},function(t,e,i){"use strict";var n=i(2),o=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};o.prototype.clone=function(){var t=this.getColor();return new o({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},o.prototype.getColor=function(){return this.color_},o.prototype.getLineCap=function(){return this.lineCap_},o.prototype.getLineDash=function(){return this.lineDash_},o.prototype.getLineDashOffset=function(){return this.lineDashOffset_},o.prototype.getLineJoin=function(){return this.lineJoin_},o.prototype.getMiterLimit=function(){return this.miterLimit_},o.prototype.getWidth=function(){return this.width_},o.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},o.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},o.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},o.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},o.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},o.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},o.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},o.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=Object(n.c)(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},e.a=o},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=l(i(8)),u=l(i(64));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this))).container=(0,c.default)(t),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(n=[{key:"getContainer",value:function(){return this.container}},{key:"find",value:function(t){return this.getContainer().find(t)}},{key:"prepend",value:function(t){return this.getContainer().prepend((0,c.default)(t))}},{key:"append",value:function(t){return this.getContainer().append((0,c.default)(t))}}])&&o(i.prototype,n),e}();e.default=h},function(t,e,i){"use strict";var n=function(){this.disposed_=!1};n.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},e.a=n},function(t,e,i){"use strict";i.r(e),i.d(e,"transformWithOptions",function(){return s});var n=i(12),o=i(2),r=i(10),a=function(){this.dataProjection=null,this.defaultFeatureProjection=null};function s(t,e,i){var n,o=i?Object(r.get)(i.featureProjection):null,a=i?Object(r.get)(i.dataProjection):null;if(n=o&&a&&!Object(r.equivalent)(o,a)?Array.isArray(t)?Object(r.transformExtent)(t,a,o):(e?t.clone():t).transform(e?o:a,e?a:o):t,e&&i&&void 0!==i.decimals&&!Array.isArray(n)){var s=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t})}return n}a.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},a.prototype.adaptOptions=function(t){return Object(n.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},a.prototype.getLastExtent=function(){return null},a.prototype.getType=function(){return Object(o.b)()},a.prototype.readFeature=function(t,e){return Object(o.b)()},a.prototype.readFeatures=function(t,e){return Object(o.b)()},a.prototype.readGeometry=function(t,e){return Object(o.b)()},a.prototype.readProjection=function(t){return Object(o.b)()},a.prototype.writeFeature=function(t,e){return Object(o.b)()},a.prototype.writeFeatures=function(t,e){return Object(o.b)()},a.prototype.writeGeometry=function(t,e){return Object(o.b)()},e.default=a},function(t,e,i){"use strict";i.r(e),i.d(e,"toFunction",function(){return l}),i.d(e,"createDefaultStyle",function(){return f}),i.d(e,"createEditingStyle",function(){return p});var n=i(11),o=i(3),r=i(82),a=i(58),s=i(68);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=d,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};function l(t){var e,i;"function"==typeof t?e=t:(Array.isArray(t)?i=t:(Object(n.a)("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i});return e}u.prototype.clone=function(){var t=this.getGeometry();return t&&"object"===c(t)&&(t=t.clone()),new u({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},u.prototype.getRenderer=function(){return this.renderer_},u.prototype.setRenderer=function(t){this.renderer_=t},u.prototype.getGeometry=function(){return this.geometry_},u.prototype.getGeometryFunction=function(){return this.geometryFunction_},u.prototype.getFill=function(){return this.fill_},u.prototype.setFill=function(t){this.fill_=t},u.prototype.getImage=function(){return this.image_},u.prototype.setImage=function(t){this.image_=t},u.prototype.getStroke=function(){return this.stroke_},u.prototype.setStroke=function(t){this.stroke_=t},u.prototype.getText=function(){return this.text_},u.prototype.setText=function(t){this.text_=t},u.prototype.getZIndex=function(){return this.zIndex_},u.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=d,this.geometry_=t},u.prototype.setZIndex=function(t){this.zIndex_=t};var h=null;function f(t,e){if(!h){var i=new a.a({color:"rgba(255,255,255,0.4)"}),n=new s.a({color:"#3399CC",width:1.25});h=[new u({image:new r.a({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return h}function p(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[o.a.POLYGON]=[new u({fill:new a.a({color:[255,255,255,.5]})})],t[o.a.MULTI_POLYGON]=t[o.a.POLYGON],t[o.a.LINE_STRING]=[new u({stroke:new s.a({color:e,width:5})}),new u({stroke:new s.a({color:i,width:3})})],t[o.a.MULTI_LINE_STRING]=t[o.a.LINE_STRING],t[o.a.CIRCLE]=t[o.a.POLYGON].concat(t[o.a.LINE_STRING]),t[o.a.POINT]=[new u({image:new r.a({radius:6,fill:new a.a({color:i}),stroke:new s.a({color:e,width:1.5})}),zIndex:1/0})],t[o.a.MULTI_POINT]=t[o.a.POINT],t[o.a.GEOMETRY_COLLECTION]=t[o.a.POLYGON].concat(t[o.a.LINE_STRING],t[o.a.POINT]),t}function d(t){return t.getGeometry()}e.default=u},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return s});var n,o,r="ol-selectable",a="ol-unselectable",s=(o={},function(t){if(n||(n=document.createElement("div").style),!(t in o)){n.font=t;var e=n.fontFamily;if(n.font="",!e)return null;o[t]=e.split(/,\s?/)}return o[t]})},function(t,e,i){"use strict";t.exports=o,t.exports.default=o;var n=i(125);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,o){o||(o=g(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,a=e;a<i;a++)r=t.children[a],c(o,t.leaf?n(r):r);return o}function c(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,i,o,r){for(var a,s=[e,i];s.length;)(i=s.pop())-(e=s.pop())<=o||(a=e+Math.ceil((i-e)/o/2)*o,n(t,a,e,i,r),s.push(e,a,a,i))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!d(t,e))return i;for(var o,r,a,s,c=[];e;){for(o=0,r=e.children.length;o<r;o++)a=e.children[o],d(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):p(t,s)?this._all(a,i):c.push(a));e=c.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!d(t,e))return!1;for(var n,o,r,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(r=e.children[n],d(t,a=e.leaf?i(r):r)){if(e.leaf||p(t,a))return!0;s.push(r)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,n,o,a,s=this.data,c=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],i=l.pop(),a=!0),s.leaf&&-1!==(o=r(t,s.children,e)))return s.children.splice(o,1),u.push(s),this._condense(u),this;a||s.leaf||!p(s,c)?n?(i++,s=n.children[i],a=!1):s=null:(u.push(s),l.push(i),i=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var o,r=i-e+1,s=this._maxEntries;if(r<=s)return a(o=g(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,n-1))),(o=g([])).leaf=!1,o.height=n;var c,u,l,h,f=Math.ceil(r/s),p=f*Math.ceil(Math.sqrt(s));for(y(t,e,i,p,this.compareMinX),c=e;c<=i;c+=p)for(y(t,c,l=Math.min(c+p-1,i),f,this.compareMinY),u=c;u<=l;u+=f)h=Math.min(u+f-1,l),o.children.push(this._build(t,u,h,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,e,i,n){for(var o,r,a,s,c,u,l,f,p,d;n.push(e),!e.leaf&&n.length-1!==i;){for(l=f=1/0,o=0,r=e.children.length;o<r;o++)c=h(a=e.children[o]),p=t,d=a,(u=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-c)<f?(f=u,l=c<l?c:l,s=a):u===f&&c<l&&(l=c,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,o=i?t:n(t),r=[],a=this._chooseSubtree(o,this.data,e,r);for(a.children.push(t),c(a,o);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(o,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var r=this._chooseSplitIndex(i,o,n),s=g(i.children.splice(r,i.children.length-r));s.height=i.height,s.leaf=i.leaf,a(i,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,o,r,a,c,u,l,f,p,d,g,y,_,v;for(u=l=1/0,n=e;n<=i-e;n++)p=o=s(t,0,n,this.toBBox),d=r=s(t,n,i,this.toBBox),g=void 0,y=void 0,_=void 0,v=void 0,g=Math.max(p.minX,d.minX),y=Math.max(p.minY,d.minY),_=Math.min(p.maxX,d.maxX),v=Math.min(p.maxY,d.maxY),a=Math.max(0,_-g)*Math.max(0,v-y),c=h(o)+h(r),a<u?(u=a,f=n,l=c<l?c:l):a===u&&c<l&&(l=c,f=n);return f},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var o,r,a=this.toBBox,u=s(t,0,e,a),l=s(t,i-e,i,a),h=f(u)+f(l);for(o=e;o<i-e;o++)r=t.children[o],c(u,t.leaf?a(r):r),h+=f(u);for(o=i-e-1;o>=e;o--)r=t.children[o],c(l,t.leaf?a(r):r),h+=f(l);return h},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)c(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){"use strict";function n(t,e,i,n){for(var o=0,r=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],c=t[e+1];o+=a*s-r*c,r=s,a=c}return o/2}function o(t,e,i,o){for(var r=0,a=0,s=i.length;a<s;++a){var c=i[a];r+=n(t,e,c,o),e=c}return r}function r(t,e,i,n){for(var r=0,a=0,s=i.length;a<s;++a){var c=i[a];r+=o(t,e,c,n),e=c[c.length-1]}return r}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return r})},function(t,e,i){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t,e,i){"use strict";i.r(e);var n=i(11),o=i(59),r=i(71),a=i(2),s=i(57);function c(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var u=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return s.default.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(c(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(c(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(a.b)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(a.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(c(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(a.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(c(t))},e.prototype.readProjectionFromObject=function(t){return Object(a.b)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(a.b)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(a.b)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(a.b)()},e}(r.default),l=i(1),h=i(5),f=i(0),p=i(88),d=i(3),g=i(12);function y(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}var _=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(l.c)(this.geometries_[t],h.a.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(l.a)(this.geometries_[t],h.a.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<Object(f.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;for(var o=this.geometries_,r=0,a=o.length;r<a;++r)n=o[r].closestPointXY(t,e,i,n);return n},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,n=0,o=i.length;n<o;++n)if(i[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(f.createOrUpdateEmpty)(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)Object(f.extend)(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return y(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(g.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];for(var n=[],o=this.geometries_,r=!1,a=0,s=o.length;a<s;++a){var c=o[a],u=c.getSimplifiedGeometry(t);n.push(u),u!==c&&(r=!0)}if(r){var l=new e(null);return l.setGeometriesArray(n),this.simplifiedGeometryCache[i]=l,l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return d.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,o=i.length;n<o;++n)i[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var n=i;n||(n=Object(f.getCenter)(this.getExtent()));for(var o=this.geometries_,r=0,a=o.length;r<a;++r)o[r].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(y(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,n=0,o=i.length;n<o;++n)i[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(p.a),v=i(13),m=i(21),b=i(31),O=i(35),E=i(36),C=i(32),S=i(6);function T(t,e,i,n,o,r){var a=NaN,s=NaN,c=(i-e)/n;if(1===c)a=t[e],s=t[e+1];else if(2==c)a=(1-o)*t[e]+o*t[e+n],s=(1-o)*t[e+1]+o*t[e+n+1];else if(0!==c){for(var u=t[e],l=t[e+1],h=0,f=[0],p=e+n;p<i;p+=n){var d=t[p],g=t[p+1];h+=Math.sqrt((d-u)*(d-u)+(g-l)*(g-l)),f.push(h),u=d,l=g}var y=o*h,_=Object(v.a)(f,y);if(_<0){var m=(y-f[-_-2])/(f[-_-1]-f[-_-2]),b=e+(-_-2)*n;a=Object(S.c)(t[b],t[b+n],m),s=Object(S.c)(t[b+1],t[b+n+1],m)}else a=t[e+_*n],s=t[e+_*n+1]}return r?(r[0]=a,r[1]=s,r):[a,s]}function x(t,e,i,n,o,r){if(i==e)return null;var a;if(o<t[e+n-1])return r?((a=t.slice(e,e+n))[n-1]=o,a):null;if(t[i-1]<o)return r?((a=t.slice(i-n,i))[n-1]=o,a):null;if(o==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,c=i/n;s<c;){var u=s+c>>1;o<t[(u+1)*n-1]?c=u:s=u+1}var l=t[s*n-1];if(o==l)return t.slice((s-1)*n,(s-1)*n+n);var h=(o-l)/(t[(s+1)*n-1]-l);a=[];for(var f=0;f<n-1;++f)a.push(Object(S.c)(t[(s-1)*n+f],t[s*n+f],h));return a.push(o),a}var j=i(61),w=i(96),I=i(95),R=i(46),P=function(t){function e(e,i){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(v.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(f.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(O.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(O.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return Object(I.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=m.a.XYM&&this.layout!=m.a.XYZM)return null;var i=void 0!==e&&e;return x(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Object(C.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return T(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(w.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(R.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,m.a.XY)},e.prototype.getType=function(){return d.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(j.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(E.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(b.a),L=function(t){function e(e,i,n){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&n)this.setFlatCoordinates(i,e),this.ends_=n;else{for(var o=this.getLayout(),r=e,a=[],s=[],c=0,u=r.length;c<u;++c){var l=r[c];0===c&&(o=l.getLayout()),Object(v.c)(a,l.getFlatCoordinates()),s.push(a.length)}this.setFlatCoordinates(o,a),this.ends_=s}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?Object(v.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(f.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(O.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(O.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=m.a.XYM&&this.layout!=m.a.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,o=void 0!==i&&i;return function(t,e,i,n,o,r,a){if(a)return x(t,e,i[i.length-1],n,o,r);var s;if(o<t[n-1])return r?((s=t.slice(0,n))[n-1]=o,s):null;if(t[t.length-1]<o)return r?((s=t.slice(t.length-n))[n-1]=o,s):null;for(var c=0,u=i.length;c<u;++c){var l=i[c];if(e!=l){if(o<t[e+n-1])return null;if(o<=t[l-1])return x(t,e,l,n,o,!1);e=l}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,o)},e.prototype.getCoordinates=function(){return Object(C.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new P(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],o=0,r=0,a=e.length;r<a;++r){var s=e[r],c=new P(t.slice(o,s),i);n.push(c),o=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,o=this.stride,r=0,a=n.length;r<a;++r){var s=n[r],c=T(e,i,s,o,.5);Object(v.c)(t,c),i=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(R.b)(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,m.a.XY,n)},e.prototype.getType=function(){return d.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(j.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(E.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(b.a),k=i(52),M=function(t){function e(e,i){t.call(this),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?Object(v.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<Object(f.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;for(var o=this.flatCoordinates,r=this.stride,a=0,s=o.length;a<s;a+=r){var c=Object(S.f)(t,e,o[a],o[a+1]);if(c<n){n=c;for(var u=0;u<r;++u)i[u]=o[a+u];i.length=r}}return n},e.prototype.getCoordinates=function(){return Object(C.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new k.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],o=0,r=t.length;o<r;o+=i){var a=new k.default(t.slice(o,o+i),e);n.push(a)}return n},e.prototype.getType=function(){return d.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,o=e.length;n<o;n+=i){var r=e[n],a=e[n+1];if(Object(f.containsXY)(t,r,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(E.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(b.a),F=i(47),A=i(75),N=i(48),D=i(97),G=i(63),Y=function(t){function e(e,i,n){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=this.getLayout(),r=e,a=[],s=[],c=0,u=r.length;c<u;++c){var l=r[c];0===c&&(o=l.getLayout());for(var h=a.length,f=l.getEnds(),p=0,d=f.length;p<d;++p)f[p]+=h;Object(v.c)(a,l.getFlatCoordinates()),s.push(f)}i=o,e=a,n=s}void 0!==i&&n?(this.setFlatCoordinates(i,e),this.endss_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Object(v.c)(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,o=(e=t.getEnds().slice()).length;n<o;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(f.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(O.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(O.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Object(N.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(A.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(G.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(C.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,n){for(var o=[],r=Object(f.createEmpty)(),a=0,s=i.length;a<s;++a){var c=i[a];r=Object(f.createOrUpdateFromFlatCoordinates)(t,e,c[0],n),o.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=c[c.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(D.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new M(this.getFlatInteriorPoints().slice(),m.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(G.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(G.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(R.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,m.a.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),o=n[n.length-1];if(0!==e)for(var r=0,a=n.length;r<a;++r)n[r]-=e;return new F.b(this.flatCoordinates.slice(e,o),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],o=0,r=0,a=i.length;r<a;++r){var s=i[r].slice(),c=s[s.length-1];if(0!==o)for(var u=0,l=s.length;u<l;++u)s[u]-=o;var h=new F.b(e.slice(o,c),t,s);n.push(h),o=c}return n},e.prototype.getType=function(){return d.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(j.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(E.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(b.a),X=i(10),B=function(t){function e(e){var i=e||{};t.call(this),this.dataProjection=Object(X.get)(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(this.defaultFeatureProjection=Object(X.get)(i.featureProjection)),this.geometryName_=i.geometryName,this.extractGeometryName_=i.extractGeometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var i,n=H((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),r=new o.default;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(n),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties),r},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var n=t.features,o=0,r=n.length;o<r;++o)i.push(this.readFeatureFromObject(n[o],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return H(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=Object(X.get)(i.properties.name):Object(n.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(i.id=n);var o=t.getGeometry();o&&(i.geometry=U(o,e));var r=t.getProperties();return delete r[t.getGeometryName()],Object(g.d)(r)||(i.properties=r),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,o=t.length;n<o;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return U(t,this.adaptOptions(e))},e}(u);function H(t,e){if(!t)return null;var i;switch(t.type){case d.a.POINT:i=function(t){return new k.default(t.coordinates)}(t);break;case d.a.LINE_STRING:i=function(t){return new P(t.coordinates)}(t);break;case d.a.POLYGON:i=function(t){return new F.b(t.coordinates)}(t);break;case d.a.MULTI_POINT:i=function(t){return new M(t.coordinates)}(t);break;case d.a.MULTI_LINE_STRING:i=function(t){return new L(t.coordinates)}(t);break;case d.a.MULTI_POLYGON:i=function(t){return new Y(t.coordinates)}(t);break;case d.a.GEOMETRY_COLLECTION:i=function(t,e){var i=t.geometries.map(function(t){return H(t,void 0)});return new _(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Object(r.transformWithOptions)(i,!1,e)}function U(t,e){var i,n=(t=Object(r.transformWithOptions)(t,!0,e)).getType();switch(n){case d.a.POINT:i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case d.a.LINE_STRING:i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case d.a.POLYGON:i=function(t,e){var i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case d.a.MULTI_POINT:i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case d.a.MULTI_LINE_STRING:i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case d.a.MULTI_POLYGON:i=function(t,e){var i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case d.a.GEOMETRY_COLLECTION:i=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=Object(g.a)({},e);return delete i.featureProjection,U(t,i)})}}(t,e);break;case d.a.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}e.default=B},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=h(i(40)),u=h(i(103)),l=h(i(111));function h(t){return t&&t.__esModule?t:{default:t}}var f=c.default.proj4,p=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this,t))).url="".concat(t.url,"&input="),i.projection=t.projection||"EPSG:3857",i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l.default),i=e,(n=[{key:"search",value:function(t){var e=this;return new Promise(function(i,n){5!==(t=t.trim()).length||isNaN(t)?t.length&&(t=t.replace(/"/g,"").replace(/'/g,"").replace(/&/g," and "),fetch("".concat(e.url).concat(t)).then(function(t){return t.json()}).then(function(t){e.geoclient(t,i)}).catch(function(t){e.error(t,n)})):e.resolveZip(t,i)})}},{key:"resolveZip",value:function(t,i){var n,o=this.project(e.ZIP_CODE_POINTS[t]);o?(i(n={coordinate:o,accuracy:u.default.Accuracy.ZIP_CODE,type:"geocoded",zip:!0,name:t}),this.trigger("geocoded",n)):(i(n={input:t,type:"ambiguous",possible:[]}),this.trigger("ambiguous",n))}},{key:"project",value:function(t){return t&&"EPSG:2263"!==this.projection?f("EPSG:2263",this.projection,t):t}},{key:"geoclient",value:function(t,e){var i=t.results,n={type:"ambiguous",input:t.input,possible:[]};if("OK"===t.status)if(1===i.length){var o=i[0],r=this.parse(o);r?(r.type="geocoded",e(r),this.trigger("geocoded",r)):(e(n),this.trigger("ambiguous",n))}else{var a={type:"ambiguous",input:t.input,possible:this.possible(i)};e(a),this.trigger("ambiguous",a)}else e(n),this.trigger("ambiguous",n)}},{key:"possible",value:function(t){var e=this,i=[];return t.forEach(function(t){var n=e.parse(t);n&&i.push(n)}),i}},{key:"parse",value:function(t){var e,i,n,o=t.request.split(" ")[0],r=t.response;if("intersection"===o)e="".concat(r.streetName1," and ").concat(r.streetName2),i=[1*r.xCoordinate,1*r.yCoordinate],n=u.default.Accuracy.MEDIUM;else if("blockface"===o)e=r.firstStreetNameNormalized+" btwn "+r.secondStreetNameNormalized+" & "+r.thirdStreetNameNormalized,i=[(1*r.fromXCoordinate+1*r.toXCoordinate)/2,(1*r.fromYCoordinate+1*r.toYCoordinate)/2],n=u.default.Accuracy.LOW;else{var a=r.internalLabelXCoordinate,s=r.internalLabelYCoordinate;e=(r.houseNumber?r.houseNumber+" ":"")+(r.firstStreetNameNormalized||r.giStreetName1),i=[1*(a&&s?a:r.xCoordinate),1*(a&&s?s:r.yCoordinate)],n=a&&s?u.default.Accuracy.HIGH:u.default.Accuracy.MEDIUM}try{return{type:"geocoded",coordinate:this.project(i),data:r,accuracy:n,name:c.default.capitalize("".concat(e.replace(/  +/g," "),", ").concat(r.firstBoroughName))+", NY ".concat(r.zipCode||r.leftSegmentZipCode||"")}}catch(e){console.warn("No coordinate",t)}}},{key:"error",value:function(t,e){console.error("Geoclient error",t),e({type:"error",error:t}),this.trigger("error",t)}}])&&o(i.prototype,n),e}();p.Options,p.ZIP_CODE_POINTS={10474:[1018466,233787],10455:[1007889,236616],10037:[1001661,235627],10024:[991450,225457],10454:[1007449,232863],10026:[997179,231835],10025:[993331,230012],10035:[1006595,228454],11101:[1001319,211034],11364:[1051553,211923],10018:[984278,215509],10020:[990012,215729],11005:[1064789,214295],10017:[991869,213252],10001:[983613,213360],10011:[982781,210664],10016:[990291,210665],11104:[1006224,210564],11109:[996054,210740],10010:[988989,208515],11367:[1032392,205392],10014:[982449,206620],10003:[987465,205563],11222:[998773,204620],11379:[1017432,200740],11429:[1056859,198057],11435:[1036960,195018],11415:[1031798,197376],11418:[1031001,193330],11433:[1043368,193721],11451:[1039899,194697],11221:[1004438,191873],11421:[1023878,191241],11372:[1016528,213126],11004:[1065606,210363],11040:[1065956,213534],10002:[988242,200171],10314:[939259,155728],11228:[980891,164066],11209:[976172,165379],10304:[962458,165679],10456:[1007883,242372],10472:[1021444,241624],10031:[998088,239814],10039:[1001519,240436],10459:[1013835,240084],10451:[1005368,238290],10473:[1022475,237217],10030:[1000193,237302],10027:[999088,234131],10461:[1028296,247902],10457:[1012388,247405],10460:[1015132,243510],10032:[1000382,244917],10452:[1005446,244483],11414:[1027256,178677],11232:[983612,177801],10034:[1005713,255122],10033:[1001707,248780],10462:[1020685,249420],10040:[1003863,251914],10453:[1008152,249805],11102:[1004636,220364],10021:[997020,219120],11361:[1047797,217779],11358:[1040709,216377],11362:[1057749,215220],10044:[996385,214347],11369:[1019957,217722],11103:[1008295,217197],11106:[1001397,217519],11368:[1024870,212082],11377:[1010574,210678],10036:[985413,216821],11355:[1033762,213010],10302:[945946,169124],10465:[1031495,239091],11691:[1053783,158810],11096:[1054217,162199],11223:[991665,156781],11208:[1019700,184749],11207:[1013544,183721],11413:[1053380,183328],11217:[989547,187967],11238:[994291,186584],11231:[983057,186217],11422:[1057272,180607],11420:[1036899,184708],11417:[1027410,185709],11215:[989882,181773],11357:[1036533,225804],10029:[999950,227538],"00083":[991590,220538],11356:[1028115,225277],11359:[1046026,228012],10303:[933820,171004],11234:[1004323,163783],11360:[1044984,223892],11105:[1011836,221755],10128:[997765,224257],11371:[1022003,220457],10023:[988765,222068],11363:[1055047,220385],10028:[995910,222872],11354:[1032198,219054],11216:[998312,187241],11416:[1025796,188584],11233:[1006523,186300],11436:[1040697,185554],11213:[1000284,183308],11212:[1008387,180764],11225:[997345,180829],11218:[990799,173649],11226:[995711,174598],11219:[985166,169604],11210:[999101,167896],11230:[993494,166072],11419:[1033365,190202],11434:[1046577,185969],11204:[987887,164576],10471:[1012587,266570],10470:[1024748,268409],10466:[1024313,263999],10467:[1019786,258782],11430:[1043607,175068],11203:[1002509,175950],10469:[1026678,255623],10468:[1013897,258046],10458:[1015534,253712],11378:[1009641,202115],10009:[990043,203961],10012:[984832,203596],10013:[982892,201665],10007:[982504,199552],11237:[1004600,197083],11385:[1011367,195195],10038:[983418,197803],11206:[1000221,195003],10006:[980563,197293],11412:[1050773,193231],10005:[981339,197038],11251:[993428,194599],11411:[1057763,192413],11201:[986968,192156],10004:[972576,193652],11205:[995897,192159],10305:[963310,156060],11229:[999717,158278],11214:[984e3,159330],10306:[950937,145144],11694:[1025530,149310],11224:[984306,149092],10308:[942704,140020],10282:[979981,200244],11211:[999857,199848],11249:[993704,198278],11370:[1016758,227518],10065:[994666,217698],10075:[995301,221633],10069:[987047,221849],10281:[980036,198787],11373:[1017948,208465],10279:[981949,198823],10165:[990124,213288],10168:[990733,212960],10105:[990067,217259],10118:[988212,211939],10176:[990123,214490],10162:[997739,219667],10170:[990955,213470],10112:[989735,215947],10122:[986550,213178],10107:[989098,218425],10103:[990705,216275],10174:[991094,213106],10166:[990733,213798],10169:[990872,214089],10167:[991259,214199],10177:[990927,214381],10172:[991398,214417],10171:[991426,214709],10270:[982060,196710],10104:[990123,216312],10271:[981339,197293],10110:[989486,213943],10175:[989847,214016],10151:[991702,217332],10173:[990040,213907],10178:[990429,212814],10119:[986217,213068],10121:[986439,212486],10123:[986827,213032],10106:[989624,218024],10158:[991177,212122],10041:[981727,195435],10120:[987242,212449],10278:[983113,199880],10155:[993143,216531],10043:[982337,195836],10081:[981838,197074],10096:[989071,214235],10097:[988461,216931],10196:[989458,214963],10275:[980368,196382],10265:[982060,196164],10045:[981866,197329],10047:[988047,208660],10080:[980785,198167],10203:[981062,196965],10259:[981478,197439],10260:[981921,196564],10285:[980147,199224],10286:[981727,196637],10463:[1007644,260043],10475:[1030489,258509],10464:[1036131,258338],10309:[923594,132955],10307:[916899,124411],10280:[979509,197257],10048:[980812,198532],10055:[991564,215802],10019:[989652,217477],10111:[990483,215838],10153:[991896,217478],10154:[991896,215328],10152:[991979,215584],10115:[994299,234675],10022:[993087,215620],11235:[1000973,149936],11693:[1036606,153266],11692:[1041045,155461],11697:[1009230,143240],10312:[935583,136827],11239:[1021573,175899],11236:[1011642,172461],11220:[979421,172519],10301:[961077,172967],10310:[950582,169591],11426:[1060737,207724],11365:[1041364,208618],11001:[1065508,206646],11375:[1026883,201848],11427:[1053373,205042],11374:[1022389,203771],11366:[1039491,203659],11423:[1048812,200621],11428:[1055655,202207],11432:[1041634,200093]};var d=p;e.default=d},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return a});var n=i(6),o=(i(3),6371008.8);function r(t,e,i){var r=i||o,a=Object(n.i)(t[1]),s=Object(n.i)(e[1]),c=(s-a)/2,u=Object(n.i)(e[0]-t[0])/2,l=Math.sin(c)*Math.sin(c)+Math.sin(u)*Math.sin(u)*Math.cos(a)*Math.cos(s);return 2*r*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function a(t,e,i,r){var a=r||o,s=Object(n.i)(t[1]),c=Object(n.i)(t[0]),u=e/a,l=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(i)),h=c+Math.atan2(Math.sin(i)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(l));return[Object(n.h)(h),Object(n.h)(l)]}},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(37),o=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function r(t,e,i){return e+":"+t+":"+(i?Object(n.b)(i):"null")}o.prototype.clear=function(){this.cache_={},this.cacheSize_=0},o.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},o.prototype.get=function(t,e,i){var n=r(t,e,i);return n in this.cache_?this.cache_[n]:null},o.prototype.set=function(t,e,i,n){var o=r(t,e,i);this.cache_[o]=n,++this.cacheSize_},o.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var a=new o},function(t,e,i){"use strict";var n=i(13),o=i(16),r=i(0),a=i(34),s=i(12),c=i(2),u=function(){};u.prototype.getReplay=function(t,e){return Object(c.b)()},u.prototype.isEmpty=function(){return Object(c.b)()},u.prototype.addDeclutter=function(t){return Object(c.b)()};var l=u,h=i(14),f=i(39),p=i(25),d=i(3),g=i(32),y=i(96),_=i(6);function v(t,e,i,n,o,r,a,s){for(var c,u,l,h=[],f=t[e]>t[i-n],p=o.length,d=t[e],g=t[e+1],y=t[e+=n],v=t[e+1],m=0,b=Math.sqrt(Math.pow(y-d,2)+Math.pow(v-g,2)),O="",E=0,C=0;C<p;++C){u=f?p-C-1:C;var S=o.charAt(u),T=r(O=f?S+O:O+S)-E;E+=T;for(var x=a+T/2;e<i-n&&m+b<x;)d=y,g=v,y=t[e+=n],v=t[e+1],m+=b,b=Math.sqrt(Math.pow(y-d,2)+Math.pow(v-g,2));var j=x-m,w=Math.atan2(v-g,y-d);if(f&&(w+=w>0?-Math.PI:Math.PI),void 0!==l){var I=w-l;if(I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>s)return null}var R=j/b,P=Object(_.c)(d,y,R),L=Object(_.c)(g,v,R);l==w?(f&&(c[0]=P,c[1]=L,c[2]=T/2),c[4]=O):(E=T,c=[P,L,T/2,w,O=S],f?h.unshift(c):h.push(c),l=w),a+=T}return h}var m=i(19),b=i(99),O=i(4),E={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},C=[E.FILL],S=[E.STROKE],T=[E.BEGIN_PATH],x=[E.CLOSE_PATH],j=E,w=i(43),I=i(9),R=Object(r.createEmpty)(),P=Object(I.c)(),L=function(t){function e(e,i,n,o,r,a){t.call(this),this.declutterTree=a,this.tolerance=e,this.maxExtent=i,this.overlaps=r,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=n,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Object(I.c)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,i,n,o,r,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},e.prototype.replayImage_=function(t,e,i,n,o,a,s,c,u,l,h,f,p,d,g,y,_,v){var m=_||v;e-=o*=p,i-=a*=p;var b,E,C,S,T=g+l>n.width?n.width-l:g,x=c+h>n.height?n.height-h:c,j=y[3]+T*p+y[1],w=y[0]+x*p+y[2],L=e-y[3],k=i-y[0];(m||0!==f)&&(b=[L,k],E=[L+j,k],C=[L+j,k+w],S=[L,k+w]);var M=null;if(0!==f){var F=e+o,A=i+a;M=Object(I.b)(P,F,A,1,1,f,-F,-A),Object(r.createOrUpdateEmpty)(R),Object(r.extendCoordinate)(R,Object(I.a)(P,b)),Object(r.extendCoordinate)(R,Object(I.a)(P,E)),Object(r.extendCoordinate)(R,Object(I.a)(P,C)),Object(r.extendCoordinate)(R,Object(I.a)(P,S))}else Object(r.createOrUpdate)(L,k,L+j,k+w,R);var N=t.canvas,D=v?v[2]*p/2:0,G=R[0]-D<=N.width&&R[2]+D>=0&&R[1]-D<=N.height&&R[3]+D>=0;if(d&&(e=Math.round(e),i=Math.round(i)),s){if(!G&&1==s[4])return;Object(r.extend)(s,R);var Y=G?[t,M?M.slice(0):null,u,n,l,h,T,x,e,i,p]:null;Y&&m&&Y.push(_,v,b,E,C,S),s.push(Y)}else G&&(m&&this.replayTextBackground_(t,b,E,C,S,_,v),Object(O.n)(t,M,u,n,l,h,T,x,e,i,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,n,o,a){var s=this.coordinates.length,c=this.getBufferedMaxExtent();a&&(e+=n);var u,l,h,f=[t[e],t[e+1]],d=[NaN,NaN],g=!0;for(u=e+n;u<i;u+=n)d[0]=t[u],d[1]=t[u+1],(h=Object(r.coordinateRelationship)(c,d))!==l?(g&&(this.coordinates[s++]=f[0],this.coordinates[s++]=f[1]),this.coordinates[s++]=d[0],this.coordinates[s++]=d[1],g=!1):h===p.a.INTERSECTING?(this.coordinates[s++]=d[0],this.coordinates[s++]=d[1],g=!1):g=!0,f[0]=d[0],f[1]=d[1],l=h;return(o&&g||u===e+n)&&(this.coordinates[s++]=f[0],this.coordinates[s++]=f[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,i,n,o){for(var r=0,a=i.length;r<a;++r){var s=i[r],c=this.appendFlatCoordinates(t,e,s,n,!1,!1);o.push(c),e=s}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,o,r,a,s,c=t.getType(),u=t.getStride(),l=this.coordinates.length;if(c==d.a.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var f=0,p=h.length;f<p;++f){var y=[];s=this.drawCustomCoordinates_(n,s,h[f],u,y),a.push(y)}this.instructions.push([j.CUSTOM,l,a,t,i,g.c])}else c==d.a.POLYGON||c==d.a.MULTI_LINE_STRING?(r=[],n=c==d.a.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),u,r),this.instructions.push([j.CUSTOM,l,r,t,i,g.b])):c==d.a.LINE_STRING||c==d.a.MULTI_POINT?(n=t.getFlatCoordinates(),o=this.appendFlatCoordinates(n,0,n.length,u,!1,!1),this.instructions.push([j.CUSTOM,l,o,t,i,g.a])):c==d.a.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),o=this.coordinates.length,this.instructions.push([j.CUSTOM,l,o,t,i]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[j.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[j.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=Object(I.a)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,O.r)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],m.a&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(var o=5,a=t.length;o<a;++o){var s=t[o];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),O.n.apply(void 0,s))}}t.length=5,Object(r.createOrUpdateEmpty)(t)}}},e.prototype.replay_=function(t,e,i,o,u,l,h){var f;this.pixelCoordinates_&&Object(n.b)(e,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=Object(a.c)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Object(I.g)(this.renderedTransform_,e));for(var p,d,g,_,m,b,E,C,S,T,x,R,P=!Object(s.d)(i),L=0,k=o.length,M=0,F=0,A=0,N=null,D=null,G=this.coordinateCache_,Y=this.viewRotation_,X={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Y},B=this.instructions!=o||this.overlaps?0:200;L<k;){var H=o[L];switch(H[0]){case j.BEGIN_GEOMETRY:T=H[1],P&&i[Object(c.c)(T)]||!T.getGeometry()?L=H[2]:void 0===h||Object(r.intersects)(h,T.getGeometry().getExtent())?++L:L=H[2]+1;break;case j.BEGIN_PATH:F>B&&(this.fill_(t),F=0),A>B&&(t.stroke(),A=0),F||A||(t.beginPath(),_=m=NaN),++L;break;case j.CIRCLE:var U=f[M=H[1]],z=f[M+1],W=f[M+2]-U,K=f[M+3]-z,V=Math.sqrt(W*W+K*K);t.moveTo(U+V,z),t.arc(U,z,V,0,2*Math.PI,!0),++L;break;case j.CLOSE_PATH:t.closePath(),++L;break;case j.CUSTOM:M=H[1],p=H[2];var Z=H[3],q=H[4],J=6==H.length?H[5]:void 0;X.geometry=Z,X.feature=T,L in G||(G[L]=[]);var Q=G[L];J?J(f,M,p,2,Q):(Q[0]=f[M],Q[1]=f[M+1],Q.length=2),q(Q,X),++L;break;case j.DRAW_IMAGE:M=H[1],p=H[2],S=H[3],d=H[4],g=H[5],C=l?null:H[6];var $=H[7],tt=H[8],et=H[9],it=H[10],nt=H[11],ot=H[12],rt=H[13],at=H[14],st=void 0,ct=void 0,ut=void 0;for(H.length>16?(st=H[15],ct=H[16],ut=H[17]):(st=O.j,ct=ut=!1),nt&&(ot+=Y);M<p;M+=2)this.replayImage_(t,f[M],f[M+1],S,d,g,C,$,tt,et,it,ot,rt,u,at,st,ct?N:null,ut?D:null);this.renderDeclutter_(C,T),++L;break;case j.DRAW_CHARS:var lt=H[1],ht=H[2],ft=H[3];C=l?null:H[4];var pt=H[5],dt=H[6],gt=H[7],yt=H[8],_t=H[9],vt=H[10],mt=H[11],bt=H[12],Ot=H[13],Et=H[14],Ct=Object(y.a)(f,lt,ht,2),St=yt(bt);if(pt||St<=Ct){var Tt=this.textStates[Ot].textAlign,xt=v(f,lt,ht,2,bt,yt,(Ct-St)*w.b[Tt],gt);if(xt){var jt=void 0,wt=void 0,It=void 0,Rt=void 0,Pt=void 0;if(vt)for(jt=0,wt=xt.length;jt<wt;++jt)It=(Pt=xt[jt])[4],Rt=this.getImage(It,Ot,"",vt),d=Pt[2]+mt,g=ft*Rt.height+2*(.5-ft)*mt-_t,this.replayImage_(t,Pt[0],Pt[1],Rt,d,g,C,Rt.height,1,0,0,Pt[3],Et,!1,Rt.width,O.j,null,null);if(dt)for(jt=0,wt=xt.length;jt<wt;++jt)It=(Pt=xt[jt])[4],Rt=this.getImage(It,Ot,dt,""),d=Pt[2],g=ft*Rt.height-_t,this.replayImage_(t,Pt[0],Pt[1],Rt,d,g,C,Rt.height,1,0,0,Pt[3],Et,!1,Rt.width,O.j,null,null)}}this.renderDeclutter_(C,T),++L;break;case j.END_GEOMETRY:if(void 0!==l){var Lt=l(T=H[1]);if(Lt)return Lt}++L;break;case j.FILL:B?F++:this.fill_(t),++L;break;case j.MOVE_TO_LINE_TO:for(M=H[1],p=H[2],x=f[M],E=(R=f[M+1])+.5|0,(b=x+.5|0)===_&&E===m||(t.moveTo(x,R),_=b,m=E),M+=2;M<p;M+=2)b=(x=f[M])+.5|0,E=(R=f[M+1])+.5|0,M!=p-2&&b===_&&E===m||(t.lineTo(x,R),_=b,m=E);++L;break;case j.SET_FILL_STYLE:N=H,this.alignFill_=H[2],F&&(this.fill_(t),F=0,A&&(t.stroke(),A=0)),t.fillStyle=H[1],++L;break;case j.SET_STROKE_STYLE:D=H,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,H),++L;break;case j.STROKE:B?A++:t.stroke(),++L;break;default:++L}}F&&this.fill_(t),A&&t.stroke()},e.prototype.replay=function(t,e,i,n,o){this.viewRotation_=i,this.replay_(t,e,n,this.instructions,o,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,i,n,o,r){return this.viewRotation_=i,this.replay_(t,e,n,this.hitDetectionInstructions,!0,o,r)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,o,r=e.length,a=-1;for(t=0;t<r;++t)(o=(i=e[t])[0])==j.END_GEOMETRY?a=t:o==j.BEGIN_GEOMETRY&&(i[2]=t,Object(n.i)(this.hitDetectionInstructions,a,t),a=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=Object(f.a)(n||O.b)}else i.fillStyle=void 0;if(e){var o=e.getColor();i.strokeStyle=Object(f.a)(o||O.k);var r=e.getLineCap();i.lineCap=void 0!==r?r:O.d;var a=e.getLineDash();i.lineDash=a?a.slice():O.e;var s=e.getLineDashOffset();i.lineDashOffset=s||O.f;var c=e.getLineJoin();i.lineJoin=void 0!==c?c:O.g;var u=e.getWidth();i.lineWidth=void 0!==u?u:O.h;var l=e.getMiterLimit();i.miterLimit=void 0!==l?l:O.i,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t,e){var i=t.fillStyle,n=[j.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[j.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,i){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,o=t.lineCap,r=t.lineDash,a=t.lineDashOffset,s=t.lineJoin,c=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||r!=t.currentLineDash&&!Object(n.b)(t.currentLineDash,r)||t.currentLineDashOffset!=a||t.currentLineJoin!=s||t.currentLineWidth!=c||t.currentMiterLimit!=u)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=r,t.currentLineDashOffset=a,t.currentLineJoin=s,t.currentLineWidth=c,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[j.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(r.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(r.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(b.a),k=function(t){function e(e,i,n,o,r,a){t.call(this,e,i,n,o,r,a),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([j.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([j.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([j.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([j.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),o=t.getHitDetectionImage(1),r=t.getImage(1),a=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=o,this.image_=r,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(L),M=function(t){function e(e,i,n,o,r,a){t.call(this,e,i,n,o,r,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,i,n){var o=this.coordinates.length,r=this.appendFlatCoordinates(t,e,i,n,!1,!1),a=[j.MOVE_TO_LINE_TO,o,r];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],T);var r=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(r,0,r.length,a),this.hitDetectionInstructions.push(S),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],T);for(var r=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),c=0,u=0,l=r.length;u<l;++u)c=this.drawFlatCoordinates_(a,c,r[u],s);this.hitDetectionInstructions.push(S),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(S),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(S),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(T)},e}(L),F=i(37),A=i(46),N=function(t){function e(e,i,n,o,r,a){t.call(this,e,i,n,o,r,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var o=this.state,r=void 0!==o.fillStyle,a=null!=o.strokeStyle,s=i.length;this.instructions.push(T),this.hitDetectionInstructions.push(T);for(var c=0;c<s;++c){var u=i[c],l=this.coordinates.length,h=this.appendFlatCoordinates(t,e,u,n,!0,!a),f=[j.MOVE_TO_LINE_TO,l,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(x),this.hitDetectionInstructions.push(x)),e=u}return r&&(this.instructions.push(C),this.hitDetectionInstructions.push(C)),a&&(this.instructions.push(S),this.hitDetectionInstructions.push(S)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([j.SET_FILL_STYLE,Object(F.b)(O.b)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatCoordinates(r,0,r.length,a,!1,!1);var c=[j.CIRCLE,s];this.instructions.push(T,c),this.hitDetectionInstructions.push(T,c),this.hitDetectionInstructions.push(C),void 0!==i.fillStyle&&this.instructions.push(C),void 0!==i.strokeStyle&&(this.instructions.push(S),this.hitDetectionInstructions.push(S)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([j.SET_FILL_STYLE,Object(F.b)(O.b)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,r,s),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([j.SET_FILL_STYLE,Object(F.b)(O.b)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var r=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),c=0,u=0,l=r.length;u<l;++u)c=this.drawFlatCoordinatess_(a,c,r[u],s);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,n=e.length;i<n;++i)e[i]=Object(A.e)(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(L);function D(t,e,i,n,o){var r,a,s,c,u,l,h,f,p,d=i,g=i,y=0,_=0,v=i;for(r=i;r<n;r+=o){var m=e[r],b=e[r+1];void 0!==c&&(f=m-c,p=b-u,s=Math.sqrt(f*f+p*p),void 0!==l&&(_+=a,Math.acos((l*f+h*p)/(a*s))>t&&(_>y&&(y=_,d=v,g=r),_=0,v=r-o)),a=s,l=f,h=p),c=m,u=b}return(_+=s)>y?[v,r]:[d,g]}var G=i(92),Y=function(t){function e(e,i,n,o,r,a){t.call(this,e,i,n,o,r,a),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},O.o.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(i||n)){var a,s,c=this.coordinates.length,u=t.getType(),l=null,h=2,f=2;if(o.placement===G.a.LINE){if(!Object(r.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(l=t.getFlatCoordinates(),f=t.getStride(),u==d.a.LINE_STRING)p=[l.length];else if(u==d.a.MULTI_LINE_STRING)p=t.getEnds();else if(u==d.a.POLYGON)p=t.getEnds().slice(0,1);else if(u==d.a.MULTI_POLYGON){var g=t.getEndss();for(p=[],a=0,s=g.length;a<s;++a)p.push(g[a][0])}this.beginGeometry(t,e);for(var y,_=o.textAlign,v=0,m=0,b=p.length;m<b;++m){if(null==_){var O=D(o.maxAngle,l,v,p[m],f);v=O[0],y=O[1]}else y=p[m];for(a=v;a<y;a+=f)this.coordinates.push(l[a],l[a+1]);h=this.coordinates.length,v=p[m],this.drawChars_(c,h,this.declutterGroup_),c=h}this.endGeometry(t,e)}else{var E=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),C=E.width/this.pixelRatio;switch(u){case d.a.POINT:case d.a.MULTI_POINT:h=(l=t.getFlatCoordinates()).length;break;case d.a.LINE_STRING:l=t.getFlatMidpoint();break;case d.a.CIRCLE:l=t.getCenter();break;case d.a.MULTI_LINE_STRING:h=(l=t.getFlatMidpoints()).length;break;case d.a.POLYGON:if(l=t.getFlatInteriorPoint(),!o.overflow&&l[2]/this.resolution<C)return;f=3;break;case d.a.MULTI_POLYGON:var S=t.getFlatInteriorPoints();for(l=[],a=0,s=S.length;a<s;a+=3)(o.overflow||S[a+2]/this.resolution>=C)&&l.push(S[a],S[a+1]);if(0==(h=l.length))return}h=this.appendFlatCoordinates(l,0,h,f,!1,!1),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(E,c,h),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,i,n){var r,a=n+e+t+i+this.pixelRatio;if(!O.o.containsKey(a)){var s=n?this.strokeStates[n]||this.textStrokeState_:null,c=i?this.fillStates[i]||this.textFillState_:null,u=this.textStates[e]||this.textState_,l=this.pixelRatio,h=u.scale*l,f=w.b[u.textAlign||O.l],p=n&&s.lineWidth?s.lineWidth:0,d=t.split("\n"),g=d.length,y=[],_=function(t,e,i){for(var n=e.length,o=0,r=0;r<n;++r){var a=Object(O.q)(t,e[r]);o=Math.max(o,a),i.push(a)}return o}(u.font,d,y),v=Object(O.p)(u.font),b=v*g,E=_+p,C=Object(o.a)(Math.ceil(E*h),Math.ceil((b+p)*h));r=C.canvas,O.o.set(a,r),1!=h&&C.scale(h,h),C.font=u.font,n&&(C.strokeStyle=s.strokeStyle,C.lineWidth=p,C.lineCap=s.lineCap,C.lineJoin=s.lineJoin,C.miterLimit=s.miterLimit,m.a&&s.lineDash.length&&(C.setLineDash(s.lineDash),C.lineDashOffset=s.lineDashOffset)),i&&(C.fillStyle=c.fillStyle),C.textBaseline="middle",C.textAlign="center";var S,T=.5-f,x=f*r.width/h+T*p;if(n)for(S=0;S<g;++S)C.strokeText(d[S],x+T*y[S],.5*(p+v)+S*v);if(i)for(S=0;S<g;++S)C.fillText(d[S],x+T*y[S],.5*(p+v)+S*v)}return O.o.get(a)},e.prototype.drawTextImage_=function(t,e,i){var n=this.textState_,o=this.textStrokeState_,r=this.pixelRatio,a=w.b[n.textAlign||O.l],s=w.b[n.textBaseline],c=o&&o.lineWidth?o.lineWidth:0,u=a*t.width/r+2*(.5-a)*c,l=s*t.height/r+2*(.5-s)*c;this.instructions.push([j.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*r,(l-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,n.padding==O.j?O.j:n.padding.map(function(t){return t*r}),!!n.backgroundFill,!!n.backgroundStroke]),this.hitDetectionInstructions.push([j.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*r,(l-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/r,t.width,n.padding,!!n.backgroundFill,!!n.backgroundStroke])},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,o=this.textState_,r=this.textFillState_,a=this.strokeKey_;n&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:n.strokeStyle,lineCap:n.lineCap,lineDashOffset:n.lineDashOffset,lineWidth:n.lineWidth,lineJoin:n.lineJoin,miterLimit:n.miterLimit,lineDash:n.lineDash}));var s=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:o.font,textAlign:o.textAlign||O.l,scale:o.scale});var c=this.fillKey_;r&&(c in this.fillStates||(this.fillStates[c]={fillStyle:r.fillStyle}));var u=this.pixelRatio,l=w.b[o.textBaseline],h=this.textOffsetY_*u,f=this.text_,p=o.font,d=o.scale,g=n?n.lineWidth*d/2:0,y=this.widths_[p];y||(this.widths_[p]=y={}),this.instructions.push([j.DRAW_CHARS,t,e,l,i,o.overflow,c,o.maxAngle,function(t){var e=y[t];return e||(e=y[t]=Object(O.q)(p,t)),e*d*u},h,a,g*u,f,s,1]),this.hitDetectionInstructions.push([j.DRAW_CHARS,t,e,l,i,o.overflow,c,o.maxAngle,function(t){var e=y[t];return e||(e=y[t]=Object(O.q)(p,t)),e*d},h,a,g,f,s,1/u])},e.prototype.setTextStyle=function(t,e){var i,n,o;if(t){this.declutterGroup_=e;var r=t.getFill();r?((n=this.textFillState_)||(n=this.textFillState_={}),n.fillStyle=Object(f.a)(r.getColor()||O.b)):n=this.textFillState_=null;var a=t.getStroke();if(a){(o=this.textStrokeState_)||(o=this.textStrokeState_={});var s=a.getLineDash(),u=a.getLineDashOffset(),l=a.getWidth(),h=a.getMiterLimit();o.lineCap=a.getLineCap()||O.d,o.lineDash=s?s.slice():O.e,o.lineDashOffset=void 0===u?O.f:u,o.lineJoin=a.getLineJoin()||O.g,o.lineWidth=void 0===l?O.h:l,o.miterLimit=void 0===h?O.i:h,o.strokeStyle=Object(f.a)(a.getColor()||O.k)}else o=this.textStrokeState_=null;i=this.textState_;var p=t.getFont()||O.c;Object(O.a)(p);var d=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||O.m,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||O.j,i.scale=void 0===d?1:d;var g=t.getOffsetX(),y=t.getOffsetY(),_=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===v?0:v,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Object(c.c)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Object(c.c)(n.fillStyle):""}else this.text_=""},e}(L);i.d(e,"b",function(){return z});var X={Circle:N,Default:L,Image:k,LineString:M,Polygon:N,Text:Y},B=function(t){function e(e,i,n,r,a,s,c){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=a,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=c,this.replaysByZIndex_={},this.hitDetectionContext_=Object(o.a)(1,1),this.hitDetectionTransform_=Object(I.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=Object(r.createEmpty)()).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],n=0,o=t.length;n<o;++n)if(t[n]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,a,s,c){var u,l=2*(o=Math.round(o))+1,f=Object(I.b)(this.hitDetectionTransform_,o+.5,o+.5,1/e,-1/e,-i,-t[0],-t[1]),p=this.hitDetectionContext_;p.canvas.width!==l||p.canvas.height!==l?(p.canvas.width=l,p.canvas.height=l):p.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(u=Object(r.createEmpty)(),Object(r.extendCoordinate)(u,t),Object(r.buffer)(u,e*(this.renderBuffer_+o),u));var d,g,y=function(t){if(void 0!==H[t])return H[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);for(var o=t,r=0,a=0;o>=r;)U(i,t+o,t+r),U(i,t+r,t+o),U(i,t-r,t+o),U(i,t-o,t+r),U(i,t-o,t-r),U(i,t-r,t-o),U(i,t+r,t-o),U(i,t+o,t-r),2*((a+=1+2*++r)-o)+1>0&&(a+=1-2*(o-=1));return H[t]=i,i}(o);function _(t){for(var e=p.getImageData(0,0,l,l).data,i=0;i<l;i++)for(var n=0;n<l;n++)if(y[i][n]&&e[4*(n*l+i)+3]>0){var o=void 0;return(!d||g!=h.a.IMAGE&&g!=h.a.TEXT||-1!==d.indexOf(t))&&(o=s(t)),o||void p.clearRect(0,0,l,l)}}this.declutterTree_&&(d=this.declutterTree_.all().map(function(t){return t.value}));var v,m,b,O,E,C=Object.keys(this.replaysByZIndex_).map(Number);for(C.sort(n.g),v=C.length-1;v>=0;--v){var S=C[v].toString();for(b=this.replaysByZIndex_[S],m=w.a.length-1;m>=0;--m)if(void 0!==(O=b[g=w.a[m]]))if(!c||g!=h.a.IMAGE&&g!=h.a.TEXT){if(E=O.replayHitDetection(p,f,i,a,_,u))return E}else{var T=c[S];T?T.push(O,f.slice(0)):c[S]=[O,f.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],n=e[1],o=e[2],r=e[3],s=[i,n,i,r,o,r,o,n];return Object(a.c)(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",n=this.replaysByZIndex_[i];void 0===n&&(n={},this.replaysByZIndex_[i]=n);var o=n[e];return void 0===o&&(o=new(0,X[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),n[e]=o),o},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return Object(s.d)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,o,r,a,s){var c=Object.keys(this.replaysByZIndex_).map(Number);c.sort(n.g),t.save(),this.clip(t,e);var u,l,f,p,d,g,y=a||w.a;for(u=0,l=c.length;u<l;++u){var _=c[u].toString();for(d=this.replaysByZIndex_[_],f=0,p=y.length;f<p;++f){var v=y[f];if(void 0!==(g=d[v]))if(!s||v!=h.a.IMAGE&&v!=h.a.TEXT)g.replay(t,e,i,o,r);else{var m=s[_];m?m.push(g,e.slice(0)):s[_]=[g,e.slice(0)]}}}t.restore()},e}(l),H={0:[[!0]]};function U(t,e,i){var n,o=Math.floor(t.length/2);if(e>=o)for(n=o;n<e;n++)t[n][i]=!0;else if(e<o)for(n=e+1;n<o;n++)t[n][i]=!0}function z(t,e,i,o){for(var r=Object.keys(t).map(Number).sort(n.g),a={},s=0,c=r.length;s<c;++s)for(var u=t[r[s].toString()],l=0,h=u.length;l<h;){var f=u[l++],p=u[l++];f.replay(e,p,i,a,o)}}e.a=B},function(t,e,i){"use strict";var n=i(37),o=i(39),r=i(16),a=i(19),s=i(22),c=i(4),u=function(t){function e(e){var i=e||{};t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,atlasManager:i.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(function(t){function e(e){var i=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return s.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,i,n="",s="",u=0,l=null,h=0,f=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=c.k),i=Object(o.a)(i),void 0===(f=this.stroke_.getWidth())&&(f=c.h),l=this.stroke_.getLineDash(),h=this.stroke_.getLineDashOffset(),a.a||(l=null,h=0),void 0===(s=this.stroke_.getLineJoin())&&(s=c.g),void 0===(n=this.stroke_.getLineCap())&&(n=c.d),void 0===(u=this.stroke_.getMiterLimit())&&(u=c.i));var p=2*(this.radius_+f)+1,d={strokeStyle:i,strokeWidth:f,size:p,lineCap:n,lineDash:l,lineDashOffset:h,lineJoin:s,miterLimit:u};if(void 0===t){var g=Object(r.a)(p,p);this.canvas_=g.canvas,e=p=this.canvas_.width,this.draw_(d,g,0,0),this.createHitDetectionCanvas_(d)}else{p=Math.round(p);var y,_=!this.fill_;_&&(y=this.drawHitDetectionCanvas_.bind(this,d));var v=this.getChecksum(),m=t.add(v,p,p,this.draw_.bind(this,d),y);this.canvas_=m.image,this.origin_=[m.offsetX,m.offsetY],e=m.image.width,_?(this.hitDetectionCanvas_=m.hitImage,this.hitDetectionImageSize_=[m.hitImage.width,m.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[p/2,p/2],this.size_=[p,p],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,i,n){var r,a,s;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var u=this.points_;if(u===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(u*=2),r=0;r<=u;r++)a=2*r*Math.PI/u-Math.PI/2+this.angle_,s=r%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}if(this.fill_){var h=this.fill_.getColor();null===h&&(h=c.b),e.fillStyle=Object(o.a)(h),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Object(r.a)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,o){e.setTransform(1,0,0,1,0,0),e.translate(i,o),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var a,s,u,l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(r*=2),a=0;a<=r;a++)u=2*a*Math.PI/r-Math.PI/2+this.angle_,s=a%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle=Object(n.b)(c.b),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(i(91).a));e.a=u},function(t,e,i){"use strict";i.r(e);var n=i(2),o=i(49),r=i(27),a=i(54),s=i(13),c=i(11),u=i(1),l=i(23),h=i(5),f=i(0),p=i(20),d=i(57);function g(t,e){return[[-1/0,-1/0,1/0,1/0]]}var y=i(12),_=i(94),v=i(45),m="addfeature",b="removefeature",O=i(74),E=i.n(O),C=function(t){this.rbush_=E()(t,void 0),this.items_={}};C.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Object(n.c)(e)]=i},C.prototype.load=function(t,e){for(var i=new Array(e.length),o=0,r=e.length;o<r;o++){var a=t[o],s=e[o],c={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};i[o]=c,this.items_[Object(n.c)(s)]=c}this.rbush_.load(i)},C.prototype.remove=function(t){var e=Object(n.c)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},C.prototype.update=function(t,e){var i=this.items_[Object(n.c)(e)],o=[i.minX,i.minY,i.maxX,i.maxY];Object(f.equals)(o,t)||(this.remove(e),this.insert(t,e))},C.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},C.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},C.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},C.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},C.prototype.forEach_=function(t,e,i){for(var n,o=0,r=t.length;o<r;o++)if(n=e.call(i,t[o]))return n;return n},C.prototype.isEmpty=function(){return Object(y.d)(this.items_)},C.prototype.clear=function(){this.rbush_.clear(),this.items_={}},C.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(f.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)},C.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]};var S=C;i.d(e,"VectorSourceEvent",function(){return T});var T=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.a),x=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:void 0,state:v.a.READY,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=p.c,this.format_=i.format,this.overlaps_=null==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&(Object(c.a)(this.format_,7),this.loader_=function(t,e){return function(t,e,i,n){return function(i,o,r){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(i,o,r):t,!0),e.getType()==d.default.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var i,o=e.getType();o==d.default.JSON||o==d.default.TEXT?i=a.responseText:o==d.default.XML?(i=a.responseXML)||(i=(new DOMParser).parseFromString(a.responseText,"application/xml")):o==d.default.ARRAY_BUFFER&&(i=a.response),i?function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}.call(this,e.readFeatures(i,{featureProjection:r}),e.readProjection(i),e.getLastExtent()):n.call(this)}else n.call(this)}.bind(this),a.onerror=function(){n.call(this)}.bind(this),a.send()}}(t,e,0,p.c)}(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:g;var n,r,a=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=a?new S:null,this.loadedExtentsRtree_=new S,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(i.features)?r=i.features:i.features&&(r=(n=i.features).getArray()),a||void 0!==n||(n=new o.a(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==n&&this.bindFeaturesCollection_(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(n.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new T(m,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(u.a)(e,h.a.CHANGE,this.handleFeatureChange_,this),Object(u.a)(e,a.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n?n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e:(Object(c.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],o=[],r=0,a=t.length;r<a;r++){var s=t[r],c=Object(n.c)(s);this.addToIndex_(c,s)&&i.push(s)}for(var u=0,l=i.length;u<l;u++){var h=i[u],f=Object(n.c)(h);this.setupChangeEvents_(f,h);var p=h.getGeometry();if(p){var d=p.getExtent();e.push(d),o.push(h)}else this.nullGeometryFeatures_[f]=h}this.featuresRtree_&&this.featuresRtree_.load(e,o);for(var g=0,y=i.length;g<y;g++)this.dispatchEvent(new T(m,i[g]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;Object(u.a)(this,m,function(i){e||(e=!0,t.push(i.feature),e=!1)}),Object(u.a)(this,b,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),Object(u.a)(t,r.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Object(u.a)(t,r.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(u.e);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var n=new T("clear");this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(y.d)(this.nullGeometryFeatures_)||Object(s.c)(t,Object(y.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],o=null,r=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],c=e||p.b;return this.featuresRtree_.forEachInExtent(s,function(t){if(c(t)){var e=t.getGeometry(),u=a;if((a=e.closestPointXY(i,n,r,a))<u){o=t;var l=Math.sqrt(a);s[0]=i-l,s[1]=n-l,s[2]=i+l,s[3]=n+l}}}),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=Object(n.c)(e),o=e.getGeometry();if(o){var r=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var s=a.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new T("changefeature",e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(n.c)(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(y.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this,o=this.loadedExtentsRtree_,r=this.strategy_(t,e);this.loading=!1;for(var a=function(t,a){var s=r[t];o.forEachInExtent(s,function(t){return Object(f.containsExtent)(t.extent,s)})||(n.loader_.call(n,s,e,i),o.insert(s,{extent:s.slice()}),n.loading=n.loader_!==p.c)},s=0,c=r.length;s<c;++s)a(s)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(Object(f.equals)(i.extent,t))return e=i,!0}),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=Object(n.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(n.c)(t);this.featureChangeKeys_[e].forEach(u.e),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new T(b,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(_.a);e.default=x},function(t,e,i){"use strict";i.r(e);var n=i(53),o=i(55),r={IMAGE:"image",VECTOR:"vector"},a=i(12),s=i(72),c="renderOrder",u=function(t){function e(e){var i=e||{},o=Object(a.a)({},i);delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,t.call(this,o),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||r.VECTOR,this.type=n.a.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(c)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(c,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:s.createDefaultStyle,this.styleFunction_=null===t?void 0:Object(s.toFunction)(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(o.a);u.prototype.getSource,e.default=u},function(t,e){t.exports=window.proj4||{defs:function(){}}},function(t,e,i){"use strict";var n=i(1),o=i(44),r=i(5),a=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(r.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),r=0;r<i;++r)o[r]=Object(n.a)(this,t[r],e);return o}return Object(n.a)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),r=0;r<i;++r)o[r]=Object(n.b)(this,t[r],e);return o}return Object(n.b)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,o=t.length;i<o;++i)Object(n.c)(this,t[i],e);else Object(n.c)(this,t,e)},e}(o.a);e.a=a},function(t,e,i){"use strict";var n=i(2),o=function(t){function e(e){var i="Assertion failed. See https://openlayers.org/en/"+("latest"===n.a?n.a:"v"+n.a.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,i),this.code=e,this.name="AssertionError",this.message=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.a=o},function(t,e,i){"use strict";var n=i(2),o=i(15),r=i(0),a=i(34),s=i(10),c=i(26),u=i(9),l=Object(u.c)(),h=function(t){function e(){t.call(this),this.extent_=Object(r.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return Object(n.b)()},e.prototype.closestPointXY=function(t,e,i,o){return Object(n.b)()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(n.b)()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Object(r.returnOrUpdate)(this.extent_,t)},e.prototype.rotate=function(t,e){Object(n.b)()},e.prototype.scale=function(t,e,i){Object(n.b)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(n.b)()},e.prototype.getType=function(){return Object(n.b)()},e.prototype.applyTransform=function(t){Object(n.b)()},e.prototype.intersectsExtent=function(t){return Object(n.b)()},e.prototype.translate=function(t,e){Object(n.b)()},e.prototype.transform=function(t,e){var i=Object(s.get)(t),n=i.getUnits()==c.b.TILE_PIXELS?function(t,n,o){var c=i.getExtent(),h=i.getWorldExtent(),f=Object(r.getHeight)(h)/Object(r.getHeight)(c);return Object(u.b)(l,h[0],h[3],f,-f,0,0,0),Object(a.c)(t,0,t.length,o,l,n),Object(s.getTransform)(i,e)(t,n,o)}:Object(s.getTransform)(i,e);return this.applyTransform(n),this},e}(o.a);e.a=h},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=h(i(40)),u=h(i(8)),l=h(i(111));function h(t){return t&&t.__esModule?t:{default:t}}var f=c.default.proj4,p=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this,t))).url="https://geocoding.geo.census.gov/geocoder/locations/onelineaddress?format=json&benchmark=4&vintage=4&address=",i.projection=t&&t.projection?t.projection:"EPSG:3857",i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l.default),i=e,(n=[{key:"search",value:function(t){var e=this,i=this;return new Promise(function(n,o){5!==(t=t.trim()).length||isNaN(t)?t.length&&(t=t.replace(/"/g,"").replace(/'/g,"").replace(/&/g," and "),u.default.ajax({url:"".concat(i.url).concat(t),dataType:"jsonp",success:function(t){i.census(t,n)},error:i.error})):e.resolveZip(t,n)})}},{key:"project",value:function(t){return t&&"EPSG:4326"!==this.projection?f("EPSG:4326",this.projection,t):t}},{key:"census",value:function(t,e){var i=t.result,n=i.addressMatches,o={type:"ambiguous",input:i.input.address.address,possible:[]};if(n.length)if(1===n.length){var r=this.parse(n[0]);r?(r.type="geocoded",e(r),this.trigger("geocoded",r)):(e(o),this.trigger("ambiguous",o))}else{var a={type:"ambiguous",input:o.input,possible:this.possible(n)};e(a),this.trigger("ambiguous",a)}else e(o),this.trigger("ambiguous",o)}},{key:"possible",value:function(t){var e=this,i=[];return t.forEach(function(t){var n=e.parse(t);n&&i.push(n)}),i}},{key:"parse",value:function(t){var e=[t.coordinates.x,t.coordinates.y];return{type:"geocoded",coordinate:this.project(e),data:t,name:t.matchedAddress}}},{key:"error",value:function(t){var e={type:"error",error:arguments};console.error("Geoclient error",arguments),t(e),this.trigger("error",e)}}])&&o(i.prototype,n),e}();p.Options;var d=p;e.default=d},function(t,e,i){"use strict";var n=i(11),o=i(44),r=i(5),a=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(r.a.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},e.prototype.get=function(t){var e=this.entries_[t];return Object(n.a)(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return Object(n.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){Object(n.a)(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(o.a);e.a=a},function(t,e,i){"use strict";var n=i(2),o=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};o.prototype.clone=function(){return new o({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},o.prototype.getOpacity=function(){return this.opacity_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getSnapToPixel=function(){return!1},o.prototype.getAnchor=function(){return Object(n.b)()},o.prototype.getImage=function(t){return Object(n.b)()},o.prototype.getHitDetectionImage=function(t){return Object(n.b)()},o.prototype.getImageState=function(){return Object(n.b)()},o.prototype.getImageSize=function(){return Object(n.b)()},o.prototype.getHitDetectionImageSize=function(){return Object(n.b)()},o.prototype.getOrigin=function(){return Object(n.b)()},o.prototype.getSize=function(){return Object(n.b)()},o.prototype.setOpacity=function(t){this.opacity_=t},o.prototype.setRotateWithView=function(t){this.rotateWithView_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t},o.prototype.setSnapToPixel=function(t){},o.prototype.listenImageChange=function(t,e){return Object(n.b)()},o.prototype.load=function(){Object(n.b)()},o.prototype.unlistenImageChange=function(t,e){Object(n.b)()},e.a=o},function(t,e,i){"use strict";e.a={POINT:"point",LINE:"line"}},function(t,e,i){"use strict";var n=i(2),o=i(15),r=i(24),a=i(6),s=i(12),c=function(t){function e(e){t.call(this);var i=Object(s.a)({},e);i[r.a.OPACITY]=void 0!==e.opacity?e.opacity:1,i[r.a.VISIBLE]=void 0===e.visible||e.visible,i[r.a.Z_INDEX]=e.zIndex,i[r.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,i[r.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=Object(a.a)(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return Object(n.b)()},e.prototype.getLayerStatesArray=function(t){return Object(n.b)()},e.prototype.getExtent=function(){return this.get(r.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(r.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(r.a.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(r.a.OPACITY)},e.prototype.getSourceState=function(){return Object(n.b)()},e.prototype.getVisible=function(){return this.get(r.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(r.a.Z_INDEX)},e.prototype.setExtent=function(t){this.set(r.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(r.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(r.a.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(r.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(r.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(r.a.Z_INDEX,t)},e}(o.a);e.a=c},function(t,e,i){"use strict";var n=i(2),o=i(15),r=i(10),a=i(45),s=function(t){function e(e){t.call(this),this.projection_=Object(r.get)(e.projection),this.attributions_=c(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:a.a.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Object(n.b)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=c(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(o.a);function c(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}e.a=s},function(t,e,i){"use strict";function n(t,e,i,n,o,r){for(var a,s=[t[e],t[e+1]],c=[];e+n<i;e+=n){if(c[0]=t[e+n],c[1]=t[e+n+1],a=o.call(r,s,c))return a;s[0]=c[0],s[1]=c[1]}return!1}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";function n(t,e,i,n){for(var o=t[e],r=t[e+1],a=0,s=e+n;s<i;s+=n){var c=t[s],u=t[s+1];a+=Math.sqrt((c-o)*(c-o)+(u-r)*(u-r)),o=c,r=u}return a}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return a});var n=i(13),o=i(48);function r(t,e,i,r,a,s,c){for(var u,l,h,f,p,d,g,y=a[s+1],_=[],v=0,m=i.length;v<m;++v){var b=i[v];for(f=t[b-r],d=t[b-r+1],u=e;u<b;u+=r)p=t[u],g=t[u+1],(y<=d&&g<=y||d<=y&&y<=g)&&(h=(y-d)/(g-d)*(p-f)+f,_.push(h)),f=p,d=g}var O=NaN,E=-1/0;for(_.sort(n.g),f=_[0],u=1,l=_.length;u<l;++u){p=_[u];var C=Math.abs(p-f);C>E&&(h=(f+p)/2,Object(o.c)(t,e,i,r,h,y)&&(O=h,E=C)),f=p}return isNaN(O)&&(O=a[s]),c?(c.push(O,y,E),c):[O,y,E]}function a(t,e,i,n,o){for(var a=[],s=0,c=i.length;s<c;++s){var u=i[s];a=r(t,e,u,n,o,2*s,a),e=u[u.length-1]}return a}},function(t,e,i){"use strict";var n=i(13),o=i(39),r=i(0),a=i(3),s=i(31),c=i(34),u=i(19),l=i(99),h=i(4),f=i(9),p=function(t){function e(e,i,n,o,r){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=n,this.transform_=o,this.viewRotation_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(f.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var o=Object(c.c)(t,e,i,2,this.transform_,this.pixelCoordinates_),r=this.context_,a=this.tmpLocalTransform_,s=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,h=o.length;l<h;l+=2){var p=o[l]-this.imageAnchorX_,d=o[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var g=p+this.imageAnchorX_,y=d+this.imageAnchorY_;Object(f.b)(a,g,y,this.imageScale_,this.imageScale_,u,-g,-y),r.setTransform.apply(r,a)}r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,d,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||r.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(r.globalAlpha=s)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=Object(c.c)(t,e,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){var s=o[e]+this.textOffsetX_,u=o[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var l=Object(f.b)(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);r.setTransform.apply(r,l)}this.textStrokeState_&&r.strokeText(this.text_,s,u),this.textFillState_&&r.fillText(this.text_,s,u)}0===a&&1==this.textScale_||r.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,n,o){var r=this.context_,a=Object(c.c)(t,e,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(a[0],a[1]);var s=a.length;o&&(s-=2);for(var u=2;u<s;u+=2)r.lineTo(a[u],a[u+1]);return o&&r.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var o=0,r=i.length;o<r;++o)e=this.moveToLineTo_(t,e,i[o],n,!0);return e},e.prototype.drawCircle=function(t){if(Object(r.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(s.b)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],o=Math.sqrt(i*i+n*n),a=this.context_;a.beginPath(),a.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case a.a.POINT:this.drawPoint(t);break;case a.a.LINE_STRING:this.drawLineString(t);break;case a.a.POLYGON:this.drawPolygon(t);break;case a.a.MULTI_POINT:this.drawMultiPoint(t);break;case a.a.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case a.a.MULTI_POLYGON:this.drawMultiPolygon(t);break;case a.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case a.a.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Object(r.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(Object(r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(Object(r.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),o=0,a=t.getEnds(),s=t.getStride();i.beginPath();for(var c=0,u=a.length;c<u;++c)o=this.moveToLineTo_(n,o,a[c],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(Object(r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(Object(r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,o=t.getEndss(),a=t.getStride();e.beginPath();for(var s=0,c=o.length;s<c;++s){var u=o[s];n=this.drawRings_(i,n,u,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),u.a&&(Object(n.b)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,u.a&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:h.l;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=n&&(i.textAlign=e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Object(o.a)(i||h.b)}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),c=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:h.d,lineDash:a||h.e,lineDashOffset:s||h.f,lineJoin:void 0!==c?c:h.g,lineWidth:this.pixelRatio_*(void 0!==u?u:h.h),miterLimit:void 0!==l?l:h.i,strokeStyle:Object(o.a)(n||h.k)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),o=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=o[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=o[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Object(o.a)(i||h.b)}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),a=n.getLineCap(),s=n.getLineDash(),c=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),f=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:h.d,lineDash:s||h.e,lineDashOffset:c||h.f,lineJoin:void 0!==u?u:h.g,lineWidth:void 0!==l?l:h.h,miterLimit:void 0!==f?f:h.i,strokeStyle:Object(o.a)(r||h.k)}}else this.textStrokeState_=null;var p=t.getFont(),d=t.getOffsetX(),g=t.getOffsetY(),y=t.getRotateWithView(),_=t.getRotation(),v=t.getScale(),m=t.getText(),b=t.getTextAlign(),O=t.getTextBaseline();this.textState_={font:void 0!==p?p:h.c,textAlign:void 0!==b?b:h.l,textBaseline:void 0!==O?O:h.m},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==d?this.pixelRatio_*d:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0!==_?_:0,this.textScale_=this.pixelRatio_*(void 0!==v?v:1)}else this.text_=""},e}(l.a);e.a=p},function(t,e,i){"use strict";var n=function(){};n.prototype.drawCustom=function(t,e,i){},n.prototype.drawGeometry=function(t){},n.prototype.setStyle=function(t){},n.prototype.drawCircle=function(t,e){},n.prototype.drawFeature=function(t,e){},n.prototype.drawGeometryCollection=function(t,e){},n.prototype.drawLineString=function(t,e){},n.prototype.drawMultiLineString=function(t,e){},n.prototype.drawMultiPoint=function(t,e){},n.prototype.drawMultiPolygon=function(t,e){},n.prototype.drawPoint=function(t,e){},n.prototype.drawPolygon=function(t,e){},n.prototype.drawText=function(t,e){},n.prototype.setFillStrokeStyle=function(t,e){},n.prototype.setImageStyle=function(t,e){},n.prototype.setTextStyle=function(t,e){},e.a=n},function(t,e,i){"use strict";var n=function(t){function e(e,i,n,o,r){t.call(this,e),this.vectorContext=i,this.frameState=n,this.context=o,this.glContext=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(23).a);e.a=n},function(t,e,i){"use strict";var n=i(2),o=i(0),r=i(20),a=i(100),s=i(38),c=i(4),u=i(98),l=i(22),h=i(86),f=i(7),p=i(1),d=i(5),g=i(45),y=function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,o){return t.forEachLoadedTile(e,n,o,function(t){i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t})}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===l.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=l.a.LOADED&&e!=l.a.ERROR&&Object(p.a)(t,d.a.CHANGE,this.handleImageChange_,this),e==l.a.IDLE&&(t.load(),e=t.getState()),e==l.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==g.a.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var o=Object(n.c)(t);o in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i,o){var r=Object(n.c)(e),a=i.toString();r in t?a in t[r]?t[r][a].extend(o):t[r][a]=o:(t[r]={},t[r][a]=o)},e.prototype.manageTilePyramid=function(t,e,i,o,r,a,s,c,u,l){var h=Object(n.c)(e);h in t.wantedTiles||(t.wantedTiles[h]={});var p,d,g,y,_,v,m=t.wantedTiles[h],b=t.tileQueue;for(v=i.getMinZoom();v<=s;++v)for(d=i.getTileRangeForExtentAndZ(a,v,d),g=i.getResolution(v),y=d.minX;y<=d.maxX;++y)for(_=d.minY;_<=d.maxY;++_)s-v<=c?((p=e.getTile(v,y,_,o,r)).getState()==f.a.IDLE&&(m[p.getKey()]=!0,b.isKeyQueued(p.getKey())||b.enqueue([p,h,i.getTileCoordCenter(p.tileCoord),g])),void 0!==u&&u.call(l,p)):e.useTile(v,y,_,r)},e}(h.a),_=i(9),v=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=Object(_.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n,a=e.size[1]*n,s=e.viewState.rotation,u=Object(o.getTopLeft)(i),l=Object(o.getTopRight)(i),h=Object(o.getBottomRight)(i),f=Object(o.getBottomLeft)(i);Object(_.a)(e.coordinateToPixelTransform,u),Object(_.a)(e.coordinateToPixelTransform,l),Object(_.a)(e.coordinateToPixelTransform,h),Object(_.a)(e.coordinateToPixelTransform,f),t.save(),Object(c.s)(t,-s,r/2,a/2),t.beginPath(),t.moveTo(u[0]*n,u[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(f[0]*n,f[1]*n),t.clip(),Object(c.s)(t,s,r/2,a/2)},e.prototype.dispatchComposeEvent_=function(t,e,i,n){var o=this.getLayer();if(o.hasListener(t)){var r=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,l=i.viewState.rotation;Object(c.s)(e,-l,r/2,s/2);var h=void 0!==n?n:this.getTransform(i,0),f=new u.a(e,i.pixelRatio,i.extent,h,i.viewState.rotation),p=new a.a(t,f,i,e,null);o.dispatchEvent(p),Object(c.s)(e,l,r/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,i,n,o){return this.forEachFeatureAtCoordinate(t,e,i,r.b)?n.call(o,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,i,n){this.dispatchComposeEvent_(s.a.POSTCOMPOSE,t,e,n)},e.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(s.a.PRECOMPOSE,t,e,i)},e.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(s.a.RENDER,t,e,i)},e.prototype.getTransform=function(t,e){var i=t.viewState,n=t.pixelRatio,o=n*t.size[0]/2,r=n*t.size[1]/2,a=n/i.resolution,s=-a,c=-i.rotation,u=-i.center[0]+e,l=-i.center[1];return Object(_.b)(this.transform_,o,r,a,s,c,u,l)},e.prototype.composeFrame=function(t,e,i){Object(n.b)()},e.prototype.prepareFrame=function(t,e){return Object(n.b)()},e}(y);e.a=v},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=h(i(8)),u=h(i(40)),l=h(i(69));function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this,t.target))).getContainer().addClass("chc rad-all"),i.radio=t.radio,i.inputs=null,i.choices=t.choices,i.setChoices(i.choices),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l.default),i=e,(n=[{key:"setChoices",value:function(t){var i=this,n="checkbox";this.radio?(this.getContainer().attr("role","radiogroup"),n="radio"):this.getContainer().attr("role","group"),this.getContainer().empty(),t.forEach(function(t,o){var r=(0,c.default)(e.HTML),a=u.default.nextId("chc-chc"),s=r.find("input");r.addClass(i.radio?"".concat(t.name,"-").concat(o):t.name),s.attr({id:a,name:t.name,type:n,role:n,"aria-checked":!0===t.checked}).prop("checked",!0===t.checked).data("choice",t).change(c.default.proxy(i.change,i)),r.find("label").html(t.label).attr("for",a),i.append(r),i.extend(t)}),this.inputs=this.find("input")}},{key:"val",value:function(t){var e=this;if(t)return t.forEach(function(t){e.extend(t)}),c.default.each(this.inputs,function(e,i){(0,c.default)(i).prop("checked",!1),t.some(function(t){var e=(0,c.default)(i).data("choice");if(t.eq(e))return(0,c.default)(i).prop("checked",!0),!0})}),this.val();var i=[];return c.default.each(this.inputs,function(t,e){(0,c.default)(e).prop("checked")&&i.push((0,c.default)(e).data("choice"))}),i}},{key:"change",value:function(t){c.default.each(this.inputs,function(t,e){(0,c.default)(e).attr("aria-checked",(0,c.default)(e).prop("checked"))}),this.trigger("change",this)}},{key:"extend",value:function(t){c.default.extend(t,{eq:function(t){return this.name===t.name&&this.label===t.label&&JSON.stringify(this.value)===JSON.stringify(t.value)}})}}])&&o(i.prototype,n),e}();f.Choice,f.Options,f.HTML='<div class="chc-chc"><input><label></label></div>';var p=f;e.default=p},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=u(i(64));function u(t){return t&&t.__esModule?t:{default:t}}var l=u(i(40)).default.proj4,h=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this))).geocoder=t.geocoder,i.projection=t.projection||"EPSG:3857",i.hookupEvents(),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,c.default),i=e,(n=[{key:"metersPerUnit",value:function(){return l.defs[this.projection].to_meter}},{key:"accuracyDistance",value:function(t){return"EPSG:3857"===this.projection?t:t/this.metersPerUnit()}},{key:"search",value:function(t){this.geocoder.search(t)}},{key:"locate",value:function(){throw"Not implemented"}},{key:"track",value:function(){throw"Not implemented"}},{key:"proxyEvent",value:function(t){this.trigger(t.type,t)}},{key:"hookupEvents",value:function(){this.geocoder.on("geocoded",this.proxyEvent,this),this.geocoder.on("ambiguous",this.proxyEvent,this),this.geocoder.on("error",this.proxyEvent,this)}}])&&o(i.prototype,n),e}();h.Options,h.Accuracy={HIGH:0,MEDIUM:50,LOW:500,ZIP_CODE:1e3},h.Result,h.Ambiguous;var f=h;e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=i(40))&&n.__esModule?n:{default:n},r=i(56);(0,i(112).register)(o.default.proj4);var a={TILE_HOSTS:"maps{1-4}.nyc.gov",TILE_GRID:(0,r.createXYZ)({minZoom:8,maxZoom:21})};e.default=a},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i(8)),r=a(i(40));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"canDownload",value:function(){return"download"in(0,o.default)("<a></a>").get(0)}},{key:"saveGeoJson",value:function(t,e){var i="data:application/jsoncharset=utf-8,".concat(encodeURIComponent(e)),n=(0,o.default)('<a class="file-dwn"><img></a>');(0,o.default)("body").append(n),n.attr({href:i,download:t}).find("img").trigger("click"),n.remove()}},{key:"setItem",value:function(t,e){"localStorage"in window&&localStorage.setItem(t,e)}},{key:"getItem",value:function(t){if("localStorage"in window)return localStorage.getItem(t)}},{key:"removeItem",value:function(t){"localStorage"in window&&localStorage.removeItem(t)}},{key:"readTextFile",value:function(t,e){var i=new FileReader;if(i.onload=function(){t(i.result)},e)i.readAsText(e);else{var n=(0,o.default)('<input class="file-in" type="file">');(0,o.default)("body").append(n),n.change(function(t){n.remove(),i.readAsText(t.target.files[0])}),n.trigger("click")}}},{key:"loadGeoJsonFile",value:function(t,e,i){var n=this;this.readTextFile(function(i){var o=n.addToMap(t,i);e&&e(o)},i)}},{key:"loadShapeFile",value:function(t,e,i){if(i)this.getShpDbfPrj(t,i,e);else{var n=this,r=(0,o.default)('<input class="file-in" type="file" multiple>');(0,o.default)("body").append(r),r.change(function(i){n.getShpDbfPrj(t,i.target.files,e),r.remove()}),r.trigger("click")}}},{key:"getShpDbfPrj",value:function(t,e,i){var n,o,r,a=this;Object.values(e).forEach(function(t){var e=t.name,i=e.substr(e.length-4).toLowerCase();".shp"===i?n=t:".dbf"===i?o=t:".prj"===i&&(r=t)}),n?this.readPrj(r,function(e){a.readShpDbf(t,n,o,e,i)}):i&&i()}},{key:"readPrj",value:function(t,e){t?this.readTextFile(e,t):e()}},{key:"readShpDbf",value:function(t,e,i,n,o){var r,a,s=this,c=new FileReader;c.onload=function(e){r=e.target.result,!a&&i||s.readShp(t,r,a,n,o)};var u=new FileReader;u.onload=function(e){a=e.target.result,r&&s.readShp(t,r,a,n,o)},c.readAsArrayBuffer(e),i&&u.readAsArrayBuffer(i)}},{key:"readShp",value:function(e,i,n,o,r){var a=this,s=[];t.shapefile.open(i,n).then(function(t){t.read().then(function i(n){if(!n.done)return s.push(n.value),t.read().then(i);var c=a.addToMap(e,s,o);r&&r(c)})}).catch(function(t){console.error(t)})}},{key:"addToMap",value:function(t,e,i){throw"Not implemented"}},{key:"customProj",value:function(t,e){if(t){var i=r.default.nextId("shp:prj");return e.defs(i,t),i}}}])&&n(e.prototype,i),t}();s.shapefile=i(128);var c=s;e.default=c},function(t,e,i){"use strict";i.r(e);var n=.5,o=i(2),r=i(7),a=i(28),s=i(44),c=i(5),u=function(t){function e(e,i,n){t.call(this);var o=n||{};this.tileCoord=e,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===o.transition?250:o.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(c.a.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==r.a.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==r.a.LOADED){t.interimTile=null;break}t.getState()==r.a.LOADING?e=t:t.getState()==r.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:Object(a.easeIn)(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(s.a),l=i(16),h=i(1);function f(){var t=Object(l.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var p=function(t){function e(e,i,n,o,r,a){t.call(this,e,i,a),this.crossOrigin_=o,this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.tileLoadFunction_=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==r.a.LOADING&&(this.unlistenImage_(),this.image_=f()),this.interimTile&&this.interimTile.dispose(),this.state=r.a.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=r.a.ERROR,this.unlistenImage_(),this.image_=f(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=r.a.LOADED:this.state=r.a.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==r.a.ERROR&&(this.state=r.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==r.a.IDLE&&(this.state=r.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(h.b)(this.image_,c.a.ERROR,this.handleImageError_,this),Object(h.b)(this.image_,c.a.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(h.e),this.imageListenerKeys_=null},e}(u),d=i(90),g=i(33),y=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),i=e.tileCoord[0].toString();if(i in t&&t[i].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=Object(g.b)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Object(g.c)(t.tileCoord)),t.dispose())},this)}},e}(d.a),_=i(10),v=i(0),m=i(6);function b(t,e,i,n){var o=i-t,r=n-e,a=Math.sqrt(o*o+r*r);return[Math.round(i+o/a),Math.round(n+r/a)]}var O=function(t,e,i,n,o){this.sourceProj_=t,this.targetProj_=e;var r={},a=Object(_.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return r[e]||(r[e]=a(t)),r[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Object(v.getWidth)(n)==Object(v.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(v.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(v.getWidth)(this.targetProj_.getExtent()):null;var s=Object(v.getTopLeft)(i),c=Object(v.getTopRight)(i),u=Object(v.getBottomRight)(i),l=Object(v.getBottomLeft)(i),h=this.transformInv_(s),f=this.transformInv_(c),p=this.transformInv_(u),d=this.transformInv_(l);if(this.addQuad_(s,c,u,l,h,f,p,d,10),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach(function(t,e,i){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}r={}};O.prototype.addTriangle_=function(t,e,i,n,o,r){this.triangles_.push({source:[n,o,r],target:[t,e,i]})},O.prototype.addQuad_=function(t,e,i,n,o,r,a,s,c){var u=Object(v.boundingExtent)([o,r,a,s]),l=this.sourceWorldWidth_?Object(v.getWidth)(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&l>.5&&l<1,p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var d=Object(v.boundingExtent)([t,e,i,n]);p=Object(v.getWidth)(d)/this.targetWorldWidth_>.25||p}!f&&this.sourceProj_.isGlobal()&&l&&(p=l>.25||p)}if(p||!this.maxSourceExtent_||Object(v.intersects)(u,this.maxSourceExtent_)){if(!(p||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(c>0))return;p=!0}if(c>0){if(!p){var g,y=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(y);g=f?(Object(m.d)(o[0],h)+Object(m.d)(a[0],h))/2-Object(m.d)(_[0],h):(o[0]+a[0])/2-_[0];var b=(o[1]+a[1])/2-_[1];p=g*g+b*b>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var O=[(e[0]+i[0])/2,(e[1]+i[1])/2],E=this.transformInv_(O),C=[(n[0]+t[0])/2,(n[1]+t[1])/2],S=this.transformInv_(C);this.addQuad_(t,e,O,C,o,r,E,S,c-1),this.addQuad_(C,O,i,n,S,E,a,s,c-1)}else{var T=[(t[0]+e[0])/2,(t[1]+e[1])/2],x=this.transformInv_(T),j=[(i[0]+n[0])/2,(i[1]+n[1])/2],w=this.transformInv_(j);this.addQuad_(t,T,j,n,o,x,w,s,c-1),this.addQuad_(T,e,i,j,x,r,a,w,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,o,a,s),this.addTriangle_(t,e,i,o,r,a)}},O.prototype.calculateSourceExtent=function(){var t=Object(v.createEmpty)();return this.triangles_.forEach(function(e,i,n){var o=e.source;Object(v.extendCoordinate)(t,o[0]),Object(v.extendCoordinate)(t,o[1]),Object(v.extendCoordinate)(t,o[2])}),t},O.prototype.getTriangles=function(){return this.triangles_};var E=O,C=function(t){function e(e,i,o,a,s,c,u,l,h,f,p){t.call(this,s,r.a.IDLE),this.renderEdges_=void 0!==p&&p,this.pixelRatio_=u,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=a,this.wrappedTileCoord_=c||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var d=a.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent(),y=this.sourceTileGrid_.getExtent(),b=g?Object(v.getIntersection)(d,g):d;if(0!==Object(v.getArea)(b)){var O=e.getExtent();O&&(y=y?Object(v.getIntersection)(y,O):O);var C=a.getResolution(this.wrappedTileCoord_[0]),S=function(t,e,i,n){var o=Object(_.transform)(i,e,t),r=Object(_.getPointResolution)(e,n,i),a=e.getMetersPerUnit();void 0!==a&&(r*=a);var s=t.getMetersPerUnit();void 0!==s&&(r/=s);var c=t.getExtent();if(!c||Object(v.containsCoordinate)(c,o)){var u=Object(_.getPointResolution)(t,r,o)/r;isFinite(u)&&u>0&&(r/=u)}return r}(e,o,Object(v.getCenter)(b),C);if(!isFinite(S)||S<=0)this.state=r.a.EMPTY;else{var T=void 0!==f?f:n;if(this.triangulation_=new E(e,o,b,y,S*T),0!==this.triangulation_.getTriangles().length){this.sourceZ_=i.getZForResolution(S);var x=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(x[1]=Object(m.a)(x[1],y[1],y[3]),x[3]=Object(m.a)(x[3],y[1],y[3])):x=Object(v.getIntersection)(x,y)),Object(v.getArea)(x)){for(var j=i.getTileRangeForExtentAndZ(x,this.sourceZ_),w=j.minX;w<=j.maxX;w++)for(var I=j.minY;I<=j.maxY;I++){var R=h(this.sourceZ_,w,I,u);R&&this.sourceTiles_.push(R)}0===this.sourceTiles_.length&&(this.state=r.a.EMPTY)}else this.state=r.a.EMPTY}else this.state=r.a.EMPTY}}else this.state=r.a.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==r.a.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==r.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=r.a.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,i,n,o,r,a,s,c,u,h){var f=Object(l.a)(Math.round(i*t),Math.round(i*e));if(0===c.length)return f.canvas;f.scale(i,i);var p=Object(v.createEmpty)();c.forEach(function(t,e,i){Object(v.extend)(p,t.extent)});var d=Object(v.getWidth)(p),g=Object(v.getHeight)(p),y=Object(l.a)(Math.round(i*d/n),Math.round(i*g/n)),_=i/n;c.forEach(function(t,e,i){var n=t.extent[0]-p[0],o=-(t.extent[3]-p[3]),r=Object(v.getWidth)(t.extent),a=Object(v.getHeight)(t.extent);y.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,n*_,o*_,r*_,a*_)});var O=Object(v.getTopLeft)(a);return s.getTriangles().forEach(function(t,e,o){var a=t.source,s=t.target,c=a[0][0],u=a[0][1],l=a[1][0],h=a[1][1],d=a[2][0],g=a[2][1],_=(s[0][0]-O[0])/r,v=-(s[0][1]-O[1])/r,E=(s[1][0]-O[0])/r,C=-(s[1][1]-O[1])/r,S=(s[2][0]-O[0])/r,T=-(s[2][1]-O[1])/r,x=c,j=u;c=0,u=0;var w=[[l-=x,h-=j,0,0,E-_],[d-=x,g-=j,0,0,S-_],[0,0,l,h,C-v],[0,0,d,g,T-v]],I=Object(m.e)(w);if(I){f.save(),f.beginPath();var R=(_+E+S)/3,P=(v+C+T)/3,L=b(R,P,_,v),k=b(R,P,E,C),M=b(R,P,S,T);f.moveTo(k[0],k[1]),f.lineTo(L[0],L[1]),f.lineTo(M[0],M[1]),f.clip(),f.transform(I[0],I[2],I[1],I[3],_,v),f.translate(p[0]-x,p[3]-j),f.scale(n/i,-n/i),f.drawImage(y.canvas,0,0),f.restore()}}),h&&(f.save(),f.strokeStyle="black",f.lineWidth=1,s.getTriangles().forEach(function(t,e,i){var n=t.target,o=(n[0][0]-O[0])/r,a=-(n[0][1]-O[1])/r,s=(n[1][0]-O[0])/r,c=-(n[1][1]-O[1])/r,u=(n[2][0]-O[0])/r,l=-(n[2][1]-O[1])/r;f.beginPath(),f.moveTo(s,c),f.lineTo(o,a),f.lineTo(u,l),f.closePath(),f.stroke()}),f.restore()),f.canvas}(n,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=r.a.LOADED}this.changed()},e.prototype.load=function(){if(this.state==r.a.IDLE){this.state=r.a.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){var o=e.getState();if(o==r.a.IDLE||o==r.a.LOADING){t++;var a=Object(h.a)(e,c.a.CHANGE,function(i){var n=e.getState();n!=r.a.LOADED&&n!=r.a.ERROR&&n!=r.a.EMPTY||(Object(h.e)(a),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==r.a.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(h.e),this.sourcesListenerKeys_=null},e}(u),S=i(11);function T(t,e){var i=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(a,s,c){return a?t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(o,function(){return(-a[2]-1).toString()}).replace(r,function(){var t=a[0],i=e.getFullTileRange(t);return Object(S.a)(i,55),(i.getHeight()+a[2]).toString()}):void 0}}function x(t,e,i){}var j=i(23),w=i(42),I=i(94),R=i(56),P=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new y(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var a,s,c,u=!0,l=i.minX;l<=i.maxX;++l)for(var h=i.minY;h<=i.maxY;++h)s=Object(g.d)(e,l,h),c=!1,o.containsKey(s)&&(c=(a=o.get(s)).getState()===r.a.LOADED)&&(c=!1!==n(a)),c||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,n,r){return Object(o.b)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Object(R.getForProjection)(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Object(_.equivalent)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),r=Object(w.c)(n.getTileSize(t),this.tmpSize);return 1==o?r:Object(w.b)(r,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Object(R.wrapX)(n,t,i)),Object(g.f)(t,n)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e.prototype.useTile=function(t,e,i,n){},e}(I.a),L=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(j.a);function k(t,e){t.getImage().src=e}var M=function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",o=void 0!==i.tileGrid?i.tileGrid:Object(R.createXYZ)({extent:Object(R.extentFromProjection)(n),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:k,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:p,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==i?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Object(_.equivalent)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Object(_.equivalent)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Object(_.equivalent)(e,t)){var i=Object(o.c)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Object(R.getForProjection)(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Object(_.equivalent)(e,t))return this.tileCache;var i=Object(o.c)(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new y(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,n,o,a){var s=[t,e,i],u=this.getTileCoordForTileUrlFunction(s,o),l=u?this.tileUrlFunction(u,n,o):void 0,f=new this.tileClass(s,void 0!==l?r.a.IDLE:r.a.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,Object(h.a)(f,c.a.CHANGE,this.handleTileChange,this),f},e.prototype.getTile=function(t,e,i,n,o){var r=this.getProjection();if(r&&o&&!Object(_.equivalent)(r,o)){var a,s=this.getTileCacheForProjection(o),c=[t,e,i],u=Object(g.c)(c);s.containsKey(u)&&(a=s.get(u));var l=this.getKey();if(a&&a.key==l)return a;var h=this.getTileGridForProjection(r),f=this.getTileGridForProjection(o),p=this.getTileCoordForTileUrlFunction(c,o),d=new C(r,h,o,f,c,p,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=l,a?(d.interimTile=a,d.refreshInterimChain(),s.replace(u,d)):s.set(u,d),d}return this.getTileInternal(t,e,i,n,r||o)},e.prototype.getTileInternal=function(t,e,i,n,o){var a=null,s=Object(g.d)(t,e,i),c=this.getKey();if(this.tileCache.containsKey(s)){if((a=this.tileCache.get(s)).key!=c){var u=a;a=this.createTile_(t,e,i,n,o,c),u.getState()==r.a.IDLE?a.interimTile=u.interimTile:a.interimTile=u,a.refreshInterimChain(),this.tileCache.replace(s,a)}}else a=this.createTile_(t,e,i,n,o,c),this.tileCache.set(s,a);return a},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=Object(_.get)(t);if(i){var n=Object(o.c)(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):x,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=Object(o.c)(i),a=i.getState();a==r.a.LOADING?(this.tileLoadingKeys_[n]=!0,e="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=a==r.a.ERROR?"tileloaderror":a==r.a.LOADED||a==r.a.ABORT?"tileloadend":void 0),null!=e&&this.dispatchEvent(new L(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n,o=i[1].charCodeAt(0),r=i[2].charCodeAt(0);for(n=o;n<=r;++n)e.push(t.replace(i[0],String.fromCharCode(n)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(i[2],10),s=parseInt(i[1],10);s<=a;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=T(t[o],e);return function(t){return 1===t.length?t[0]:function(e,i,n){if(e){var o=Object(g.e)(e),r=Object(m.d)(o,t.length);return t[r](e,i,n)}}}(n)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var n=Object(g.d)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(P)));e.default=M},function(t,e,i){"use strict";i.r(e);var n=i(65),o=i(2),r=i(20),a=i(6);function s(t){return t}var c=i(15),u=i(13);function l(t,e){return void 0!==t?0:void 0}function h(t,e){return void 0!==t?t+e:void 0}var f=i(18),p="center",d="resolution",g="rotation",y=i(11),_=i(41),v=i(28),m=i(0),b=i(3),O=i(47),E=i(12),C=i(10),S=i(26);i.d(e,"createCenterConstraint",function(){return w}),i.d(e,"createResolutionConstraint",function(){return I}),i.d(e,"createRotationConstraint",function(){return R}),i.d(e,"isNoopAnimation",function(){return P});var T=0,x=function(t){function e(e){t.call(this);var i=Object(E.a)({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Object(C.createProjection)(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[p]=void 0!==t.center?t.center:null;var i=I(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var n=w(t),o=i.constraint,r=R(t);this.constraints_={center:n,resolution:o,rotation:r},void 0!==t.resolution?e[d]=t.resolution:void 0!==t.zoom&&(e[d]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[d]=Object(a.a)(Number(this.getResolution()||e[d]),this.minResolution_,this.maxResolution_))),e[g]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(E.a)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Object(E.a)({},e,t)},e.prototype.animate=function(t){var e,i=arguments,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var o=arguments[n-1];return o.center&&this.setCenter(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(e&&j(e,!0))}for(var r=Date.now(),s=this.getCenter().slice(),c=this.getResolution(),u=this.getRotation(),l=[],h=0;h<n;++h){var p=i[h],d={start:r,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||v.inAndOut};if(p.center&&(d.sourceCenter=s,d.targetCenter=p.center,s=d.targetCenter),void 0!==p.zoom?(d.sourceResolution=c,d.targetResolution=this.constrainResolution(this.maxResolution_,p.zoom-this.minZoom_,0),c=d.targetResolution):p.resolution&&(d.sourceResolution=c,d.targetResolution=p.resolution,c=d.targetResolution),void 0!==p.rotation){d.sourceRotation=u;var g=Object(a.d)(p.rotation-u+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=u+g,u=d.targetRotation}d.callback=e,P(d)?d.complete=!0:r+=d.duration,l.push(d)}this.animations_.push(l),this.setHint(f.a.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[f.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[f.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(f.a.ANIMATING,-this.hints_[f.a.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&j(i[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],o=!0,r=0,s=n.length;r<s;++r){var c=n[r];if(!c.complete){var u=t-c.start,l=c.duration>0?u/c.duration:1;l>=1?(c.complete=!0,l=1):o=!1;var h=c.easing(l);if(c.sourceCenter){var y=c.sourceCenter[0],_=c.sourceCenter[1],v=y+h*(c.targetCenter[0]-y),m=_+h*(c.targetCenter[1]-_);this.set(p,[v,m])}if(c.sourceResolution&&c.targetResolution){var b=1===h?c.targetResolution:c.sourceResolution+h*(c.targetResolution-c.sourceResolution);c.anchor&&this.set(p,this.calculateCenterZoom(b,c.anchor)),this.set(d,b)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){var O=1===h?Object(a.d)(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+h*(c.targetRotation-c.sourceRotation);c.anchor&&this.set(p,this.calculateCenterRotate(O,c.anchor)),this.set(g,O)}if(e=!0,!c.complete)break}}if(o){this.animations_[i]=null,this.setHint(f.a.ANIMATING,-1);var E=n[0].callback;E&&j(E,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenter();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],Object(_.rotate)(i,t-this.getRotation()),Object(_.add)(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenter(),o=this.getResolution();return void 0!==n&&void 0!==o&&(i=[e[0]-t*(e[0]-n[0])/o,e[1]-t*(e[1]-n[1])/o]),i},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+Object(o.c)(this)+'"]',i=document.querySelector(e);if(i){var n=getComputedStyle(i);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,i){var n=e||0,o=i||0;return this.constraints_.resolution(t,n,o)},e.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},e.prototype.getCenter=function(){return this.get(p)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();Object(y.a)(i,1);var n=this.getResolution();Object(y.a)(void 0!==n,2);var o=this.getRotation();return Object(y.a)(void 0!==o,3),Object(m.getForViewAndSize)(i,n,o,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(d)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),n=Object(m.getWidth)(t)/i[0],o=Object(m.getHeight)(t)/i[1];return Math.max(n,o)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,o=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*o)}},e.prototype.getRotation=function(){return this.get(g)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,o=Math.log(i/n)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/o}},e.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),n=this.getResolution(),o=n/t,r=this.getRotation();return{center:[Math.round(e[0]/o)*o,Math.round(e[1]/o)*o],projection:void 0!==i?i:null,resolution:n,rotation:r,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var o=Object(u.f)(this.resolutions_,t,1);n=o,e=this.resolutions_[o],i=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var i,n=e||{},o=n.size;o||(o=this.getSizeFromViewport_()),Object(y.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(Object(y.a)(!Object(m.isEmpty)(t),25),i=Object(O.c)(t)):t.getType()===b.a.CIRCLE?(t=t.getExtent(),(i=Object(O.c)(t)).rotate(this.getRotation(),Object(m.getCenter)(t))):i=t;var a,s=void 0!==n.padding?n.padding:[0,0,0,0],c=void 0===n.constrainResolution||n.constrainResolution,u=void 0!==n.nearest&&n.nearest;a=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;for(var l=i.getFlatCoordinates(),h=this.getRotation(),f=Math.cos(-h),p=Math.sin(-h),d=1/0,g=1/0,_=-1/0,v=-1/0,E=i.getStride(),C=0,S=l.length;C<S;C+=E){var T=l[C]*f-l[C+1]*p,x=l[C]*p+l[C+1]*f;d=Math.min(d,T),g=Math.min(g,x),_=Math.max(_,T),v=Math.max(v,x)}var w=this.getResolutionForExtent([d,g,_,v],[o[0]-s[1]-s[3],o[1]-s[0]-s[2]]);if(w=isNaN(w)?a:Math.max(w,a),c){var I=this.constrainResolution(w,0,0);!u&&I<w&&(I=this.constrainResolution(I,-1,0)),w=I}p=-p;var R=(d+_)/2,P=(g+v)/2,L=[(R+=(s[1]-s[3])/2*w)*f-(P+=(s[0]-s[2])/2*w)*p,P*f+R*p],k=n.callback?n.callback:r.c;void 0!==n.duration?this.animate({resolution:w,center:L,duration:n.duration,easing:n.easing},k):(this.setResolution(w),this.setCenter(L),j(k,!0))},e.prototype.centerOn=function(t,e,i){var n=this.getRotation(),o=Math.cos(-n),r=Math.sin(-n),a=t[0]*o-t[1]*r,s=t[1]*o+t[0]*r,c=this.getResolution(),u=(a+=(e[0]/2-i[0])*c)*o-(s+=(i[1]-e[1]/2)*c)*(r=-r),l=s*o+a*r;this.setCenter([u,l])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(p,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(d,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(g,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(c.a);function j(t,e){setTimeout(function(){t(e)},0)}function w(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[Object(a.a)(t[0],e[0],e[2]),Object(a.a)(t[1],e[1],e[3])]:void 0}):s;var e}function I(t){var e,i,o,r=void 0!==t.minZoom?t.minZoom:T,s=void 0!==t.maxZoom?t.maxZoom:28,c=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var l=t.resolutions;i=l[r],o=void 0!==l[s]?l[s]:l[l.length-1],e=function(t){return function(e,i,n){if(void 0!==e){var o=Object(u.f)(t,e,n);o=Object(a.a)(o+i,0,t.length-1);var r=Math.floor(o);if(o!=r&&r<t.length-1){var s=t[r]/t[r+1];return t[r]/Math.pow(s,o-r)}return t[r]}}}(l)}else{var h=Object(C.createProjection)(t.projection,"EPSG:3857"),f=h.getExtent(),p=(f?Math.max(Object(m.getWidth)(f),Object(m.getHeight)(f)):360*C.METERS_PER_UNIT[S.b.DEGREES]/h.getMetersPerUnit())/n.b/Math.pow(2,T),d=p/Math.pow(2,28-T);void 0!==(i=t.maxResolution)?r=0:i=p/Math.pow(c,r),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(c,s):p/Math.pow(c,s):d),s=r+Math.floor(Math.log(i/o)/Math.log(c)),o=i/Math.pow(c,s-r),e=function(t,e,i){return function(n,o,r){if(void 0!==n){var a=-r/2+.5,s=Math.floor(Math.log(e/n)/Math.log(t)+a),c=Math.max(s+o,0);return void 0!==i&&(c=Math.min(c,i)),e/Math.pow(t,c)}}}(c,i,s-r)}return{constraint:e,maxResolution:i,minResolution:o,minZoom:r,zoomFactor:c}}function R(t){var e,i,n;if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?(n=Object(a.i)(5),function(t,e){return void 0!==t?Math.abs(t+e)<=n?0:t+e:void 0}):!1===o?h:"number"==typeof o?(e=o,i=2*Math.PI/e,function(t,e){return void 0!==t?t=Math.floor((t+e)/i+.5)*i:void 0}):h}return l}function P(t){return!(t.sourceCenter&&t.targetCenter&&!Object(_.equals)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}e.default=x},function(t,e,i){"use strict";i.r(e);var n=i(53),o=i(55),r="preload",a="useInterimTilesOnError",s=i(12),c=function(t){function e(e){var i=e||{},o=Object(s.a)({},i);delete o.preload,delete o.useInterimTilesOnError,t.call(this,o),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=n.a.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(r)},e.prototype.setPreload=function(t){this.set(r,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(a)},e.prototype.setUseInterimTilesOnError=function(t){this.set(a,t)},e}(o.a);c.prototype.getSource,e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(2),o=i(53),r=i(67),a=i(7),s=i(18),c=i(16),u=i(0),l=i(41),h=i(101),f=i(9),p=function(t){function e(e,i){t.call(this,e),this.context=i?null:Object(c.a)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(u.createEmpty)(),this.tmpTileRange_=new r.b(0,0,0,0),this.imageTransform_=Object(f.c)(),this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==a.a.LOADED||i==a.a.EMPTY||i==a.a.ERROR&&!n},e.prototype.getTile=function(t,e,i,n,o){var r=this.getLayer(),s=r.getSource().getTile(t,e,i,n,o);return s.getState()==a.a.ERROR&&(r.getUseInterimTilesOnError()?r.getPreload()>0&&(this.newTiles_=!0):s.setState(a.a.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,o=t.size,r=t.viewState,c=r.projection,l=r.resolution,h=r.center,p=this.getLayer(),d=p.getSource(),g=d.getRevision(),y=d.getTileGridForProjection(c),_=y.getZForResolution(l,this.zDirection),v=y.getResolution(_),m=Math.round(l/v)||1,b=t.extent;if(void 0!==e.extent&&(b=Object(u.getIntersection)(b,e.extent)),Object(u.isEmpty)(b))return!1;var O=y.getTileRangeForExtentAndZ(b,_),E=y.getTileRangeExtent(_,O),C=d.getTilePixelRatio(i),S={};S[_]={};var T,x,j,w=this.createLoadedTileFinder(d,c,S),I=t.viewHints,R=I[s.a.ANIMATING]||I[s.a.INTERACTING],P=this.tmpExtent,L=this.tmpTileRange_;for(this.newTiles_=!1,x=O.minX;x<=O.maxX;++x)for(j=O.minY;j<=O.maxY;++j)if(!(Date.now()-t.time>16&&R)){if(T=this.getTile(_,x,j,i,c),this.isDrawableTile_(T)){var k=Object(n.c)(this);if(T.getState()==a.a.LOADED){S[_][T.tileCoord.toString()]=T;var M=T.inTransition(k);this.newTiles_||!M&&-1!==this.renderedTiles.indexOf(T)||(this.newTiles_=!0)}if(1===T.getAlpha(k,t.time))continue}var F=y.getTileCoordChildTileRange(T.tileCoord,L,P),A=!1;F&&(A=w(_+1,F)),A||y.forEachTileCoordParentTileRange(T.tileCoord,w,null,L,P)}var N=v*i/C*m;if(!(this.renderedResolution&&Date.now()-t.time>16&&R)&&(this.newTiles_||!this.renderedExtent_||!Object(u.containsExtent)(this.renderedExtent_,b)||this.renderedRevision!=g||m!=this.oversampling_||!R&&N!=this.renderedResolution)){var D=this.context;if(D){var G=d.getTilePixelSize(_,i,c),Y=Math.round(O.getWidth()*G[0]/m),X=Math.round(O.getHeight()*G[1]/m),B=D.canvas;B.width!=Y||B.height!=X?(this.oversampling_=m,B.width=Y,B.height=X):((this.renderedExtent_&&!Object(u.equals)(E,this.renderedExtent_)||this.renderedRevision!=g)&&D.clearRect(0,0,Y,X),m=this.oversampling_)}this.renderedTiles.length=0;var H,U,z,W,K,V,Z,q,J,Q,$=Object.keys(S).map(Number);for($.sort(function(t,e){return t===_?1:e===_?-1:t>e?1:t<e?-1:0}),W=0,K=$.length;W<K;++W)for(var tt in z=$[W],U=d.getTilePixelSize(z,i,c),H=y.getResolution(z)/v,Z=C*d.getGutterForProjection(c),q=S[z])T=q[tt],x=((V=y.getTileCoordExtent(T.getTileCoord(),P))[0]-E[0])/v*C/m,j=(E[3]-V[3])/v*C/m,J=U[0]*H/m,Q=U[1]*H/m,this.drawTileImage(T,t,e,x,j,J,Q,Z,_===z),this.renderedTiles.push(T);this.renderedRevision=g,this.renderedResolution=v*i/C*m,this.renderedExtent_=E}var et=this.renderedResolution/l,it=Object(f.b)(this.imageTransform_,i*o[0]/2,i*o[1]/2,et,et,0,(this.renderedExtent_[0]-h[0])/this.renderedResolution*i,(h[1]-this.renderedExtent_[3])/this.renderedResolution*i);return Object(f.b)(this.coordinateToCanvasPixelTransform,i*o[0]/2-it[4],i*o[1]/2-it[5],i/l,-i/l,0,-h[0],-h[1]),this.updateUsedTiles(t.usedTiles,d,_,O),this.manageTilePyramid(t,d,y,i,c,b,_,p.getPreload()),this.scheduleExpireCache(t,d),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,i,o,r,a,s,c,u){var l=this.getTileImage(t);if(l){var h=Object(n.c)(this),f=u?t.getAlpha(h,e.time):1,p=this.getLayer().getSource();1!==f||p.getOpaque(e.viewState.projection)||this.context.clearRect(o,r,a,s);var d=f!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(l,c,c,l.width-2*c,l.height-2*c,o,r,a,s),d&&this.context.restore(),1!==f?e.animate=!0:u&&t.endTransition(h)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=Object(f.c)(),this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var n=this.getImage();if(n){var o=e.extent,r=void 0!==o&&!Object(u.containsExtent)(o,t.extent)&&Object(u.intersects)(o,t.extent);r&&this.clip(i,t,o);var a=this.getImageTransform(),s=i.globalAlpha;i.globalAlpha=e.opacity;var c=a[4],l=a[5],h=n.width*a[0],f=n.height*a[3];h>=.5&&f>=.5&&i.drawImage(n,0,0,+n.width,+n.height,Math.round(c),Math.round(l),Math.round(h),Math.round(f)),i.globalAlpha=s,r&&i.restore()}this.postCompose(i,t,e)},e.prototype.getImage=function(){return Object(n.b)()},e.prototype.getImageTransform=function(){return Object(n.b)()},e.prototype.forEachLayerAtCoordinate=function(t,e,i,n,o){if(this.getImage()){var r=Object(f.a)(this.coordinateToCanvasPixelTransform,t.slice());Object(l.scale)(r,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Object(c.a)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),r[0],r[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;return a[3]>0?n.call(o,this.getLayer(),a):void 0}},e}(h.a));p.handles=function(t){return t.getType()===o.a.TILE},p.create=function(t,e){return new p(e)},p.prototype.getLayer,e.default=p},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=g(i(8)),c=g(i(135)),u=g(i(78)),l=g(i(136)),h=g(i(138)),f=g(i(141)),p=g(i(143)),d=g(i(145));function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i,n=t.map;i=void 0!==t.searchTarget?t.searchTarget:(0,s.default)(n.getTargetElement()).find(".ol-overlaycontainer-stopevent");var a=t.geocoder||new u.default({url:t.url});return o(this,r(e).call(this,{search:new d.default(i),zoom:new f.default(n),dialogTarget:t.dialogTarget,geolocate:new p.default(n),locator:new l.default({geocoder:a}),mapLocator:new h.default({map:n})}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,c.default),e}();y.Options;var _=y;e.default=_},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c,u=(c=i(64))&&c.__esModule?c:{default:c},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,a(e).call(this))}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(n=[{key:"search",value:function(t){throw"Not implemented"}}])&&o(i.prototype,n),e}();e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"register",function(){return a});var n=i(10),o=i(50),r=i(60);function a(t){var e,i,a=Object.keys(t.defs),s=a.length;for(e=0;e<s;++e){var c=a[e];if(!Object(n.get)(c)){var u=t.defs(c);Object(n.addProjection)(new r.a({code:c,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:u.units}))}}for(e=0;e<s;++e){var l=a[e],h=Object(n.get)(l);for(i=0;i<s;++i){var f=a[i],p=Object(n.get)(f);if(!Object(o.c)(l,f))if(t.defs[l]===t.defs[f])Object(n.addEquivalentProjections)([h,p]);else{var d=t(l,f);Object(n.addCoordinateTransforms)(h,p,d.forward,d.inverse)}}}}},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=l(i(8)),u=l(i(69));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=t||{}).target=t.target||"body",i=r(this,a(e).call(this,(0,c.default)(e.HTML))),(0,c.default)(t.target).append(i.getContainer().addClass(t.css)),i.open=!1,i.okBtn=i.find(".btn-ok"),i.yesNoBtns=i.find(".btn-yes, .btn-no"),i.inputBtns=i.find(".btn-submit, .btn-cancel"),i.field=i.find("input"),i.msg=i.find(".dia-msg"),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(n=[{key:"ok",value:function(t){this.buttons(e.Type.OK,t),this.show(e.Type.OK,t),this.okBtn.focus();var i=this,n=this.okBtn;return new Promise(function(t){n.one("click",function(e){i.checkHref(e),i.hide(),t(!0)})})}},{key:"input",value:function(t){var i=this.field;this.buttons(e.Type.INPUT,t),i.attr("placeholder",t.placeholder||""),this.show(e.Type.INPUT,t),i.focus();var n=this,o=this.inputBtns;return new Promise(function(t){var e=function(e){n.hndlKey(t,n,e)};(0,c.default)(document).keyup(e),o.one("click",function(o){var r=(0,c.default)(o.target).hasClass("btn-cancel");(0,c.default)(document).off("keyup",e),n.hide(),t(r?void 0:i.val())})})}},{key:"yesNo",value:function(t){this.buttons(e.Type.YES_NO,t),this.show(e.Type.YES_NO,t),this.find(".btn-yes").focus();var i=this,n=this.yesNoBtns;return new Promise(function(t){n.one("click",function(e){i.checkHref(e),i.hide(),t(i.isYesBtn(e.target))})})}},{key:"yesNoCancel",value:function(t){this.buttons(e.Type.YES_NO_CANCEL,t),this.show(e.Type.YES_NO_CANCEL,t),this.find(".btn-yes").focus();var i=this,n=this.yesNoBtns,o=this.find(".btn-cancel");return new Promise(function(t){var e=function(e){i.hndlKey(t,i,e)};(0,c.default)(document).keyup(e),n.one("click",function(n){i.checkHref(n),(0,c.default)(document).off("keyup",e),i.hide(),t(i.isYesBtn(n.target))}),o.one("click",function(n){i.checkHref(n),(0,c.default)(document).off("keyup",e),i.hide(),t(void 0)})})}},{key:"isYesBtn",value:function(t){return(0,c.default)(t).hasClass("btn-yes")||c.default.contains(this.find(".btn-yes").get(0),t)}},{key:"checkHref",value:function(t){"#"===(0,c.default)(t.target).attr("href")&&t.preventDefault()}},{key:"buttons",value:function(t,i){var n=i.buttonText||[],o=i.buttonHref||[];switch(t){case e.Type.OK:this.find(".btn-ok").html(n[0]||"OK").attr("href",o[0]||"#");break;case e.Type.INPUT:this.find(".btn-submit").html(n[0]||"Submit").attr("href",o[0]||"#"),this.find(".btn-cancel").html(n[1]||"Cancel").attr("href",o[1]||"#");break;case e.Type.YES_NO:this.find(".btn-yes").html(n[0]||"Yes").attr("href",o[0]||"#"),this.find(".btn-no").html(n[1]||"No").attr("href",o[1]||"#");break;case e.Type.YES_NO_CANCEL:this.find(".btn-yes").html(n[0]||"Yes").attr("href",o[0]||"#"),this.find(".btn-no").html(n[1]||"No").attr("href",o[1]||"#"),this.find(".btn-cancel").html(n[2]||"Cancel").attr("href",o[2]||"#")}}},{key:"show",value:function(t,i){var n;this.open=!0,(0,c.default)("*").on("focus",c.default.proxy(this.trapFocus,this)),this.currentType=t,this.getContainer().removeClass("dia-3-btns"),this.find(".ui-link").removeClass("ui-link"),this.inputBtns.css("display",t===e.Type.INPUT?"inline-block":"none"),this.field.css("display",t===e.Type.INPUT?"block":"none"),this.okBtn.css("display",t===e.Type.OK?"inline-block":"none"),this.yesNoBtns.css("display",t===e.Type.YES_NO?"inline-block":"none"),t===e.Type.YES_NO_CANCEL&&(this.getContainer().addClass("dia-3-btns"),this.yesNoBtns.css("display","inline-block"),this.find(".btn-cancel").css("display","inline-block"));try{n=(0,c.default)(i.message)}catch(t){}n&&n.length?this.msg.html(n):this.msg.html(i.message),this.getContainer().fadeIn()}},{key:"trapFocus",value:function(t){var e=this.getContainer();this.open&&!c.default.contains(e.get(0),t.target)&&this.find(".btn:visible").first().focus()}},{key:"hide",value:function(){var t=this.field;this.open=!1,(0,c.default)("*").off("focus",c.default.proxy(this.trapFocus,this)),this.getContainer().fadeOut(function(){t.val("")})}},{key:"hndlKey",value:function(t,e,i){13===i.keyCode&&(0,c.default)(i.target).get(0)===e.field.get(0)?(e.hide(),t(e.field.val())):27===i.keyCode&&(e.hide(),t(void 0))}}])&&o(i.prototype,n),e}();h.Type={OK:"ok",YES_NO:"yes-no",YES_NO_CANCEL:"yes-no-cancel",INPUT:"input"},h.Options,h.ShowOptions,h.HTML='<div class="dia-container" role="dialog"><div class="dia"><div class="dia-msg"></div><input class="rad-all"><div class="dia-btns"><a class="btn rad-all btn-ok">OK</a><a class="btn rad-all btn-yes">Yes</a><a class="btn rad-all btn-no">No</a><a class="btn rad-all btn-submit">OK</a><a class="btn rad-all btn-cancel">Cancel</a></div></div></div>';var f=h;e.default=f},function(t,e,i){"use strict";i.r(e);var n=i(76),o=i(15),r={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},a=i(73),s=i(16),c=i(1),u=i(0),l={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},h=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+a.a,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Object(c.a)(this,Object(o.b)(l.ELEMENT),this.handleElementChanged,this),Object(c.a)(this,Object(o.b)(l.MAP),this.handleMapChanged,this),Object(c.a)(this,Object(o.b)(l.OFFSET),this.handleOffsetChanged,this),Object(c.a)(this,Object(o.b)(l.POSITION),this.handlePositionChanged,this),Object(c.a)(this,Object(o.b)(l.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:r.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(l.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(l.MAP)},e.prototype.getOffset=function(){return this.get(l.OFFSET)},e.prototype.getPosition=function(){return this.get(l.POSITION)},e.prototype.getPositioning=function(){return this.get(l.POSITIONING)},e.prototype.handleElementChanged=function(){Object(s.d)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(s.e)(this.element),Object(c.e)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(c.a)(t,n.a.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(l.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(l.ELEMENT,t)},e.prototype.setMap=function(t){this.set(l.MAP,t)},e.prototype.setOffset=function(t){this.set(l.OFFSET,t)},e.prototype.setPosition=function(t){this.set(l.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),n=this.getRect(i,[Object(s.c)(i),Object(s.b)(i)]),o=this.autoPanMargin;if(!Object(u.containsExtent)(e,n)){var r=n[0]-e[0],a=e[2]-n[2],c=n[1]-e[1],l=e[3]-n[3],h=[0,0];if(r<0?h[0]=r-o:a<0&&(h[0]=Math.abs(a)+o),c<0?h[1]=c-o:l<0&&(h[1]=Math.abs(l)+o),0!==h[0]||0!==h[1]){var f=t.getView().getCenter(),p=t.getPixelFromCoordinate(f),d=[p[0]+h[0],p[1]+h[1]];t.getView().animate({center:t.getCoordinateFromPixel(d),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(l.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var a=n[0],s=n[1];if(o==r.BOTTOM_RIGHT||o==r.CENTER_RIGHT||o==r.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var c=Math.round(e[0]-t[0]-a)+"px";this.rendered.right_!=c&&(this.rendered.right_=i.right=c)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),o!=r.BOTTOM_CENTER&&o!=r.CENTER_CENTER&&o!=r.TOP_CENTER||(a-=this.element.offsetWidth/2);var u=Math.round(t[0]+a)+"px";this.rendered.left_!=u&&(this.rendered.left_=i.left=u)}if(o==r.BOTTOM_LEFT||o==r.BOTTOM_CENTER||o==r.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var l=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=l&&(this.rendered.bottom_=i.bottom=l)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),o!=r.CENTER_LEFT&&o!=r.CENTER_CENTER&&o!=r.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var h=Math.round(t[1]+s)+"px";this.rendered.top_!=h&&(this.rendered.top_=i.top=h)}},e.prototype.getOptions=function(){return this.options},e}(o.a);e.default=h},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=d(i(8)),l=d(i(120)),h=d(i(52)),f=d(i(64)),p=d(i(124));function d(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,s(e).call(this,t))).geocoder=t.geocoder,i.locationTemplate=t.locationTemplate,i.featureCount=void 0,i.geocodedCount=0,i.replace=(new p.default).replace;var n=new f.default;return i.on=u.default.proxy(n.on,n),i.one=u.default.proxy(n.one,n),i.off=u.default.proxy(n.off,n),i.trigger=u.default.proxy(n.trigger,n),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,l.default),i=e,(n=[{key:"readFeatures",value:function(t,i){var n=a(s(e.prototype),"readFeatures",this).call(this,t,i);return this.featureCount=(this.featureCount||0)+n.length,n}},{key:"setGeocode",value:function(t,e){var i=t.get("_input"),n=t.get("_source");t.set("_geocodeResp",e),"geocoded"===e.type?(console.info("Geocoded:",i,n,"Geocoder response:",e),t.setGeometry(new h.default(e.coordinate))):(console.warn("Ambiguous location:",i,n,"Geocoder response:",e),t.dispatchEvent("change",{target:t}))}},{key:"setGeometry",value:function(t,e){var i=this,n=!1,o=this.replace(this.locationTemplate,e);t.set("_input",o),t.set("_source",e),""===o.replace(/\,/g,"").trim()?(t.dispatchEvent({type:"change",target:t}),console.error("Invalid location:",o,"Bad record:",e)):this.geocoder.search(o).then(function(e){i.setGeocode(t,e),n=!0}).catch(function(t){console.error("Geocoding error:",o,e,"Geocoder response:",t)}).finally(function(){n||t.dispatchEvent({type:"change",target:t}),i.geocodedCount=i.geocodedCount+1,i.geocodedCount===i.featureCount&&i.trigger("geocode-complete",i)})}}])&&o(i.prototype,n),e}();g.Options;var y=g;e.default=y},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=I(i(8)),l=I(i(40)),h=I(i(104)),f=I(i(126)),p=I(i(127)),d=I(i(148)),g=I(i(154)),y=I(i(109)),_=I(i(129)),v=I(i(153)),m=I(i(130)),b=I(i(131)),O=I(i(151)),E=I(i(152)),C=I(i(132)),S=I(i(133)),T=I(i(134)),x=I(i(107)),j=I(i(106)),w=I(i(108));function I(t){return t&&t.__esModule?t:{default:t}}var R=l.default.proj4,P=function(t){function e(t,i){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r,c=t.view instanceof x.default;return e.setupView(t),t.interactions||(t.interactions=[new m.default,new b.default,new T.default,new E.default,new C.default,new S.default,new O.default]),this,o=!(r=a(e).call(this,t))||"object"!==n(r)&&"function"!=typeof r?s(this):r,l.default.mixin(s(o),[f.default]),o.latestPhoto=0,o.base=null,o.labels={},o.photos={},o.storage=new p.default,o.setupLayers(t,i),o.defaultExtent(c),o.hookupEvents(o.getTargetElement()),o}var i,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,d.default),i=e,(h=[{key:"createRenderer",value:function(){var t=new g.default(this);return t.registerLayerRenderers([y.default,_.default,v.default]),t}},{key:"showPhoto",value:function(t){this.hidePhoto(),this.photos[(t||this.latestPhoto)+""].setVisible(!0),this.showLabels("photo")}},{key:"hidePhoto",value:function(){this.base.setVisible(!0),this.showLabels(f.default.LabelType.BASE),Object.entries(this.photos).forEach(function(t){var e=o(t,2);e[0],e[1].setVisible(!1)})}},{key:"showLabels",value:function(t){this.labels.base.setVisible(t===f.default.LabelType.BASE),this.labels.photo.setVisible(t===f.default.LabelType.PHOTO)}},{key:"getBaseLayers",value:function(){return{base:this.base,labels:this.labels,photos:this.photos}}},{key:"getStorage",value:function(){return this.storage}},{key:"defaultExtent",value:function(t){t||this.getView().fit(e.EXTENT,this.getSize())}},{key:"setupLayers",value:function(t,i){var n=this;this.base=new w.default({extent:this.layerExtent(e.UNIVERSE_EXTENT,t.view),source:new j.default({url:e.BASE_URL,projection:"EPSG:3857"}),preload:i||0}),this.addLayer(this.base),Object.entries(e.LABEL_URLS).forEach(function(i){var r=o(i,2),a=r[0],s=r[1];n.labels[a]=new w.default({extent:n.layerExtent(e.LABEL_EXTENT,t.view),source:new j.default({url:s,projection:"EPSG:3857"}),zIndex:1e3,visible:a===f.default.LabelType.BASE}),n.addLayer(n.labels[a])}),Object.entries(e.PHOTO_URLS).forEach(function(i){var r=o(i,2),a=r[0],s=r[1],c=new w.default({extent:n.layerExtent(e.PHOTO_EXTENT,t.view),source:new j.default({url:s,projection:"EPSG:3857"}),visible:!1});1*a.split("-")[0]>n.latestPhoto&&(n.latestPhoto=a),c.set("name",a),n.addLayer(c),c.on("change:visible",u.default.proxy(n.photoChange,n)),n.photos[a]=c})}},{key:"layerExtent",value:function(t,e){if(e&&"EPSG:3857"!==e.getProjection().getCode()){var i="EPSG:3857",n="EPSG:2263",o=R(i,n,[t[0],t[1]]),r=R(i,n,[t[2],t[3]]);return[o[0],o[1],r[0],r[1]]}return t}},{key:"photoChange",value:function(){var t=this,e=!1;Object.entries(this.photos).some(function(i){var n=o(i,2),r=(n[0],n[1]);if(e=r.getVisible())return t.showLabels(f.default.LabelType.PHOTO),!0}),e||this.showLabels(f.default.LabelType.BASE)}}])&&r(i.prototype,h),e}();P.setupView=function(t){t.view instanceof x.default||(t.view=new x.default({center:P.CENTER,minZoom:8,maxZoom:21,zoom:8,constrainRotation:1}))},P.BASE_URL="https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/carto/basemap/{z}/{x}/{-y}.jpg"),P.PHOTO_URLS={1924:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/1924/{z}/{x}/{-y}.png8"),1951:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/1951/{z}/{x}/{-y}.png8"),1996:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/1996/{z}/{x}/{-y}.png8"),"2001-2":"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2001-2/{z}/{x}/{-y}.png8"),2004:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2004/{z}/{x}/{-y}.png8"),2006:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2006/{z}/{x}/{-y}.png8"),2008:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2008/{z}/{x}/{-y}.png8"),2010:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2010/{z}/{x}/{-y}.png8"),2012:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2012/{z}/{x}/{-y}.png8"),2014:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2014/{z}/{x}/{-y}.png8"),2016:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2016/{z}/{x}/{-y}.png8"),2018:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/photo/2018/{z}/{x}/{-y}.png8")},P.LABEL_URLS={base:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/carto/label/{z}/{x}/{-y}.png8"),photo:"https://".concat(h.default.TILE_HOSTS,"/tms/1.0.0/carto/label-lt/{z}/{x}/{-y}.png8")},P.UNIVERSE_EXTENT=[-8453323,4774561,-7983695,5165920],P.EXTENT=[-8266522,4937867,-8203781,5000276],P.CENTER=[-8235252,4969073],P.LABEL_EXTENT=[-8268e3,4870900,-8005e3,5055500],P.PHOTO_EXTENT=[-8268357,4937238,-8203099,5001716];var L=P;e.default=L},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=f(i(8)),u=f(i(114)),l=i(28),h=f(i(40));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){var i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this,(i=!(o=r(e).call(this,{id:h.default.nextId("Popup"),element:(0,c.default)(e.HTML).get(0),autoPanMargin:void 0===t.autoPanMargin?10:t.autoPanMargin,autoPanAnimation:void 0===t.autoPanAnimation?{duration:1e3,easing:l.linear}:t.autoPanAnimation}))||"object"!==n(o)&&"function"!=typeof o?a(this):o).popup=(0,c.default)(i.getElement()),i.map=t.map,i.setMap(i.map),i.content=i.popup.find(".content"),i.fullscreen=(0,c.default)(e.FULLSCREEN_HTML),i.closeFullscreen=i.fullscreen.find(".btn-x"),(0,c.default)(i.map.getTargetElement()).append(i.fullscreen),i.popup.find(".btn-x").on("click tap",c.default.proxy(i.hide,a(i))),i.popup.on("mouseover mousemove",c.default.proxy(i.hideTip,a(i))),i}var i,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(f=[{key:"show",value:function(t){t.html&&(this.content.html(t.html),this.cssClass(t.css)),this.setPosition(t.coordinate),this.popup.fadeIn(c.default.proxy(this.pan,this)),(0,c.default)(".f-tip").fadeOut()}},{key:"cssClass",value:function(t){this.content.get(0).className="content",this.content.addClass(t)}},{key:"hide",value:function(){this.popup.fadeOut()}},{key:"hideTip",value:function(t){t.stopPropagation(),(0,c.default)(".f-tip").fadeOut()}},{key:"pan",value:function(){this.isFullscreen()||"none"===this.popup.css("display")||this.panIntoView()}},{key:"isFullscreen",value:function(){var t=(0,c.default)(this.getElement()),e=(0,c.default)(this.map.getTargetElement());if(t.height()>e.height())return this.goFullscreen(),!0}},{key:"goFullscreen",value:function(){var t=(0,c.default)(this.getElement()),e=this.content,i=this.fullscreen,n=c.default.proxy(this.hide,this);i.append(e),this.closeFullscreen.click(function(){i.fadeOut(),t.append(e)}),i.fadeIn(n)}}])&&o(i.prototype,f),e}();p.ShowOptions,p.Options,p.HTML='<div class="pop"><div class="content"></div><button class="btn btn-rnd btn-x"><span class="screen-reader-only">Dismiss popup</span><span class="fas fa-times" role="img"></span></button></div>',p.FULLSCREEN_HTML='<div class="pop fullscreen"><button class="btn btn-rnd btn-x"><span class="screen-reader-only">Close</span><span class="fas fa-times" role="img"></span></button></div>';var d=p;e.default=d},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=h(i(8)),u=h(i(40)),l=h(i(69));function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this,t.target))).getContainer().append((0,c.default)(e.HTML)).addClass("tabs"),i.btns=i.find(".btns"),i.tabs=i.find(".container"),i.active=null,i.ready=!1,i.render(t.tabs),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l.default),i=e,(n=[{key:"open",value:function(t){t=this.find(t),this.find(".btns h2").removeClass("active"),this.find(".tab").attr("aria-hidden",!0).removeClass("active"),this.btns.find(".btn").removeClass("active"),t.addClass("active").attr("aria-hidden",!1).attr("tabindex",1e3).focus(),this.find(".btn").attr("aria-selected",!1),t.data("btn").addClass("active").attr("aria-selected",!0).parent().addClass("active"),this.active=t,this.trigger("change",this)}},{key:"render",value:function(t){var i=this,n=!1;t.forEach(function(t,o){var r=u.default.nextId("tab-btn"),a=(0,c.default)(t.tab).addClass("tab tab-".concat(o)).attr("aria-labelledby",r).attr("role","tabpanel").attr("aria-hidden",!0),s=a.attr("id")||u.default.nextId("tab-pnl");a.attr("id",s);var l=(0,c.default)(e.BTN_HTML).attr("id",r).attr("aria-controls",s).attr("aria-selected",!1).click(c.default.proxy(i.btnClick,i)).addClass("btn-tab btn-".concat(o)).data("tab",a).append(t.title);a.data("btn",l),i.btns.append((0,c.default)("<h2></h2>").append(l)),i.tabs.append(a),t.active&&(i.open(a),n=!0)}),n||this.open(t[0].tab),this.ready=!0}},{key:"btnClick",value:function(t){this.open((0,c.default)(t.currentTarget).data("tab"))}}])&&o(i.prototype,n),e}();f.Options,f.Tab,f.HTML='<div class="btns" role="tablist"></div><div class="container" tabindex="-1"></div>',f.BTN_HTML='<button class="btn" role="tab"></button>';var p=f;e.default=p},,function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=y(i(121)),u=y(i(122)),l=y(i(59)),h=y(i(71)),f=y(i(52)),p=y(i(57)),d=y(i(123)),g=i(10);function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this))).autoDetect=!0===t.autoDetect,i.dataProjection=(0,g.get)(t.dataProjection||"EPSG:4326"),i.featureProjection=(0,g.get)(t.featureProjection||"EPSG:3857"),i.id=t.id,i.x=t.x,i.y=t.y,i.lastId=0,i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,h.default),i=e,(n=[{key:"readFeature",value:function(t,e){var i;t[this.id]?i=t[this.id]:(i=this.lastId,this.lastId+=1);var n=new l.default(t);return n.setId(i),this.setGeometry(n,t,e),n}},{key:"setGeometry",value:function(t,e,i){var n=e[this.x]=parseFloat(e[this.x]),o=e[this.y]=parseFloat(e[this.y]);if(isNaN(n)||isNaN(o))throw"Invalid coordinate [".concat(n,", ").concat(o,"] for id ").concat(t.getId());var r=new f.default([n,o]);r.transform(i&&i.dataProjection?i.dataProjection:this.dataProjection,i&&i.featureProjection?i.featureProjection:this.featureProjection),t.setGeometry(r)}},{key:"readFeatures",value:function(t,e){var i=this,n=[];return(t=this.parseSource(t)).forEach(function(t){try{n.push(i.readFeature(t,e))}catch(e){console.error(e,t)}}),n}},{key:"parseSource",value:function(t){return t instanceof ArrayBuffer&&(t=new u.default.TextDecoder("utf-8").decode(t)),"string"==typeof t&&(t=c.default.parse(t,{header:!0}).data),this.detectCsvFormat(t),t}},{key:"detectCsvFormat",value:function(t){this.autoDetect&&(this.id=d.default.ID,t[0][d.default.X]?(this.x=d.default.X,this.y=d.default.Y,this.dataProjection=(0,g.get)("EPSG:2263")):(this.x=d.default.LNG,this.y=d.default.LAT,this.dataProjection=(0,g.get)("EPSG:4326")))}},{key:"readProjection",value:function(t){return this.dataProjection}},{key:"getType",value:function(){return p.default.ARRAY_BUFFER}}])&&o(i.prototype,n),e}();_.Options;var v=_;e.default=v},function(t,e){t.exports=window.Papa||{}},function(t,e){t.exports=window},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};n.ID="ID",n.X="X",n.Y="Y",n.LNG="LNG",n.LAT="LAT",n.NAME="NAME",n.ADDR1="ADDR1",n.ADDR2="ADDR2",n.CITY="CITY",n.BORO="BORO",n.STATE="STATE",n.ZIP="ZIP",n.PHONE="PHONE",n.EMAIL="EMAIL",n.WEBSITE="WEBSITE",n.DETAIL="DETAIL";var o=n;e.default=o},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"replace",value:function(t,e){return Object.keys(e).forEach(function(i){t=t.replace(new RegExp("\\$\\{"+i+"\\}","g"),void 0!==e[i]?e[i]:"")}),t}}])&&n(e.prototype,i),t}();e.default=o},function(t,e,i){var n,o,r;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r=function(){"use strict";function t(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(i,n,o,r,a){!function e(i,n,o,r,a){for(;r>o;){if(r-o>600){var s=r-o+1,c=n-o+1,u=Math.log(s),l=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*l*(s-l)/s)*(c-s/2<0?-1:1);e(i,n,Math.max(o,Math.floor(n-c*l/s+h)),Math.min(r,Math.floor(n+(s-c)*l/s+h)),a)}var f=i[n],p=o,d=r;for(t(i,o,n),a(i[r],f)>0&&t(i,o,r);p<d;){for(t(i,p,d),p++,d--;a(i[p],f)<0;)p++;for(;a(i[d],f)>0;)d--}0===a(i[o],f)?t(i,o,d):t(i,++d,r),d<=n&&(o=d+1),n<=d&&(r=d-1)}}(i,n,o||0,r||i.length-1,a||e)}},"object"===a(e)&&void 0!==t?t.exports=r():void 0===(o="function"==typeof(n=r)?n.call(e,i,e,t):n)||(t.exports=o)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=i(8))&&n.__esModule?n:{default:n},r={hookupEvents:function(t){(0,o.default)(t).on("drop",o.default.proxy(this.loadLayer,this)),(0,o.default)(t).on("dragover",function(t){t.preventDefault()})},loadLayer:function(t){var e=t.originalEvent.dataTransfer;if(t.preventDefault(),t.stopPropagation(),e&&e.files.length){var i=e.files;"json"===i[0].name.split(".").pop().toLowerCase()?this.storage.loadGeoJsonFile(this,null,i[0]):this.storage.loadShapeFile(this,null,i)}},sortedPhotos:function(){var t=this,e=[];return Object.keys(this.photos).forEach(function(i){e.push(t.photos[i])}),e.sort(function(t,e){var i=t.name||t.get("name");return(e.name||e.get("name")).substr(0,4)-i.substr(0,4)})},LabelType:{BASE:"base",PHOTO:"photo"}};e.default=r},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=f(i(77)),c=f(i(83)),u=f(i(84)),l=f(i(105)),h=i(112);function f(t){return t&&t.__esModule?t:{default:t}}var p=f(i(40)).default.proj4,d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,r(e).call(this))}var i,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,l.default),i=e,(f=[{key:"addToMap",value:function(t,e,i){var o={featureProjection:t.getView().getProjection().getCode(),dataProjection:this.customProj(i,p)};(0,h.register)(p),"object"===n(e)&&(e={type:"FeatureCollection",features:e});var r=new c.default,a=new u.default({source:r});return r.addFeatures((new s.default).readFeatures(e,o)),t.addLayer(a),a}}])&&o(i.prototype,f),e}();e.default=d},function(t,e){t.exports=window.shapefile||{}},function(t,e,i){"use strict";i.r(e);var n=i(2),o=i(53),r=i(18),a=i(16),s=i(1),c=i(5),u=i(74),l=i.n(u),h=i(0),f=i(38),p=i(4),d=i(81),g=i(101),y=i(51),_=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?l()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(h.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Object(a.a)(),Object(s.a)(p.o,c.a.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(s.c)(p.o,c.a.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,i){var n=e.extent,o=e.pixelRatio,a=i.managed?e.skippedFeatureUids:{},s=e.viewState,c=s.projection,u=s.rotation,l=c.getExtent(),d=this.getLayer().getSource(),g=this.getTransform(e,0),y=i.extent,_=void 0!==y;_&&this.clip(t,e,y);var v=this.replayGroup_;if(v&&!v.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var m,b=this.getLayer(),O=0,E=0,C=1!==i.opacity,S=b.hasListener(f.a.RENDER);if(C||S){var T=t.canvas.width,x=t.canvas.height;if(u){var j=Math.round(Math.sqrt(T*T+x*x));O=(j-T)/2,E=(j-x)/2,T=x=j}this.context.canvas.width=T,this.context.canvas.height=x,m=this.context}else m=t;var w=m.globalAlpha;C||(m.globalAlpha=i.opacity),m!=t&&m.translate(O,E);var I=e.viewHints,R=!(I[r.a.ANIMATING]||I[r.a.INTERACTING]),P=e.size[0]*o,L=e.size[1]*o;if(Object(p.s)(m,-u,P/2,L/2),v.replay(m,g,u,a,R),d.getWrapX()&&c.canWrapX()&&!Object(h.containsExtent)(l,n)){for(var k,M=n[0],F=Object(h.getWidth)(l),A=0;M<l[0];)k=F*--A,g=this.getTransform(e,k),v.replay(m,g,u,a,R),M+=F;for(A=0,M=n[2];M>l[2];)k=F*++A,g=this.getTransform(e,k),v.replay(m,g,u,a,R),M-=F}if(Object(p.s)(m,u,P/2,L/2),S&&this.dispatchRenderEvent(m,e,g),m!=t){if(C){var N=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(m.canvas,-O,-E),t.globalAlpha=N}else t.drawImage(m.canvas,-O,-E);m.translate(-O,-E)}C||(m.globalAlpha=w)}_&&t.restore()},e.prototype.composeFrame=function(t,e,i){var n=this.getTransform(t,0);this.preCompose(i,t,n),this.compose(i,t,e),this.postCompose(i,t,e,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,c=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,i,{},function(t){var e=Object(n.c)(t);if(!(e in u))return u[e]=!0,o.call(r,t,c)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var i=this.getLayer(),n=i.getSource(),o=t.viewHints[r.a.ANIMATING],a=t.viewHints[r.a.INTERACTING],s=i.getUpdateWhileAnimating(),c=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&o||!c&&a)return!0;var u=t.extent,l=t.viewState,f=l.projection,p=l.resolution,g=t.pixelRatio,_=i.getRevision(),v=i.getRenderBuffer(),m=i.getRenderOrder();void 0===m&&(m=y.a);var b=Object(h.buffer)(u,v*p),O=l.projection.getExtent();if(n.getWrapX()&&l.projection.canWrapX()&&!Object(h.containsExtent)(O,t.extent)){var E=Object(h.getWidth)(O),C=Math.max(Object(h.getWidth)(b)/2,E);b[0]=O[0]-C,b[2]=O[2]+C}if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==_&&this.renderedRenderOrder_==m&&Object(h.containsExtent)(this.renderedExtent_,b))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var S=new d.a(Object(y.c)(p,g),b,p,g,n.getOverlaps(),this.declutterTree_,i.getRenderBuffer());n.loadFeatures(b,p,f);var T=function(t){var e,n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,p)),e){var o=this.renderFeature(t,p,g,e,S);this.dirty_=this.dirty_||o}}.bind(this);if(m){var x=[];n.forEachFeatureInExtent(b,function(t){x.push(t)}),x.sort(m);for(var j=0,w=x.length;j<w;++j)T(x[j])}else n.forEachFeatureInExtent(b,T);return S.finish(),this.renderedResolution_=p,this.renderedRevision_=_,this.renderedRenderOrder_=m,this.renderedExtent_=b,this.replayGroup_=S,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,o){if(!n)return!1;var r=!1;if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)r=Object(y.d)(o,t,n[a],Object(y.b)(e,i),this.handleStyleImageChange_,this)||r;else r=Object(y.d)(o,t,n,Object(y.b)(e,i),this.handleStyleImageChange_,this);return r},e}(g.a);_.handles=function(t){return t.getType()===o.a.VECTOR},_.create=function(t,e){return new _(e)},e.default=_},function(t,e,i){"use strict";i.r(e);var n=i(17),o=i(30),r=function(t){function e(e){t.call(this,{handleEvent:a});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.a);function a(t){var e=!1;if(t.type==n.a.DBLCLICK){var i=t.originalEvent,r=t.map,a=t.coordinate,s=i.shiftKey?-this.delta_:this.delta_,c=r.getView();Object(o.d)(c,s,a,this.duration_),t.preventDefault(),e=!0}return!e}e.default=r},function(t,e,i){"use strict";i.r(e);var n=i(18),o=i(41),r=i(28),a=i(29),s=i(20),c=i(62),u=function(t){function e(e){t.call(this,{stopDown:s.a});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:a.d,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(n.a.INTERACTING,1));var e=this.targetPointers,i=Object(c.a)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=this.lastCentroid[0]-i[0],a=i[1]-this.lastCentroid[1],s=t.map.getView(),u=[r,a];Object(o.scale)(u,s.getResolution()),Object(o.rotate)(u,s.getRotation()),Object(o.add)(u,s.getCenter()),u=s.constrainCenter(u),s.setCenter(u)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),s=i.getCenter(),c=e.getPixelFromCoordinate(s),u=e.getCoordinateFromPixel([c[0]-o*Math.cos(a),c[1]-o*Math.sin(a)]);i.animate({center:i.constrainCenter(u),duration:500,easing:r.easeOut})}return this.panning_&&(this.panning_=!1,i.setHint(n.a.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(c.b);e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(5),o=i(29),r=i(30),a=function(t){function e(e){t.call(this,{handleEvent:s});var i=e||{};this.condition_=i.condition?i.condition:o.f,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.a);function s(t){var e=!1;if(t.type==n.a.KEYDOWN||t.type==n.a.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var o=t.map,a=i=="+".charCodeAt(0)?this.delta_:-this.delta_,s=o.getView();Object(r.d)(s,a,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}e.default=a},function(t,e,i){"use strict";i.r(e),i.d(e,"Mode",function(){return l});var n=i(18),o=i(29),r=i(28),a=i(5),s=i(19),c=i(30),u=i(6),l={TRACKPAD:"trackpad",WHEEL:"wheel"},h=function(t){function e(e){var i=e||{};t.call(this,i),this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:o.a,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(n.a.INTERACTING,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==a.a.WHEEL&&e!==a.a.MOUSEWHEEL)return!0;t.preventDefault();var i,o=t.map,c=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==a.a.WHEEL?(i=c.deltaY,s.c&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=s.b),c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==a.a.MOUSEWHEEL&&(i=-c.wheelDeltaY,s.h&&(i/=3)),0===i)return!1;var u=Date.now();if(void 0===this.startTime_&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?l.TRACKPAD:l.WHEEL),this.mode_===l.TRACKPAD){var h=o.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):h.setHint(n.a.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var f=h.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),p=h.getMinResolution(),d=h.getMaxResolution(),g=0;if(f<p?(f=Math.max(f,p/this.trackpadZoomBuffer_),g=1):f>d&&(f=Math.min(f,d*this.trackpadZoomBuffer_),g=-1),this.lastAnchor_){var y=h.calculateCenterZoom(f,this.lastAnchor_);h.setCenter(h.constrainCenter(y))}return h.setResolution(f),0===g&&this.constrainResolution_&&h.animate({resolution:h.constrainResolution(f,i>0?-1:1),easing:r.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),g>0?h.animate({resolution:p,easing:r.easeOut,anchor:this.lastAnchor_,duration:500}):g<0&&h.animate({resolution:d,easing:r.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=u,!1}this.delta_+=i;var _=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),_),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=Object(u.a)(this.delta_,-1,1);Object(c.d)(e,-i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(c.a);e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(18),o=i(20),r=i(30),a=i(62),s=function(t){function e(e){var i=e||{},n=i;n.stopDown||(n.stopDown=o.a),t.call(this,n),this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],o=i.clientX-n.clientX,s=i.clientY-n.clientY,c=Math.sqrt(o*o+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/c),this.lastDistance_=c;var u=t.map,l=u.getView(),h=l.getResolution(),f=l.getMaxResolution(),p=l.getMinResolution(),d=h*e;d>f?(e=f/h,d=f):d<p&&(e=p/h,d=p),1!=e&&(this.lastScaleDelta_=e);var g=u.getViewport().getBoundingClientRect(),y=Object(a.a)(this.targetPointers);y[0]-=g.left,y[1]-=g.top,this.anchor_=u.getCoordinateFromPixel(y),u.render(),Object(r.e)(l,d,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(n.a.INTERACTING,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var o=this.lastScaleDelta_-1;Object(r.c)(e,i,this.anchor_,this.duration_,o)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(n.a.INTERACTING,1),!0}return!1},e}(a.b);e.default=s},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=h(i(40)),u=h(i(64)),l=h(i(113));function h(t){return t&&t.__esModule?t:{default:t}}var f=c.default.proj4,p=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this))).zoom=t.zoom,i.geolocate=t.geolocate,i.search=t.search,i.locator=t.locator,i.mapLocator=t.mapLocator,i.dialog=new l.default({target:t.dialogTarget}),i.autoLocate=t.autoLocate||!1,i.hookupEvents(),i.locateFromQueryString(document.location.search),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(n=[{key:"setLocation",value:function(t){this.mapLocator.setLocation(t)}},{key:"hookupEvents",value:function(){this.locator.on("geocoded",this.located,this),this.locator.on("geolocated",this.located,this),this.locator.on("ambiguous",this.ambiguous,this),this.locator.on("error",this.error,this),this.search.on("disambiguated",this.located,this),this.search.on("search",this.locator.search,this.locator),this.geolocate.on("geolocate",this.locator.locate,this.locator)}},{key:"goTo",value:function(t){if(t.indexOf("EPSG")>-1){t=t.split(",");var e=this.mapLocator.getProjection(),i=f(t[2],e,[1*t[0],1*t[1]]);this.mapLocator.zoomLocation({coordinate:i})}else this.locator.search(t)}},{key:"locateFromQueryString",value:function(t){var e={};try{(t=decodeURIComponent(t)).substr(1).split("&").forEach(function(t){var i=t.split("=");e[i[0]]=decodeURIComponent(i[1])})}catch(t){}e.location?this.goTo(e.location):this.autoLocate&&this.locator.locate()}},{key:"located",value:function(t){var e=this;this.search.val("geolocated"===t.type?"":t.name),this.mapLocator.zoomLocation(t,function(){e.trigger(t.type,t)})}},{key:"ambiguous",value:function(t){t.possible.length?this.search.disambiguate(t):this.dialog.ok({message:"The location you entered was not understood"})}},{key:"error",value:function(){this.dialog.ok({message:"Failed to contact geocoder"})}}])&&o(i.prototype,n),e}();p.Options;var d=p;e.default=d},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=d(i(8)),u=d(i(40)),l=d(i(103)),h=d(i(137)),f=i(41),p=i(0);function d(t){return t&&t.__esModule?t:{default:t}}var g=u.default.proj4,y=function(t){function e(t){var i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this,(i=!(o=r(e).call(this,t))||"object"!==n(o)&&"function"!=typeof o?a(this):o).locating=!1,i.extentLimit=t.extentLimit,i.geolocation=new h.default({trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),i.geolocation.on("change",c.default.proxy(i.geolocationChange,a(i))),i.geolocation.on("error",c.default.proxy(i.geolocationError,a(i))),i}var i,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l.default),i=e,(u=[{key:"locate",value:function(){this.locating=!0,this.geolocation.setTracking(!0)}},{key:"track",value:function(t){this.geolocation.setTracking(t)}},{key:"geolocationError",value:function(t){console.error(t.message,t)}},{key:"geolocationChange",value:function(){var t=this.geolocation,e=t.getPosition(),i=(0,f.toStringHDMS)(e);e=g("EPSG:4326",this.projection,e),this.withinLimit(e)&&(this.locating&&(this.track(!1),this.locating=!1),this.trigger("geolocated",{coordinate:e,heading:t.getHeading(),accuracy:t.getAccuracy()/this.metersPerUnit(),type:"geolocated",name:i}))}},{key:"withinLimit",value:function(t){return!this.extentLimit||(0,p.containsCoordinate)(this.extentLimit,t)}}])&&o(i.prototype,u),e}();y.Options;var _=y;e.default=_},function(t,e,i){"use strict";i.r(e);var n=i(15),o=i(1),r=i(23),a=i(5),s=i(47),c=i(19),u=i(6),l=i(10),h={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},f=function(t){function e(e){t.call(this,a.a.ERROR),this.code=e.code,this.message=e.message}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.a),p=function(t){function e(e){t.call(this);var i=e||{};this.position_=null,this.transform_=l.identityTransform,this.watchId_=void 0,Object(o.a)(this,Object(n.b)(h.PROJECTION),this.handleProjectionChanged_,this),Object(o.a)(this,Object(n.b)(h.TRACKING),this.handleTrackingChanged_,this),void 0!==i.projection&&this.setProjection(i.projection),void 0!==i.trackingOptions&&this.setTrackingOptions(i.trackingOptions),this.setTracking(void 0!==i.tracking&&i.tracking)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Object(l.getTransformFromProjections)(Object(l.get)("EPSG:4326"),t),this.position_&&this.set(h.POSITION,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if(c.d){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(h.ACCURACY,e.accuracy),this.set(h.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(h.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(h.HEADING,null===e.heading?void 0:Object(u.i)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(h.POSITION,i),this.set(h.SPEED,null===e.speed?void 0:e.speed);var n=Object(s.a)(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(h.ACCURACY_GEOMETRY,n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new f(t))},e.prototype.getAccuracy=function(){return this.get(h.ACCURACY)},e.prototype.getAccuracyGeometry=function(){return this.get(h.ACCURACY_GEOMETRY)||null},e.prototype.getAltitude=function(){return this.get(h.ALTITUDE)},e.prototype.getAltitudeAccuracy=function(){return this.get(h.ALTITUDE_ACCURACY)},e.prototype.getHeading=function(){return this.get(h.HEADING)},e.prototype.getPosition=function(){return this.get(h.POSITION)},e.prototype.getProjection=function(){return this.get(h.PROJECTION)},e.prototype.getSpeed=function(){return this.get(h.SPEED)},e.prototype.getTracking=function(){return this.get(h.TRACKING)},e.prototype.getTrackingOptions=function(){return this.get(h.TRACKING_OPTIONS)},e.prototype.setProjection=function(t){this.set(h.PROJECTION,Object(l.get)(t))},e.prototype.setTracking=function(t){this.set(h.TRACKING,t)},e.prototype.setTrackingOptions=function(t){this.set(h.TRACKING_OPTIONS,t)},e}(n.a);e.default=p},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=_(i(77)),u=_(i(72)),l=_(i(150)),h=_(i(83)),f=_(i(84)),p=_(i(59)),d=_(i(52)),g=_(i(139)),y=_(i(140));function _(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this))).layer=null,i.source=null,i.map=t.map,i.view=i.map.getView(),i.zoom=void 0!==t.zoom?t.zoom:g.default.ZOOM_LEVEL,i.format=new c.default,i.tip=null,i.createLayer(t.style),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,g.default),i=e,(n=[{key:"zoomLocation",value:function(t,e){var i=this.map,n=this.view,o=this.source,r=this.feature(t);if(r){var a=r.getGeometry();o.clear(),o.addFeature(r),e&&i.once("moveend",e),"Point"===a.getType()?n.animate({center:t.coordinate,zoom:this.zoom}):n.fit(a.getExtent(),{size:i.getSize(),duration:500})}}},{key:"setLocation",value:function(t){this.source.clear(),this.source.addFeature(this.feature(t))}},{key:"getProjection",value:function(){return this.view.getProjection()}},{key:"feature",value:function(t){var e=t.geometry,i=t.coordinate;if(e||i){var n=new p.default({name:t.name,isFeature:t.isFeature});return e?n.setGeometry(this.format.readGeometry(e)):n.setGeometry(new d.default(i)),n}console.error("Unable to map invalid geometry:",t)}},{key:"createLayer",value:function(t){this.source=new h.default,this.layer=new f.default({source:this.source,style:t||e.LOCATION_STYLE,zIndex:1e4}),this.map.addLayer(this.layer),this.tip=new y.default({map:this.map,tips:[{layer:this.layer,label:function(t){return{css:"nyc-user-location",html:t.get("name")}}}]})}}])&&o(i.prototype,n),e}();v.Options,v.LOCATION_STYLE=new u.default({image:new l.default({scale:.09375,imgSize:[1024,1024],src:"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%221024%22%20height%3D%221024%22%3E%3Cfilter%20id%3D%22filter%22%20style%3D%22color-interpolation-filters%3AsRGB%22%20x%3D%22-0.035750399%22%20width%3D%221.0715008%22%20y%3D%22-0.03625311%22%20%20height%3D%221.0725062%22%3E%3CfeGaussianBlur%20stdDeviation%3D%226.0015266%22%2F%3E%3C%2Ffilter%3E%3Cpath%20style%3D%22opacity%3A0.1%3Bfill%3A%23000000%3Bfill-opacity%3A1%3Bstroke%3A%23000000%3Bstroke-width%3A10%3Bstroke-opacity%3A1%3Bfilter%3Aurl(%23filter)%22%20d%3D%22M%20868.91078%2C141.10492%20C%20806.53392%2C79.855774%20695.84806%2C89.539532%20621.70905%2C162.73227%20547.57005%2C235.92501%20492.08486%2C476.05139%20510.9101%2C494.53629%20529.73535%2C513.02119%20773.473%2C457.74384%20847.612%2C384.5511%20921.751%2C311.35836%20931.28764%2C202.35407%20868.91078%2C141.10492%20Z%20M%20645.16036%2C361.99953%20c%20-41.52967%2C-40.77885%20-35.13918%2C-113.58881%2014.19918%2C-162.29746%2049.33837%2C-48.70864%20123.27149%2C-55.19708%20164.80115%2C-14.41823%2041.52967%2C40.77885%2035.13918%2C113.58881%20-14.19918%2C162.29745%20-49.33837%2C48.70864%20-123.27149%2C55.19709%20-164.80115%2C14.41824%20z%22%2F%3E%3Cpath%20style%3D%22fill%3A%23000%3Bstroke%3A%23fff%3Bstroke-width%3A20%22%20d%3D%22m%20512%2C25.6%20c%20-95.4279%2C0%20-172.8%2C77.3721%20-172.8%2C172.8%200%2C95.4279%20144%2C288%20172.8%2C288%2028.8%2C0%20172.8%2C-192.5721%20172.8%2C-288%20C%20684.8%2C102.9721%20607.4279%2C25.6%20512%2C25.6%20Z%20m%200%2C288%20c%20-63.5346%2C0%20-115.2%2C-51.6942%20-115.2%2C-115.2%200%2C-63.5058%2051.6654%2C-115.2%20115.2%2C-115.2%2063.5346%2C0%20115.2%2C51.6942%20115.2%2C115.2%200%2C63.5058%20-51.6654%2C115.2%20-115.2%2C115.2%20z%22%2F%3E%3C%2Fsvg%3E"})});var m=v;e.default=m},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"zoomLocation",value:function(t,e){throw"Not implemented"}},{key:"setLocation",value:function(t){throw"Not implemented"}},{key:"getProjection",value:function(){throw"Not implemented"}}])&&n(e.prototype,i),t}();o.ZOOM_LEVEL=17;var r=o;e.default=r},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=h(i(8)),u=h(i(114)),l=h(i(40));function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o,s=(0,c.default)(t.map.getTargetElement()).find("f-tip").get(0);return this,(i=!(o=r(e).call(this,{id:l.default.nextId("FeatureTip"),element:s||(0,c.default)(e.HTML).get(0),stopEvent:!1}))||"object"!==n(o)&&"function"!=typeof o?a(this):o).setMap(t.map),i.map=i.getMap(),i.tip=(0,c.default)(i.getElement()),i.addTips(t.tips),i.map.on("pointermove",c.default.proxy(i.label,a(i))),(0,c.default)(document).mouseover(c.default.proxy(i.out,a(i))),i}var i,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(h=[{key:"hide",value:function(){this.tip.fadeOut()}},{key:"addTips",value:function(t){t.forEach(function(t){t.layer.nycTip=t.label})}},{key:"out",value:function(t){c.default.contains(this.map.getTargetElement(),t.target)||this.hide()}},{key:"label",value:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t,e){return e.getVisible()&&e.nycTip?e.nycTip(t):null});e?(this.tip.html(e.html),this.tip.get(0).className="f-tip ".concat(e.css||""),this.setPosition(t.coordinate),this.tip.show(),this.position()):this.hide()}},{key:"position",value:function(){var t=this.map.getSize(),e=this.map.getPixelFromCoordinate(this.getPosition()),i=this.tip.width(),n=this.tip.height(),o=e[1]+n>t[1]?"bottom":"top",r=e[0]+i>t[0]?"right":"left";this.setPositioning("".concat(o,"-").concat(r))}}])&&o(i.prototype,h),e}();f.TipDef,f.LabelFunction,f.Label,f.Options,f.HTML='<div class="f-tip" role="tooltip"></div>';var p=f;e.default=p},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=l(i(8)),u=l(i(142));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this,(0,c.default)(t.getTargetElement()).find(".ol-overlaycontainer-stopevent")))).map=t,i.view=t.getView(),i.getContainer().on("click dblclick mouseover mousemove",function(){(0,c.default)(".f-tip").hide()}),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(n=[{key:"zoom",value:function(t){this.view.animate({zoom:this.view.getZoom()+1*(0,c.default)(t.currentTarget).data("zoom-incr")})}}])&&o(i.prototype,n),e}();e.default=h},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=l(i(8)),u=l(i(69));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){var i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this,i=!(o=r(e).call(this,(0,c.default)(e.HTML)))||"object"!==n(o)&&"function"!=typeof o?a(this):o,(0,c.default)(t).append(i.getContainer()),i.find(".btn-z-in, .btn-z-out").click(c.default.proxy(i.zoom,a(i))),i}var i,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(l=[{key:"zoom",value:function(t){throw"Not implemented"}}])&&o(i.prototype,l),e}();h.HTML='<div class="zoom"><button class="btn-z-in btn-sq rad-all" data-zoom-incr="1" title="Zoom in"><span class="screen-reader-only">Zoom in</span><span class="fas fa-plus" role="img"></span></button><button class="btn-z-out btn-sq rad-all" data-zoom-incr="-1" title="Zoom out"><span class="screen-reader-only">Zoom out</span><span class="fas fa-minus" role="img"></span></button></div>';var f=h;e.default=f},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=c(i(8)),s=c(i(144));function c(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,o(e).call(this,(0,a.default)(t.getTargetElement()).find(".ol-overlaycontainer-stopevent")))).getContainer().on("click dblclick mouseover mousemove",function(){(0,a.default)(".f-tip").hide()}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(e,s.default),e}();e.default=u},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=l(i(8)),u=l(i(69));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){var i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this,i=!(o=r(e).call(this,(0,c.default)(e.HTML)))||"object"!==n(o)&&"function"!=typeof o?a(this):o,(0,c.default)(t).append(i.getContainer()),i.find(".btn-geo").click(c.default.proxy(i.geolocate,a(i))),i}var i,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(l=[{key:"geolocate",value:function(){this.trigger("geolocate")}}])&&o(i.prototype,l),e}();h.HTML='<div class="geoloc"><button class="btn-geo btn-sq rad-all" title="Current location"><span class="screen-reader-only">Current location</span><span class="fas fa-crosshairs" role="img"></span></button></div>';var f=h;e.default=f},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=p(i(8)),u=p(i(77)),l=i(0),h=p(i(146)),f=p(i(103));function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=r(this,a(e).call(this,t))).geoJson=new u.default,i.getContainer().on("click dblclick mouseover mousemove",function(){(0,c.default)(".f-tip").hide()}),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,h.default),i=e,(n=[{key:"featureAsLocation",value:function(t,e){var i=t.getGeometry(),n={name:e.nameField?t.get(e.nameField):t.getName(),data:t.getProperties(),type:"geocoded",accuracy:f.default.Accuracy.HIGH};return i&&(n.coordinate=(0,l.getCenter)(i.getExtent()),n.geometry=JSON.parse(this.geoJson.writeGeometry(i))),n}}])&&o(i.prototype,n),e}();e.default=d},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=f(i(8)),u=f(i(69)),l=f(i(147)),h=f(i(113));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){var i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=r(this,a(e).call(this,(0,c.default)(e.HTML))),"INPUT"===(t=(0,c.default)(t).get(0)).tagName&&(n=t,(t=(0,c.default)('<div class="map-srch"></div>')).insertAfter(n),i.find(".srch").addClass("input-group")),(0,c.default)(t).append(i.getContainer()),i.input=i.find("input"),i.clear=i.find(".btn-x"),n&&(i.input.attr("id",(0,c.default)(n).attr("id")).attr("placeholder",(0,c.default)(n).attr("placeholder")).addClass((0,c.default)(n).attr("class")),(0,c.default)(n).remove(),i.clear.remove()),i.isAddrSrch=!0,i.list=i.find("ul.rad-all"),i.retention=i.find("ul.retention"),i.autoComplete=null,i.hookupEvents(i.input),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.default),i=e,(n=[{key:"featureAsLocation",value:function(t,e){throw"Not implemented"}},{key:"val",value:function(t){return"string"==typeof t&&(this.input.val(t),this.clearBtn()),this.input.val()}},{key:"disambiguate",value:function(t){var e=this,i=t.possible;if(i.length){var n=this.list;this.emptyList(),i.forEach(function(t){n.append(e.listItem({layerName:"addr"},t))}),this.showList(!0)}}},{key:"setFeatures",value:function(t){var e=this;this.autoComplete=this.autoComplete||new l.default,t.nameField=t.nameField||"name",t.displayField=t.displayField||t.nameField,t.placeholder&&this.input.attr("placeholder",t.placeholder),this.sortAlphapetically(t).forEach(function(i){var n=e.featureAsLocation(i,t),o=e.listItem(t,n);e.retention.append(o)}),this.emptyList()}},{key:"removeFeatures",value:function(t){this.find("li."+t).remove()}},{key:"sortAlphapetically",value:function(t){var e=[];return t.features.forEach(function(t){t.get?e.push(c.default.extend({},t)):e.push(c.default.extend({get:function(t){return this.properties[t]}},t))}),e.sort(function(e,i){var n=t.nameField;return e.get(n)<i.get(n)?-1:e.get(n)>i.get(n)?1:0}),e}},{key:"listItem",value:function(t,e){var i=(0,c.default)("<li></li>"),n=t.displayField,o="".concat(e.data[n]||e.name);return i.addClass(t.layerName),"addr"!==t.layerName&&i.addClass("feature"),i.addClass("notranslate").attr({translate:"no","data-id":encodeURIComponent(o)}).html('<a href="#">'.concat(o,"</a>")).data("nameField",t.nameField).data("displayField",n).data("location",e).click(c.default.proxy(this.disambiguated,this)).keyup(c.default.proxy(this.disambiguated,this))}},{key:"emptyList",value:function(){var t=this.retention;this.find("li").each(function(e,i){0===t.find('li[data-id="'.concat((0,c.default)(i).attr("data-id"),'"]')).length&&t.append(i)}),this.list.empty()}},{key:"disambiguated",value:function(t){var e=(0,c.default)(t.currentTarget),i=e.data("location");i&&(this.val(i.name),i.isFeature=e.hasClass("feature"),this.trigger("disambiguated",i),e.parent().slideUp(),this.emptyList())}},{key:"listClick",value:function(t){if(t=t.originalEvent||t,"block"===this.list.css("display")){var e=(0,c.default)(t.target);c.default.contains(this.list.get(0),e.get(0))?this.autoComplete&&e.trigger("click"):"block"===this.getContainer().css("display")&&this.list.slideUp()}}},{key:"hookupEvents",value:function(t){t.on("keyup change",c.default.proxy(this.key,this)),t.focus(function(){return t.select()}),this.clear.click(c.default.proxy(this.clearTxt,this)),(0,c.default)(document).mouseup(c.default.proxy(this.listClick,this)),this.find(".btn-srch").click(c.default.proxy(this.triggerSearch,this))}},{key:"key",value:function(t){13===t.keyCode&&this.isAddrSrch?(this.triggerSearch(),this.list.slideUp()):this.filterList(),this.clearBtn()}},{key:"clearTxt",value:function(){this.val(""),this.clearBtn(),this.input.focus()}},{key:"clearBtn",value:function(){this.clear[this.val()?"show":"hide"]()}},{key:"filterList",value:function(){var t=this.val().trim();this.autoComplete&&t?this.autoComplete.filter(this.retention,this.list,t):this.emptyList(),this.showList(!1)}},{key:"showList",value:function(t){var e=this;if("block"===this.getContainer().css("display"))this.list.slideDown(function(){t&&e.list.children().first().find("a").attr("tabindex",0).focus()});else{var i=(0,c.default)("<div><strong>Possible matches:</strong></div>");i.append(this.list),this.dialog=this.dialog||new h.default({target:(0,c.default)(".nyc-map"),css:"posbl"}),this.list.one("click",c.default.proxy(this.dialog.hide,this.dialog)),this.dialog.ok({buttonText:["Cancel"],message:i})}}},{key:"triggerSearch",value:function(){var t=this.val().trim();t.length&&(this.input.blur(),this.trigger("search",t))}}])&&o(i.prototype,n),e}();p.FeatureSearchOptions,p.HTML='<div class="srch-ctl"><div class="srch" role="search"><input class="rad-all" type="text" placeholder="Search for an address..."><button class="btn btn-rnd btn-x"><span class="screen-reader-only">Clear</span><span class="fas fa-times" role="img"></span></button><button class="btn btn-srch btn-primary btn-lg">Search</button></div><ul class="rad-all" role="region" label="Possible matches for your search"></ul><ul class="retention"></ul></div>';var d=p;e.default=d},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=i(8))&&o.__esModule?o:{default:o},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"filter",value:function(t,e,i){var n=this,o=i.length>3,a=i.length>6,s={exact:[],possible:[]},c=this.regexp(i),u=[],l=this.test;r.default.merge((0,r.default)(e).find("li"),(0,r.default)(t).find("li")).each(function(t,e){u.push((0,r.default)(e)),l(c,(0,r.default)(e),s,o,n.log)}),(0,r.default)(t).append(u),s.exact.length?(0,r.default)(e).prepend(s.exact):a||(0,r.default)(e).prepend(s.possible)}},{key:"test",value:function(t,e,i,n){var o=e.html();n&&t.exact.test(o)&&i.exact.push(e),t.possible.test(o)&&i.possible.push(e)}},{key:"regexp",value:function(t){for(var e=new String(t.replace(/[^a-zA-Z0-9]/g,"")),i=new String(t.replace(/[^a-zA-Z0-9 ]/g,"")),n="^",o=0;o<e.length;o++)n+="(?=.*".concat(e.charAt(o),")|");return n=n.substr(0,n.length-1),n+=".*$",{exact:new RegExp("(".concat(i,")"),"i"),possible:new RegExp(n,"i")}}}])&&n(e.prototype,i),t}();e.default=a},function(t,e,i){"use strict";i.r(e);var n=i(2),o=i(49),r=i(27),a=i(23),s=function(t){function e(e,i,n){t.call(this,e),this.map=i,this.frameState=void 0!==n?n:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),c=function(t){function e(e,i,n,o,r){t.call(this,e,i,r),this.originalEvent=n,this.pixel=i.getEventPixel(n),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==o&&o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(s),u=i(19),l=i(17),h=function(t){function e(e,i,n,o,r){t.call(this,e,i,n.originalEvent,o,r),this.pointerEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c),f=i(1),p=i(44),d={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},g=function(t,e){this.dispatcher=t,this.mapping_=e};g.prototype.getEvents=function(){return Object.keys(this.mapping_)},g.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var y=g,_=1,v="mouse";function m(t){if(!this.isEventSimulatedFromTouch_(t)){_.toString()in this.pointerMap&&this.cancel(t);var e=S(t,this.dispatcher);this.pointerMap[_.toString()]=t,this.dispatcher.down(e,t)}}function b(t){if(!this.isEventSimulatedFromTouch_(t)){var e=S(t,this.dispatcher);this.dispatcher.move(e,t)}}function O(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[_.toString()];if(e&&e.button===t.button){var i=S(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function E(t){if(!this.isEventSimulatedFromTouch_(t)){var e=S(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function C(t){if(!this.isEventSimulatedFromTouch_(t)){var e=S(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function S(t,e){var i=e.cloneEvent(t,t),n=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),n()},i.pointerId=_,i.isPrimary=!0,i.pointerType=v,i}var T=function(t){function e(e){var i={mousedown:m,mousemove:b,mouseup:O,mouseover:E,mouseout:C};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,n=t.clientY,o=0,r=e.length,a=void 0;o<r&&(a=e[o]);o++){var s=Math.abs(i-a[0]),c=Math.abs(n-a[1]);if(s<=25&&c<=25)return!0}return!1},e.prototype.cancel=function(t){var e=S(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[_.toString()]},e}(y),x=["","unavailable","touch","pen","mouse"];function j(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function w(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function I(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function R(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function P(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function L(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function k(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function M(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var F=function(t){function e(e){var i={MSPointerDown:j,MSPointerMove:w,MSPointerUp:I,MSPointerOut:R,MSPointerOver:P,MSPointerCancel:L,MSGotPointerCapture:M,MSLostPointerCapture:k};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=x[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(y);function A(t){this.dispatcher.fireNativeEvent(t)}function N(t){this.dispatcher.fireNativeEvent(t)}function D(t){this.dispatcher.fireNativeEvent(t)}function G(t){this.dispatcher.fireNativeEvent(t)}function Y(t){this.dispatcher.fireNativeEvent(t)}function X(t){this.dispatcher.fireNativeEvent(t)}function B(t){this.dispatcher.fireNativeEvent(t)}function H(t){this.dispatcher.fireNativeEvent(t)}var U=function(t){function e(e){var i={pointerdown:A,pointermove:N,pointerup:D,pointerout:G,pointerover:Y,pointercancel:X,gotpointercapture:H,lostpointercapture:B};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(y),z=!1,W=function(t){function e(e,i,n){t.call(this,e),this.originalEvent=i;var o=n||{};this.buttons=function(t){var e;if(t.buttons||z)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(o),this.pressure=function(t,e){return t.pressure?t.pressure:e?.5:0}(o,this.buttons),this.bubbles="bubbles"in o&&o.bubbles,this.cancelable="cancelable"in o&&o.cancelable,this.view="view"in o?o.view:null,this.detail="detail"in o?o.detail:null,this.screenX="screenX"in o?o.screenX:0,this.screenY="screenY"in o?o.screenY:0,this.clientX="clientX"in o?o.clientX:0,this.clientY="clientY"in o?o.clientY:0,this.ctrlKey="ctrlKey"in o&&o.ctrlKey,this.altKey="altKey"in o&&o.altKey,this.shiftKey="shiftKey"in o&&o.shiftKey,this.metaKey="metaKey"in o&&o.metaKey,this.button="button"in o?o.button:0,this.relatedTarget="relatedTarget"in o?o.relatedTarget:null,this.pointerId="pointerId"in o?o.pointerId:0,this.width="width"in o?o.width:0,this.height="height"in o?o.height:0,this.tiltX="tiltX"in o?o.tiltX:0,this.tiltY="tiltY"in o?o.tiltY:0,this.pointerType="pointerType"in o?o.pointerType:"",this.hwTimestamp="hwTimestamp"in o?o.hwTimestamp:0,this.isPrimary="isPrimary"in o&&o.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a);!function(){try{var t=new MouseEvent("click",{buttons:1});z=1===t.buttons}catch(t){}}();var K=W,V=i(13);function Z(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function q(t){this.processTouches_(t,this.moveOverOut_)}function J(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function Q(t){this.processTouches_(t,this.cancelOut_)}var $=function(t){function e(e,i){var n={touchstart:Z,touchmove:q,touchend:J,touchcancel:Q};t.call(this,e,n),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&_.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.radiusX||0,i.height=e.radiusY||0,i.pressure=e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),n=i.length;function o(){t.preventDefault()}for(var r=0;r<n;++r){var a=this.touchToPointer_(t,i[r]);a.preventDefault=o,e.call(this,t,a)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n].identifier===e)return!0;return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),n=i.length;if(n>=e.length){for(var o=[],r=0;r<n;++r){var a=Number(i[r]),s=this.pointerMap[a];a==_||this.findTouch_(e,a-2)||o.push(s.out)}for(var c=0;c<o.length;++c)this.cancelOut_(t,o[c])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,n=this.pointerMap[i.pointerId];if(n){var o=n.out,r=n.outTarget;this.dispatcher.move(i,t),o&&r!==i.target&&(o.relatedTarget=i.target,i.relatedTarget=r,o.target=r,i.target?(this.dispatcher.leaveOut(o,t),this.dispatcher.enterOver(i,t)):(i.target=r,i.relatedTarget=null,this.cancelOut_(t,i))),n.out=i,n.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var n=[i.clientX,i.clientY];e.push(n),setTimeout(function(){Object(V.h)(e,n)},this.dedupTimeout_)}},e}(y),tt=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],et=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(u.g)this.registerSource("native",new U(this));else if(u.f)this.registerSource("ms",new F(this));else{var t=new T(this);this.registerSource("mouse",t),u.i&&this.registerSource("touch",new $(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,n=i.getEvents();n&&(n.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){Object(f.a)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){Object(f.c)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},n=0,o=tt.length;n<o;n++){var r=tt[n][0];i[r]=t[r]||e[r]||tt[n][1]}return i},e.prototype.down=function(t,e){this.fireEvent(d.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(d.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(d.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(d.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(d.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(d.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(d.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(d.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new K(t,i,e)},e.prototype.fireEvent=function(t,e,i){var n=this.makeEvent(t,e,i);this.dispatchEvent(n)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,S(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(p.a),it=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*u.b:u.b,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new et(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Object(f.a)(this.pointerEventHandler_,d.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Object(f.a)(this.pointerEventHandler_,d.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new h(l.a.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new h(l.a.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new h(l.a.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==l.a.POINTERUP||e.type==l.a.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==l.a.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new h(l.a.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(f.e),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new h(l.a.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new et(document),this.dragListenerKeys_.push(Object(f.a)(this.documentPointerEventHandler_,l.a.POINTERMOVE,this.handlePointerMove_,this),Object(f.a)(this.documentPointerEventHandler_,l.a.POINTERUP,this.handlePointerUp_,this),Object(f.a)(this.pointerEventHandler_,l.a.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new h(l.a.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new h(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(f.e)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(f.e)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(f.e),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(p.a),nt=i(76),ot={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},rt=i(38),at=i(15),st=i(54),ct=i(7),ut=i(5),lt=i(11),ht=i(12),ft=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};ft.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(ht.b)(this.queuedElements_)},ft.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},ft.prototype.enqueue=function(t){Object(lt.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},ft.prototype.getCount=function(){return this.elements_.length},ft.prototype.getLeftChildIndex_=function(t){return 2*t+1},ft.prototype.getRightChildIndex_=function(t){return 2*t+2},ft.prototype.getParentIndex_=function(t){return t-1>>1},ft.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},ft.prototype.isEmpty=function(){return 0===this.elements_.length},ft.prototype.isKeyQueued=function(t){return t in this.queuedElements_},ft.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},ft.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,o=e[t],r=i[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<n&&i[c]<i[s]?c:s;e[t]=e[u],i[t]=i[u],t=u}e[t]=o,i[t]=r,this.siftDown_(a,t)},ft.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,o=i[e],r=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>r))break;i[e]=i[a],n[e]=n[a],e=a}i[e]=o,n[e]=r},ft.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,o=this.elements_,r=this.priorities_,a=0,s=o.length;for(e=0;e<s;++e)(i=n(t=o[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(r[a]=i,o[a++]=t);o.length=a,r.length=a,this.heapify_()};var pt=function(t){function e(e,i){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);if(i){var n=e[0];Object(f.a)(n,ut.a.CHANGE,this.handleTileChange,this)}return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===ct.a.LOADED||i===ct.a.ERROR||i===ct.a.EMPTY||i===ct.a.ABORT){Object(f.c)(e,ut.a.CHANGE,this.handleTileChange,this);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,o,r=0,a=!1;this.tilesLoading_<t&&r<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),(i=n.getState())===ct.a.ABORT?a=!0:i!==ct.a.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,n.load());0===r&&a&&this.tileChangeCallback_()},e}(ft),dt=i(107),gt=i(18),yt=i(16),_t=i(0),vt=i(20),mt=i(93),bt=i(45),Ot={LAYERS:"layers"},Et=function(t){function e(e){var i=e||{},n=Object(ht.a)({},i);delete n.layers;var r=i.layers;t.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},Object(f.a)(this,Object(at.b)(Ot.LAYERS),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new o.a(r.slice(),{unique:!0}):Object(lt.a)("function"==typeof r.getArray,43):r=new o.a(void 0,{unique:!0}),this.setLayers(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(f.e),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(f.a)(t,r.a.ADD,this.handleLayersAdd_,this),Object(f.a)(t,r.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(f.e);Object(ht.b)(this.listenerKeys_);for(var i=t.getArray(),o=0,a=i.length;o<a;o++){var s=i[o];this.listenerKeys_[Object(n.c)(s)]=[Object(f.a)(s,st.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(f.a)(s,ut.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Object(n.c)(e)]=[Object(f.a)(e,st.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(f.a)(e,ut.a.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,i=Object(n.c)(e);this.listenerKeys_[i].forEach(f.e),delete this.listenerKeys_[i],this.changed()},e.prototype.getLayers=function(){return this.get(Ot.LAYERS)},e.prototype.setLayers=function(t){this.set(Ot.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var n=this.getLayerState(),o=i,r=e.length;o<r;o++){var a=e[o];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),void 0!==n.extent&&(void 0!==a.extent?a.extent=Object(_t.getIntersection)(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return bt.a.READY},e}(mt.a),Ct=i(42),St=i(9),Tt=function(t){function e(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,r,a={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Et({layers:t.layers});return a[ot.LAYERGROUP]=s,a[ot.TARGET]=t.target,a[ot.VIEW]=void 0!==t.view?t.view:new dt.default,void 0!==t.controls&&(Array.isArray(t.controls)?i=new o.a(t.controls.slice()):(Object(lt.a)("function"==typeof t.controls.getArray,47),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new o.a(t.interactions.slice()):(Object(lt.a)("function"==typeof t.interactions.getArray,48),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new o.a(t.overlays.slice()):(Object(lt.a)("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new o.a,{controls:i,interactions:n,keyboardEventTarget:e,overlays:r,values:a}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:u.b,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Object(St.c)(),this.pixelToCoordinateTransform_=Object(St.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(u.i?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[ut.a.CLICK,ut.a.DBLCLICK,ut.a.MOUSEDOWN,ut.a.TOUCHSTART,ut.a.MSPOINTERDOWN,l.a.POINTERDOWN,ut.a.MOUSEWHEEL,ut.a.WHEEL],s=0,c=n.length;s<c;++s)Object(f.a)(this.overlayContainerStopEvent_,n[s],a.b);for(var h in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new it(this,e.moveTolerance),l.a)Object(f.a)(this.mapBrowserEventHandler_,l.a[h],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,Object(f.a)(this.viewport_,ut.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(f.a)(this.viewport_,ut.a.WHEEL,this.handleBrowserEvent,this),Object(f.a)(this.viewport_,ut.a.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new o.a,this.interactions=i.interactions||new o.a,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new pt(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Object(f.a)(this,Object(at.b)(ot.LAYERGROUP),this.handleLayerGroupChanged_,this),Object(f.a)(this,Object(at.b)(ot.VIEW),this.handleViewChanged_,this),Object(f.a)(this,Object(at.b)(ot.SIZE),this.handleSizeChanged_,this),Object(f.a)(this,Object(at.b)(ot.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Object(f.a)(this.controls,r.a.ADD,function(t){t.element.setMap(this)},this),Object(f.a)(this.controls,r.a.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Object(f.a)(this.interactions,r.a.ADD,function(t){t.element.setMap(this)},this),Object(f.a)(this.interactions,r.a.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Object(f.a)(this.overlays_,r.a.ADD,function(t){this.addOverlayInternal_(t.element)},this),Object(f.a)(this.overlays_,r.a.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Object(f.c)(this.viewport_,ut.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(f.c)(this.viewport_,ut.a.WHEEL,this.handleBrowserEvent,this),Object(f.c)(this.viewport_,ut.a.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(ut.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixel(t),o=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,r=void 0!==i.layerFilter?i.layerFilter:vt.b;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var n=i||{},o=void 0!==n.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,r=n.layerFilter||vt.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,e,null,r,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:vt.b,o=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(ot.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Object(St.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(ot.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Object(St.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(ot.SIZE)},e.prototype.getView=function(){return this.get(ot.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,n){var o=this.frameState_;if(!(o&&e in o.wantedTiles))return 1/0;if(!o.wantedTiles[e][t.getKey()])return 1/0;var r=i[0]-o.focus[0],a=i[1]-o.focus[1];return 65536*Math.log(n)+Math.sqrt(r*r+a*a)/n},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,n=new c(i,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.getActive()&&!n.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var o=t.viewHints;o[gt.a.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,n=2),o[gt.a.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,n=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener(rt.a.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var i=0,n=e.length;i<n;++i){var o=e[i];if("function"==typeof o.getLayers)return t(o.getLayers().getArray());var r=o.getSource();if(r&&r.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(rt.a.RENDERCOMPLETE,t);for(var r=this.postRenderFunctions_,a=0,s=r.length;a<s;++a)r[a](this,t);r.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)Object(f.e)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(f.a)(n,ut.a.KEYDOWN,this.handleBrowserEvent,this),Object(f.a)(n,ut.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(ut.a.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Object(yt.e)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(ut.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(f.e)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(f.e)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",Object(n.c)(t)),this.viewPropertyListenerKey_=Object(f.a)(t,st.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(f.a)(t,ut.a.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(f.e),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(f.a)(t,st.a.PROPERTYCHANGE,this.render,this),Object(f.a)(t,ut.a.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,i=this.getSize(),o=this.getView(),r=Object(_t.createEmpty)(),a=this.frameState_,c=null;if(void 0!==i&&Object(Ct.a)(i)&&o&&o.isDef()){for(var u=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),h={},f=0,p=l.length;f<p;++f)h[Object(n.c)(l[f].layer)]=l[f];e=o.getState(this.pixelRatio_),c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:r,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:h,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:u,wantedTiles:{}}}c&&(c.extent=Object(_t.getForViewAndSize)(e.center,e.resolution,e.rotation,c.size,r)),this.frameState_=c,this.renderer_.renderFrame(c),c&&(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),a&&(!this.previousExtent_||!Object(_t.isEmpty)(this.previousExtent_)&&!Object(_t.equals)(c.extent,this.previousExtent_))&&(this.dispatchEvent(new s(nt.a.MOVESTART,this,a)),this.previousExtent_=Object(_t.createOrUpdateEmpty)(this.previousExtent_)),this.previousExtent_&&!c.viewHints[gt.a.ANIMATING]&&!c.viewHints[gt.a.INTERACTING]&&!Object(_t.equals)(c.extent,this.previousExtent_)&&(this.dispatchEvent(new s(nt.a.MOVEEND,this,c)),Object(_t.clone)(c.extent,this.previousExtent_))),this.dispatchEvent(new s(nt.a.POSTRENDER,this,c)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(ot.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(ot.SIZE,t)},e.prototype.setTarget=function(t){this.set(ot.TARGET,t)},e.prototype.setView=function(t){this.set(ot.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[Object(n.c)(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[Object(n.c)(t)],this.render()},e}(at.a);e.default=Tt},function(t,e,i){"use strict";i.r(e);var n=i(8),o=i.n(n),r={nyc:!0,url:"",id:"",key:"",template:"",requestedFields:[]},a={set:function(t,e){r[t]=e,a.saveToCookie(document)},get:function(t){return t?r[t]:r},valid:function(){return r.nyc?""!==r.url.trim()&&""!==r.id.trim()&&""!==r.key.trim()&&""!==r.template.trim():""!==r.template.trim()},getSaved:function(t){var e="".concat("geocoding-sheet","=");return t.cookie.split(";").forEach(function(t){if(0===(t=t.trim()).indexOf(e)){var i=JSON.parse(t.substr(e.length,t.length));Object.keys(i).forEach(function(t){r[t]=i[t]})}}),r},saveToCookie:function(t){if(a.valid()){var e=new Date,i=new Date;i.setDate(e.getDate()+365),t.cookie="".concat("geocoding-sheet","=").concat(JSON.stringify(r),"; expires=").concat(i.toGMTString())}}},s=a,c=i(64),u=i.n(c),l=i(85),h=i.n(l),f=i(0),p=i(115),d=i.n(p),g=i(78),y=i.n(g),_=i(89),v=i.n(_),m=new d.a({}),b=i(59);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var T=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,C(e).call(this))).source=t.source,i.projection=t.projection,i.clear(),i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(e,u.a),i=e,(n=[{key:"conf",value:function(t){this.format=function(t){if(m.locationTemplate=t.template,t.nyc){var e="".concat(t.url,"/search.json?app_id=").concat(t.id,"&app_key=").concat(t.key);m.geocoder=new y.a({url:e})}else m.geocoder=new v.a;return m}(t),this.requestedFields=t.requestedFields}},{key:"clear",value:function(){this.source&&this.source.clear(),this.geocodeAll=!1,this.countDown=0,this.geocodedBounds=null}},{key:"doGeocode",value:function(t,e){if(e){var i=e.get("_input"),n=this.format.replace(this.format.locationTemplate,t);return i.trim()!==n.trim()}return!0}},{key:"getData",value:function(t){this.geocodeAll=!0===t,google.script.run.withSuccessHandler($.proxy(this.gotData,this)).getData()}},{key:"gotData",value:function(t){var e=this,i=t[0],n=this.source;this.geocodeAll&&(this.countDown=t.length-1,this.source.clear(),this.geocodedBounds=null,this.trigger("batch-start",t)),t.forEach(function(t,o){if(o>0){var r={_row_num:o+1,_columns:i,_cells:t},a=n.getFeatureById(o+1);i.forEach(function(e,i){r[e]=t[i]}),e.doGeocode(r,a)&&(a&&n.removeFeature(a),(a=new b.default(r)).setId(o+1),a.set("_interactive",!e.geocodeAll),n.addFeature(a),a.once("change",$.proxy(e.geocoded,e)),e.format.setGeometry(a,r))}})}},{key:"geocoded",value:function(t){var e=t.target,i=e.getGeometry(),n=(e.getId(),{projected:this.projection,row:e.get("_row_num"),columns:e.get("_columns"),cells:e.get("_cells"),geocodeResp:e.get("_geocodeResp"),name:e.get("_geocodeResp").name,requestedFields:this.requestedFields,interactive:e.get("_interactive")});if(this.geocodeAll&&this.countDown--,i){var o=i.getExtent(),r=i.getCoordinates(),a=h()("EPSG:3857","EPSG:4326",r);n.lng=a[0],n.lat=a[1],this.projected(n,r),this.geocodedBounds=this.geocodedBounds?Object(f.extend)(this.geocodedBounds,o):o,this.trigger("geocoded",{feature:e,data:n})}else this.trigger("ambiguous",{feature:e,data:n});this.geocodeAll&&0===this.countDown&&(this.geocodeAll=!1,this.trigger("batch-end")),google.script.run.withSuccessHandler($.proxy(this.updateFeature,this)).geocoded(n)}},{key:"projected",value:function(t,e){if(this.projection){var i=h()("EPSG:3857",this.projection,e);t.x=i[0],t.y=i[1]}}},{key:"updateFeature",value:function(t){var e=this.source.getFeatureById(t.row);if(e)for(var i=t.columns,n=0;n<i.length;n++)e.set(i[n],t.cells[n])}}])&&E(i.prototype,n),e}(),x=i(83),j=i(84),w=i(72),I=i(82),R=i(68),P=i(58),L=i(92),k=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new P.a({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:L.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};k.prototype.clone=function(){return new k({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},k.prototype.getOverflow=function(){return this.overflow_},k.prototype.getFont=function(){return this.font_},k.prototype.getMaxAngle=function(){return this.maxAngle_},k.prototype.getPlacement=function(){return this.placement_},k.prototype.getOffsetX=function(){return this.offsetX_},k.prototype.getOffsetY=function(){return this.offsetY_},k.prototype.getFill=function(){return this.fill_},k.prototype.getRotateWithView=function(){return this.rotateWithView_},k.prototype.getRotation=function(){return this.rotation_},k.prototype.getScale=function(){return this.scale_},k.prototype.getStroke=function(){return this.stroke_},k.prototype.getText=function(){return this.text_},k.prototype.getTextAlign=function(){return this.textAlign_},k.prototype.getTextBaseline=function(){return this.textBaseline_},k.prototype.getBackgroundFill=function(){return this.backgroundFill_},k.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},k.prototype.getPadding=function(){return this.padding_},k.prototype.setOverflow=function(t){this.overflow_=t},k.prototype.setFont=function(t){this.font_=t},k.prototype.setMaxAngle=function(t){this.maxAngle_=t},k.prototype.setOffsetX=function(t){this.offsetX_=t},k.prototype.setOffsetY=function(t){this.offsetY_=t},k.prototype.setPlacement=function(t){this.placement_=t},k.prototype.setFill=function(t){this.fill_=t},k.prototype.setRotation=function(t){this.rotation_=t},k.prototype.setScale=function(t){this.scale_=t},k.prototype.setStroke=function(t){this.stroke_=t},k.prototype.setText=function(t){this.text_=t},k.prototype.setTextAlign=function(t){this.textAlign_=t},k.prototype.setTextBaseline=function(t){this.textBaseline_=t},k.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},k.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},k.prototype.setPadding=function(t){this.padding_=t};var M=k,F=i(104),A=i.n(F),N=new j.default({source:new x.default,style:function(t,e){var i=A.a.TILE_GRID.getZForResolution(e),n="".concat(t.getId()),o=n.length>2?.8*i:1.2*i,r=n.length<=2?"bold":"";return new w.default({image:new I.a({radius:10,stroke:new R.a({color:"#000",width:2}),fill:new P.a({color:"rgba(255,255,255,.5)"})}),text:new M({text:n,font:"".concat(r," ").concat(o.toFixed(0),"px sans-serif").trim(),fill:new P.a({color:"#000"})})})}}),D=i(116),G=i.n(D),Y=i(110),X=i.n(Y),B=i(117),H=i.n(B),U=i(118),z=i.n(U),W=i(102),K=i.n(W),V='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',Z=function(t){function e(e){var i,n=e||{};i=void 0!==n.attributions?n.attributions:[V];var o=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:i,cacheSize:n.cacheSize,crossOrigin:o,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:r,wrapX:n.wrapX,attributionsCollapsible:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(106).default),q=i(77),J=i(108),Q=i(105),tt=i.n(Q);function et(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var it=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=s.getSaved(document);o()("body").html(rt),this.geoclient=new y.a({url:this.geoclientUrl()}),this.census=new v.a,this.map=new G.a({target:"map"}),this.base=this.map.getBaseLayers().base,this.label=this.map.getBaseLayers().labels.base,this.osm=new J.default({source:new Z,visible:!1}),this.map.addLayer(this.osm),this.map.addLayer(N),this.popup=new H.a({map:this.map}),this.sheetGeocoder=new T({source:N.getSource()}),this.locationMgrCensus=new X.a({map:this.map,geocoder:this.census}),this.locationMgrGeoclient=new X.a({map:this.map,geocoder:this.geoclient}),this.searchCtrls=o()(".srch-ctl"),o()(o()(".zoom").get(0)).hide(),this.geoApi=new K.a({target:"#geo-api",radio:!0,choices:ot}),this.onInterval=new K.a({target:"#on-interv",choices:[{name:"on-interv",label:"Geocode on interval",values:[1]}]});var i=[];nt.forEach(function(t){i.push({name:t,label:t,values:[t]})}),this.geoFields=new K.a({target:"#geo-fields",choices:i}),o()("#geo-fields label").each(function(t,e){e.title=e.innerHTML}),this.tabs=new z.a({target:"#tabs",tabs:[{tab:"#tab-conf",title:"Configuration",active:!0},{tab:"#tab-map",title:"Map"}]}),this.setConfigValues(e),this.hookup()}var e,i;return e=t,(i=[{key:"setConfigValues",value:function(t){var e=[];t.requestedFields.forEach(function(t){e.push({name:t,label:t,values:[t]})}),this.geoFields.val(e),Object.keys(t).forEach(function(e){o()("#".concat(e)).val(t[e])}),this.geoApi.val(t.nyc?[ot[0]]:[ot[1]])}},{key:"hookup",value:function(){var t=this;t.geoFields.on("change",this.update,this),t.geoApi.on("change",this.update,this),o()("#geocode").click(function(){t.sheetGeocoder.getData(!0)}),o()("#reset").click(function(){t.sheetGeocoder.clear()}),o()("#review").change(o.a.proxy(this.review,this)),o()(".pop .btn-x").click(function(){o()("#review").trigger("change")}),this.sheetGeocoder.on("geocoded",function(t){o()('#review option[value="'.concat(t.feature.getId(),'"]')).remove()}),o()("#download").click(o.a.proxy(this.download,this)),o()("#tab-conf input").keyup(o.a.proxy(this.update,this)),o()(window).resize(o.a.proxy(this.setMapSize,this)),this.tabs.on("change",this.setMapSize,this),this.locationMgrCensus.on("geocoded",this.showPopup,this),this.locationMgrGeoclient.on("geocoded",this.showPopup,this),this.sheetGeocoder.on("batch-end",this.zoom,this),this.sheetGeocoder.on("geocoded",this.syncFeature,this),this.sheetGeocoder.on("ambiguous",this.ambiguous,this),this.onInterval.on("change",this.update,this),this.update(),s.valid()&&this.tabs.open("#tab-map")}},{key:"ambiguous",value:function(t){var e=t.feature,i=t.data;if(i.geocodeResp&&i.geocodeResp.possible){var n=e.getId(),r=i.geocodeResp,a=o()('#review option[value="'.concat(n,'"]')),s=n+1,c="(".concat(s,") ").concat(r.input);a.length?a.html(c):o()("#review").append(o()("<option></option>").data("feature",e).html(c).attr("title","Row ".concat(s)).val(n)),this.reviewMsg()}}},{key:"syncFeature",value:function(t){o()('#review option[value="'.concat(t.feature.getId(),'"]')).remove(),this.reviewMsg()}},{key:"reviewMsg",value:function(){o()(o()("#review option").get(0)).html("Review ".concat(o()("#review option").length-1," Failures"))}},{key:"zoom",value:function(){var t=this.map;t.getView().fit(this.sheetGeocoder.geocodedBounds,{size:t.getSize(),duration:500})}},{key:"review",value:function(){var t=o()("#review").val(),e=o()('#review option[value="'.concat(t,'"]')).data("feature");if(e){var i=e.get("_input"),n=s.get("nyc")?this.locationMgrGeoclient:this.locationMgrCensus;n.search.input.val(i).data("last-search",i),n.search.trigger("search",i)}}},{key:"download",value:function(){var t=[];N.getSource().getFeatures().forEach(function(e){var i=e.getProperties();i.SHEET_ROW_NUM=i._row_num+1,delete i.X,delete i.Y,delete i.LNG,delete i.LAT,delete i._input,delete i._geocodeResp,delete i._row_num,delete i._columns,delete i._cells,delete i._source;var n=new b.default(i);n.setGeometry(n.getGeometry()),t.push(n)}),(new tt.a).saveGeoJson("geocoded.json",(new q.default).writeFeatures(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}))}},{key:"correctSheet",value:function(t,e){var i=this.sheetGeocoder;t.set("_interactive",!0),t.once("change",o.a.proxy(i.geocoded,i)),i.format.setGeocode(t,e)}},{key:"setMapSize",value:function(){var t=o()("#map"),e=this.map;e&&e.setSize([t.width(),t.height()])}},{key:"update",value:function(){var t="nyc"===this.geoApi.val()[0].values[0];s.set("nyc",t),s.set("url",o()("#url").val()),s.set("id",o()("#id").val()),s.set("key",o()("#key").val()),s.set("template",o()("#template").val()),s.set("requestedFields",this.requestedFields()),o()(".gc")[t?"show":"hide"](),this.setup()}},{key:"setup",value:function(){var t=this,e=s.get("nyc");this.base.setVisible(e),this.label.setVisible(e),this.osm.setVisible(!e),o()(this.searchCtrls.get(0))[e?"hide":"show"](),o()(this.searchCtrls.get(1))[e?"show":"hide"](),s.valid()&&(this.sheetGeocoder.clear(),this.sheetGeocoder.projection=e?"EPSG:2263":"",this.sheetGeocoder.conf(s.get()),this.geoclient.url=this.geoclientUrl(),this.onInterval.val().length?(this.tabs.open("#tab-map"),this.interval=setInterval(function(){t.sheetGeocoder.getData(!1)},5e3)):clearInterval(this.interval))}},{key:"geoclientUrl",value:function(){return"".concat(s.get("url"),"/search.json?app_id=").concat(s.get("id"),"&app_key=").concat(s.get("key"),"&input=")}},{key:"showPopup",value:function(t){var e=this,i=o()("#review").val(),n=o()('#review option[value="'.concat(i,'"]')).data("feature");if(n){var r=s.get("nyc")?this.locationMgrGeoclient:this.locationMgrCensus,a=n.get("_geocodeResp").input;if(r.search.input.data("last-search").trim()===a.trim()){var c=o()('<button class="update btn rad-all"></button>').click(function(){e.correctSheet(n,t),e.popup.hide()}).html("Update row ".concat(1*i));e.popup.show({coordinate:t.coordinate,html:o()("<div><h3>".concat(t.name,"</h3><div>")).append(c)})}}}},{key:"requestedFields",value:function(){var t=[];return s.get("nyc")&&this.geoFields.val().forEach(function(e){t.push(e.values[0])}),t}}])&&et(e.prototype,i),t}(),nt=["assemblyDistrict","atomicPolygon","bbl","bblBoroughCode","bblBoroughCodeIn","bblTaxBlock","bblTaxBlockIn","bblTaxLot","bblTaxLotIn","bikeLane","bikeLane2","bikeTrafficDirection","blockfaceId","boardOfElectionsPreferredLgc","boePreferredStreetName","boePreferredstreetCode","boroughCode1In","buildingIdentificationNumber","buildingIdentificationNumberIn","businessImprovementDistrict","censusBlock2000","censusBlock2010","censusTract1990","censusTract2000","censusTract2010","cityCouncilDistrict","civilCourtDistrict","coincidentSegmentCount","communityDistrict","communityDistrictBoroughCode","communityDistrictNumber","communitySchoolDistrict","condominiumBillingBbl","congressionalDistrict","cooperativeIdNumber","cornerCode","crossStreetNamesFlagIn","dcpCommercialStudyArea","dcpPreferredLgc","dcpPreferredLgcForStreet1","dcpPreferredLgcForStreet2","dcpPreferredLgcForStreet3","dcpZoningMap","dotStreetLightContractorArea","dynamicBlock","electionDistrict","fireBattalion","fireCompanyNumber","fireCompanyType","fireDivision","firstBoroughName","firstStreetCode","firstStreetNameNormalized","fromActualSegmentNodeId","fromLgc1","fromLionNodeId","fromNode","fromPreferredLgcsFirstSetOf5","fromXCoordinate","fromYCoordinate","generatedRecordFlag","genericId","geosupportFunctionCode","geosupportReturnCode","geosupportReturnCode2","gi5DigitStreetCode1","gi5DigitStreetCode2","gi5DigitStreetCode3","gi5DigitStreetCode4","giBoroughCode1","giBoroughCode2","giBoroughCode3","giBoroughCode4","giBuildingIdentificationNumber1","giBuildingIdentificationNumber2","giBuildingIdentificationNumber3","giBuildingIdentificationNumber4","giDcpPreferredLgc1","giDcpPreferredLgc2","giDcpPreferredLgc3","giDcpPreferredLgc4","giHighHouseNumber1","giHighHouseNumber2","giHighHouseNumber3","giHighHouseNumber4","giLowHouseNumber1","giLowHouseNumber2","giLowHouseNumber3","giLowHouseNumber4","giSideOfStreetIndicator1","giSideOfStreetIndicator2","giSideOfStreetIndicator3","giSideOfStreetIndicator4","giStreetCode1","giStreetCode2","giStreetCode3","giStreetCode4","giStreetName1","giStreetName2","giStreetName3","giStreetName4","healthArea","healthCenterDistrict","highBblOfThisBuildingsCondominiumUnits","highCrossStreetB5SC1","highCrossStreetB5SC2","highCrossStreetCode1","highCrossStreetName1","highHouseNumberOfBlockfaceSortFormat","houseNumber","houseNumberIn","houseNumberSortFormat","hurricaneEvacuationZone","instructionalRegion","interimAssistanceEligibilityIndicator","internalLabelXCoordinate","internalLabelYCoordinate","intersectingStreet1","intersectingStreet2","latitude","latitudeInternalLabel","latitudeOfFromIntersection","latitudeOfToIntersection","leftSegment1990CensusTract","leftSegment2000CensusBlock","leftSegment2000CensusTract","leftSegment2010CensusBlock","leftSegment2010CensusTract","leftSegmentAssemblyDistrict","leftSegmentBlockfaceId","leftSegmentBoroughCode","leftSegmentCommunityDistrict","leftSegmentCommunityDistrictBoroughCode","leftSegmentCommunityDistrictNumber","leftSegmentCommunitySchoolDistrict","leftSegmentDynamicBlock","leftSegmentElectionDistrict","leftSegmentFireBattalion","leftSegmentFireCompanyNumber","leftSegmentFireCompanyType","leftSegmentFireDivision","leftSegmentHealthArea","leftSegmentHealthCenterDistrict","leftSegmentHighHouseNumber","leftSegmentInterimAssistanceEligibilityIndicator","leftSegmentLowHouseNumber","leftSegmentNta","leftSegmentNtaName","leftSegmentPolicePatrolBorough","leftSegmentPolicePatrolBoroughCommand","leftSegmentPolicePrecinct","leftSegmentPoliceSector","leftSegmentPumaCode","leftSegmentZipCode","legacyId","legacySegmentId","lengthOfSegmentInFeet","lgc1","lionBoroughCode","lionBoroughCodeForVanityAddress","lionFaceCode","lionFaceCodeForVanityAddress","lionKey","lionKeyForVanityAddress","lionNodeNumber","lionSequenceNumber","lionSequenceNumberForVanityAddress","listOf4Lgcs","listOfPairsOfLevelCodes","longitude","longitudeInternalLabel","longitudeOfFromIntersection","longitudeOfToIntersection","lowBblOfThisBuildingsCondominiumUnits","lowCrossStreetB5SC1","lowCrossStreetCode1","lowCrossStreetName1","lowHouseNumberOfBlockfaceSortFormat","lowHouseNumberOfDefiningAddressRange","modeSwitchIn","nta","ntaName","numberOfCrossStreetB5SCsHighAddressEnd","numberOfCrossStreetB5SCsLowAddressEnd","numberOfCrossStreetsHighAddressEnd","numberOfCrossStreetsLowAddressEnd","numberOfEntriesInListOfGeographicIdentifiers","numberOfExistingStructuresOnLot","numberOfIntersectingStreets","numberOfParkingLanesOnStreet","numberOfParkingLanesOnTheStreet","numberOfStreetCodesAndNamesInList","numberOfStreetFrontagesOfLot","numberOfTotalLanesOnStreet","numberOfTotalLanesOnTheStreet","numberOfTravelLanesOnStreet","numberOfTravelLanesOnTheStreet","physicalId","policePatrolBoroughCommand","policePrecinct","policeSector","pumaCode","returnCode1a","returnCode1e","rightSegment1990CensusTract","rightSegment2000CensusBlock","rightSegment2000CensusTract","rightSegment2010CensusBlock","rightSegment2010CensusTract","rightSegmentAssemblyDistrict","rightSegmentBlockfaceId","rightSegmentBoroughCode","rightSegmentCommunityDistrict","rightSegmentCommunityDistrictBoroughCode","rightSegmentCommunityDistrictNumber","rightSegmentCommunitySchoolDistrict","rightSegmentDynamicBlock","rightSegmentElectionDistrict","rightSegmentFireBattalion","rightSegmentFireCompanyNumber","rightSegmentFireCompanyType","rightSegmentFireDivision","rightSegmentHealthArea","rightSegmentHealthCenterDistrict","rightSegmentHighHouseNumber","rightSegmentInterimAssistanceEligibilityIndicator","rightSegmentLowHouseNumber","rightSegmentNta","rightSegmentNtaName","rightSegmentPolicePatrolBorough","rightSegmentPolicePatrolBoroughCommand","rightSegmentPolicePrecinct","rightSegmentPoliceSector","rightSegmentPumaCode","rightSegmentZipCode","roadwayType","rpadBuildingClassificationCode","rpadSelfCheckCodeForBbl","sanbornBoroughCode","sanbornBoroughCode1","sanbornBoroughCode2","sanbornPageNumber","sanbornPageNumber1","sanbornPageNumber2","sanbornVolumeNumber","sanbornVolumeNumber1","sanbornVolumeNumber2","sanbornVolumeNumberSuffix","sanbornVolumeNumberSuffix1","sanbornVolumeNumberSuffix2","sanitationBulkPickupSchedule","sanitationCollectionSchedulingSectionAndSubsection","sanitationDistrict","sanitationRecyclingCollectionSchedule","sanitationRegularCollectionSchedule","sanitationSection","sanitationSnowPriorityCode","secondStreetCode","secondStreetNameNormalized","segmentAzimuth","segmentIdentifier","segmentLengthInFeet","segmentOrientation","segmentTypeCode","sideOfStreetIndicator","sideOfStreetOfVanityAddress","speedLimit","splitLowHouseNumber","stateSenatorialDistrict","streetCode1","streetCode2","streetCode6","streetCode7","streetName1","streetName1In","streetName2","streetName2In","streetName3In","streetName6","streetName7","streetStatus","streetWidth","streetWidthMaximum","strollingKey","strollingKeyBoroughCode","strollingKeyHighHouseNumber","strollingKeyOnStreetCode","strollingKeySideOfStreetIndicator","taxMapNumberSectionAndVolume","thirdStreetCode","thirdStreetNameNormalized","toActualSegmentNodeId","toLgc1","toLionNodeId","toNode","toPreferredLgcsFirstSetOf5","toXCoordinate","toYCoordinate","trafficDirection","underlyingStreetCode","uspsPreferredCityName","workAreaFormatIndicatorIn","xCoordActualSegmentHighAddressEnd","xCoordActualSegmentLowAddressEnd","xCoordinate","xCoordinateHighAddressEnd","xCoordinateLowAddressEnd","xCoordinateOfCenterofCurvature","yCoordActualSegmentHighAddressEnd","yCoordActualSegmentLowAddressEnd","yCoordinate","yCoordinateHighAddressEnd","yCoordinateLowAddressEnd","yCoordinateOfCenterofCurvature","zipCode"],ot=[{name:"geo-api",label:"NYC Geoclient",values:["nyc"],checked:!0},{name:"geo-api",label:"Census",values:["census"]}],rt='<div id="tabs">\n  <div id="tab-conf">\n    <label class="conf" for="url">Geocoder</label>\n    <div id="geo-api"></div>\n    <label class="conf" for="template">Geocode-able location definition</label>\n    <input id="template" class="rad-all" type="text" placeholder="Eg. &#36;{AddrCol}, &#36;{CityCol}, &#36;{ZipCol}">\n    <div id="on-interv"></div>\n    <label class="conf gc" for="url">Geoclient endpoint</label>\n    <input id="url" class="rad-all gc" type="text" placeholder="Eg. https://maps.nyc.gov/geoclient/v1">\n    <label class="conf gc" for="id">Geoclient App ID</label>\n    <input id="id" class="rad-all gc" type="text">\n    <label class="conf gc" for="key">Geoclient App Key</label>\n    <input id="key" class="rad-all gc" type="text">\n    <label class="conf gc" for="geo-fields">Possible Geocoded values to append (if available)</label>\n    <div id="geo-fields" class="gc"></div>\n  </div>\n  <div id="tab-map">\n    <button id="geocode" class="btn btn-sq rad-all" title="Geocode sheet">\n      <span class="screen-reader-only">Geocode sheet</span>\n    </button>\n    <select id="review" class="btn rad-all">\n      <option value="-1">Review 0 Failures</option>\n    </select>\n    <button id="reset" class="btn btn-sq rad-all" title="Reset map">\n        <span class="screen-reader-only">Reset map</span>\n    </button>\n    <div id="map" class="rad-all"></div>\n    <button id="download" class="btn btn-sq rad-all" title="Download GeoJSON">\n      <span class="screen-reader-only">Download GeoJSON</span>\n    </button>\n  </div>  \n</div>';it.POSSIBLE_FIELDS=nt;var at=it;window.app=new at},function(t,e,i){"use strict";i.r(e);var n=i(2),o=i(22),r=i(11),a=i(37),s=i(1),c=i(5),u={FRACTION:"fraction",PIXELS:"pixels"},l=i(16),h=i(44),f=i(80),p=function(t){function e(e,i,n,o,r,a){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==o&&(this.image_.crossOrigin=o),this.canvas_=a?document.createElement("canvas"):null,this.color_=a,this.imageListenerKeys_=null,this.imageState_=r,this.size_=n,this.src_=i,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===o.a.LOADED){this.tainted_=!1;var t=Object(l.a)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(c.a.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=o.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=o.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],n=Object(l.a)(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==o.a.IDLE){this.imageState_=o.a.LOADING,this.imageListenerKeys_=[Object(s.b)(this.image_,c.a.ERROR,this.handleImageError_,this),Object(s.b)(this.image_,c.a.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,n=this.color_[0]/255,o=this.color_[1]/255,r=this.color_[2]/255,a=0,s=i.length;a<s;a+=4)i[a]*=n,i[a+1]*=o,i[a+2]*=r;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.e),this.imageListenerKeys_=null},e}(h.a),d={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},g=function(t){function e(e){var i=e||{},s=void 0!==i.opacity?i.opacity:1,c=void 0!==i.rotation?i.rotation:0,l=void 0!==i.scale?i.scale:1,h=void 0!==i.rotateWithView&&i.rotateWithView;t.call(this,{opacity:s,rotation:c,scale:l,rotateWithView:h}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:d.TOP_LEFT,this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:u.FRACTION,this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:u.FRACTION,this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var g=void 0!==i.img?i.img:null,y=void 0!==i.imgSize?i.imgSize:null,_=i.src;Object(r.a)(!(void 0!==_&&g),4),Object(r.a)(!g||g&&y,5),void 0!==_&&0!==_.length||!g||(_=g.src||Object(n.c)(g)),Object(r.a)(void 0!==_&&_.length>0,6);var v=void 0!==i.src?o.a.IDLE:o.a.LOADED;this.color_=void 0!==i.color?Object(a.a)(i.color):null,this.iconImage_=function(t,e,i,n,o,r){var a=f.a.get(e,n,r);return a||(a=new p(t,e,i,n,o,r),f.a.set(e,n,r,a)),a}(g,_,y,this.crossOrigin_,v,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:d.TOP_LEFT,this.origin_=null,this.size_=void 0!==i.size?i.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==u.FRACTION||this.anchorYUnits_==u.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==u.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==u.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=d.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=d.TOP_RIGHT&&this.anchorOrigin_!=d.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=d.BOTTOM_LEFT&&this.anchorOrigin_!=d.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=d.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=d.TOP_RIGHT&&this.offsetOrigin_!=d.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=d.BOTTOM_LEFT&&this.offsetOrigin_!=d.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return Object(s.a)(this.iconImage_,c.a.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){Object(s.c)(this.iconImage_,c.a.CHANGE,t,e)},e}(i(91).a);e.default=g},function(t,e,i){"use strict";i.r(e);var n=i(28),o=i(29),r=i(0),a=i(23),s=i(20),c=i(62),u=i(70),l=i(47),h=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new l.b([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(u.a),f=function(t){function e(e,i,n){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),p=function(t){function e(e){var i=e||{},n=i.condition?i.condition:o.e;t.call(this,{condition:n,className:i.className||"ol-dragzoom",onBoxEnd:d}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this);var i=e||{};this.box_=new h(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:s.c,this.startPixel_=null,this.condition_=i.condition?i.condition:o.a,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],o=i[1]-e[1];return n*n+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){Object(o.c)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new f("boxdrag",t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!Object(o.c)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new f("boxend",t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!(!Object(o.c)(t)||!Object(o.b)(t)||!this.condition_(t)||(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new f("boxstart",t.coordinate,t)),0))},e}(c.b));function d(){var t=this.getMap(),e=t.getView(),i=t.getSize(),o=this.getGeometry().getExtent();if(this.out_){var a=e.calculateExtent(i),s=Object(r.createOrUpdateFromCoordinates)([t.getPixelFromCoordinate(Object(r.getBottomLeft)(o)),t.getPixelFromCoordinate(Object(r.getTopRight)(o))]),c=e.getResolutionForExtent(s,i);Object(r.scaleFromCenter)(a,1/c),o=a}var u=e.constrainResolution(e.getResolutionForExtent(o,i)),l=Object(r.getCenter)(o);l=e.constrainCenter(l),e.animate({resolution:u,center:l,duration:this.duration_,easing:n.easeOut})}e.default=p},function(t,e,i){"use strict";i.r(e);var n=i(41),o=i(5),r={LEFT:37,UP:38,RIGHT:39,DOWN:40},a=i(29),s=i(30),c=function(t){function e(e){t.call(this,{handleEvent:u});var i=e||{};this.defaultCondition_=function(t){return Object(a.d)(t)&&Object(a.f)(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.a);function u(t){var e=!1;if(t.type==o.a.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==r.DOWN||i==r.LEFT||i==r.RIGHT||i==r.UP)){var a=t.map.getView(),c=a.getResolution()*this.pixelDelta_,u=0,l=0;i==r.DOWN?l=-c:i==r.LEFT?u=-c:i==r.RIGHT?u=c:l=c;var h=[u,l];Object(n.rotate)(h,a.getRotation()),Object(s.b)(a,h,this.duration_),t.preventDefault(),e=!0}}return!e}e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(2),o=i(53),r=i(7),a=i(18),s=i(16),c=i(1),u=i(5),l=i(74),h=i.n(l),f=i(0),p={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},d=i(10),g=i(26),y=i(14),_=i(4),v=i(81),m=i(43),b=i(109),O=i(51),E=i(9),C={image:[y.a.POLYGON,y.a.CIRCLE,y.a.LINE_STRING,y.a.IMAGE,y.a.TEXT],hybrid:[y.a.POLYGON,y.a.LINE_STRING]},S={image:[y.a.DEFAULT],hybrid:[y.a.IMAGE,y.a.TEXT,y.a.DEFAULT],vector:m.a},T=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?h()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Object(E.c)();var i=e.getRenderMode();this.zDirection=i===p.VECTOR?1:0,i!==p.VECTOR&&(this.context=Object(s.a)()),Object(c.a)(_.o,u.a.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(c.c)(_.o,u.a.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,i,n,o,a){var s=t.prototype.getTile.call(this,e,i,n,o,a);return s.getState()===r.a.LOADED&&(this.createReplayGroup_(s,o,a),this.context&&this.renderTileImage_(s,o,a)),s},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,i){var n=this.getLayer().getRevision();return this.renderedLayerRevision_!=n&&(this.renderedTiles.length=0),this.renderedLayerRevision_=n,t.prototype.prepareFrame.call(this,e,i)},e.prototype.createReplayGroup_=function(t,e,i){var n=this,o=this.getLayer(),a=o.getRevision(),s=o.getRenderOrder()||null,c=t.getReplayState(o);if(c.dirty||c.renderedRevision!=a||c.renderedRenderOrder!=s){for(var u=o.getSource(),l=u.getTileGrid(),h=u.getTileGridForProjection(i).getResolution(t.tileCoord[0]),p=t.extent,y=function(a,y){var _=t.getTile(t.tileKeys[a]);if(_.getState()==r.a.LOADED){var m=_.tileCoord,b=l.getTileCoordExtent(m),E=Object(f.getIntersection)(p,b),C=Object(f.equals)(b,E)?null:Object(f.buffer)(E,o.getRenderBuffer()*h,n.tmpExtent),S=_.getProjection(),T=!1;Object(d.equivalent)(i,S)||(T=!0,_.setProjection(i)),c.dirty=!1;var x=new v.a(0,E,h,e,u.getOverlaps(),n.declutterTree_,o.getRenderBuffer()),j=Object(O.b)(h,e),w=function(t){var e,i=t.getStyleFunction()||o.getStyleFunction();if(i&&(e=i(t,h)),e){var n=this.renderFeature(t,j,e,x);this.dirty_=this.dirty_||n,c.dirty=c.dirty||n}},I=_.getFeatures();s&&s!==c.renderedRenderOrder&&I.sort(s);for(var R=0,P=I.length;R<P;++R){var L=I[R];T&&(S.getUnits()==g.b.TILE_PIXELS&&(S.setWorldExtent(b),S.setExtent(_.getExtent())),L.getGeometry().transform(S,i)),C&&!Object(f.intersects)(C,L.getGeometry().getExtent())||w.call(n,L)}x.finish(),_.setReplayGroup(o,t.tileCoord.toString(),x)}},_=0,m=t.tileKeys.length;_<m;++_)y(_);c.renderedRevision=a,c.renderedRenderOrder=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,a){var s=e.viewState.resolution,c=e.viewState.rotation;i=null==i?0:i;var u,l,h,p,d=this.getLayer(),g={},y=this.renderedTiles;for(h=0,p=y.length;h<p;++h){var _=y[h];if(u=Object(f.buffer)(_.extent,i*s,u),Object(f.containsCoordinate)(u,t))for(var v=0,m=_.tileKeys.length;v<m;++v){var b=_.getTile(_.tileKeys[v]);if(b.getState()==r.a.LOADED){var O=b.getReplayGroup(d,_.tileCoord.toString());l=l||O.forEachFeatureAtCoordinate(t,s,c,i,{},function(t){var e=Object(n.c)(t);if(!(e in g))return g[e]=!0,o.call(a,t,d)},null)}}}return l},e.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),n=t.tileCoord,o=i.getResolution(n[0]),r=e.viewState,a=e.pixelRatio,s=r.resolution/a,c=i.getTileCoordExtent(n,this.tmpExtent),u=r.center,l=Object(f.getTopLeft)(c),h=e.size,p=Math.round(a*h[0]/2),d=Math.round(a*h[1]/2);return Object(E.b)(this.tmpTransform_,p,d,o/s,o/s,r.rotation,(l[0]-u[0])/o,(u[1]-l[1])/o)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,i,n){var o=this.getLayer(),s=o.getRenderMode();if(s!=p.IMAGE){var c,u,l=o.getDeclutter()?{}:null,h=o.getSource(),f=S[s],d=i.pixelRatio,g=i.viewState.rotation,y=i.size;g&&(c=Math.round(d*y[0]/2),u=Math.round(d*y[1]/2),Object(_.s)(e,-g,c,u)),l&&this.declutterTree_.clear();for(var m=i.viewHints,b=!(m[a.a.ANIMATING]||m[a.a.INTERACTING]),O=this.renderedTiles,E=h.getTileGridForProjection(i.viewState.projection),C=[],T=[],x=O.length-1;x>=0;--x){var j=O[x];if(j.getState()!=r.a.ABORT)for(var w=j.tileCoord,I=E.getTileCoordExtent(w,this.tmpExtent)[0]-j.extent[0],R=void 0,P=0,L=j.tileKeys.length;P<L;++P){var k=j.getTile(j.tileKeys[P]);if(k.getState()==r.a.LOADED){var M=k.getReplayGroup(o,w.toString());if(M&&M.hasReplays(f)){R||(R=this.getTransform(i,I));var F=k.tileCoord[0],A=M.getClipCoords(R);e.save(),e.globalAlpha=n.opacity;for(var N=0,D=C.length;N<D;++N){var G=C[N];F<T[N]&&(e.beginPath(),e.moveTo(A[0],A[1]),e.lineTo(A[2],A[3]),e.lineTo(A[4],A[5]),e.lineTo(A[6],A[7]),e.moveTo(G[6],G[7]),e.lineTo(G[4],G[5]),e.lineTo(G[2],G[3]),e.lineTo(G[0],G[1]),e.clip())}M.replay(e,R,g,{},b,f,l),e.restore(),C.push(A),T.push(F)}}}}l&&Object(v.b)(l,e,g,b),g&&Object(_.s)(e,g,c,u)}t.prototype.postCompose.call(this,e,i,n)},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var r=0,a=i.length;r<a;++r)o=Object(O.d)(n,t,i[r],e,this.handleStyleImageChange_,this)||o;else o=Object(O.d)(n,t,i,e,this.handleStyleImageChange_,this);return o},e.prototype.renderTileImage_=function(t,e,i){var n=this.getLayer(),o=t.getReplayState(n),a=n.getRevision(),s=C[n.getRenderMode()];if(s&&o.renderedTileRevision!==a){o.renderedTileRevision=a;var c=t.wrappedTileCoord,u=c[0],l=n.getSource(),h=l.getTileGridForProjection(i),f=h.getResolution(u),p=t.getContext(n),d=l.getTilePixelSize(u,e,i);p.canvas.width=d[0],p.canvas.height=d[1];for(var g=h.getTileCoordExtent(c,this.tmpExtent),y=0,_=t.tileKeys.length;y<_;++y){var v=t.getTile(t.tileKeys[y]);if(v.getState()==r.a.LOADED){var m=e/f,b=Object(E.e)(this.tmpTransform_);Object(E.f)(b,m,-m),Object(E.h)(b,-g[0],-g[3]),v.getReplayGroup(n,t.tileCoord.toString()).replay(p,b,0,{},!0,s)}}}},e}(b.default);T.handles=function(t){return t.getType()===o.a.VECTOR_TILE},T.create=function(t,e){return new T(e)},e.default=T},function(t,e,i){"use strict";i.r(e);var n=i(9),o=i(13),r=i(73),a=i(16),s=i(55),c=i(100),u=i(38),l=i(4),h=i(98),f=i(2),p=i(70),d=i(1),g=i(5),y=i(0),_=i(20),v=i(80);function m(t,e){v.a.expire()}function b(t,e){return t.zIndex-e.zIndex}var O=function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){Object(f.b)()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;Object(n.b)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(n.d)(Object(n.g)(o,i))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o,r,a){var c,u=e.viewState,l=u.resolution;function h(t,i){var r=e.layerStates[Object(f.c)(i)].managed;if(!(Object(f.c)(t)in e.skippedFeatureUids)||r)return n.call(o,t,r?i:null)}var p=u.projection,d=t;if(p.canWrapX()){var g=p.getExtent(),_=Object(y.getWidth)(g),v=t[0];(v<g[0]||v>g[2])&&(d=[v+_*Math.ceil((g[0]-v)/_),t[1]])}var m,b=e.layerStatesArray;for(m=b.length-1;m>=0;--m){var O=b[m],E=O.layer;if(Object(s.b)(O,l)&&r.call(a,E)){var C=this.getLayerRenderer(E),S=E.getSource();if(S&&(c=C.forEachFeatureAtCoordinate(S.getWrapX()?d:t,e,i,h)),c)return c}}},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o,r,a){return Object(f.b)()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,n,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,_.b,this,n,o)},e.prototype.getLayerRenderer=function(t){var e=Object(f.c)(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,n=0,o=this.layerRendererConstructors_.length;n<o;++n){var r=this.layerRendererConstructors_[n];if(r.handles(t)){i=r.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=Object(d.a)(i,g.a.CHANGE,this.handleLayerRendererChange_,this),i},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Object(d.e)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},e.prototype.renderFrame=function(t){Object(f.b)()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(m)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(p.a),E=i(45);i.d(e,"layerRendererConstructors",function(){return C});var C=[],S=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=Object(a.a)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=r.b,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Object(n.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),n=this.context_;if(i.hasListener(t)){var o=e.extent,r=e.pixelRatio,a=e.viewState.rotation,s=this.getTransform(e),u=new h.a(n,r,o,s,a),l=new c.a(t,u,e,n,null);i.dispatchEvent(l)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,o=this.canvas_.height/2,r=t.pixelRatio/e.resolution,a=-r,s=-e.rotation,c=-e.center[0],u=-e.center[1];return Object(n.b)(this.transform_,i,o,r,a,s,c,u)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,n=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.canvas_.width!=n||this.canvas_.height!=r?(this.canvas_.width=n,this.canvas_.height=r):e.clearRect(0,0,n,r);var a=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(u.a.PRECOMPOSE,t);var c=t.layerStatesArray;Object(o.j)(c,b),a&&(e.save(),Object(l.s)(e,a,n/2,r/2));var h,f,p=t.viewState.resolution;for(h=0,f=c.length;h<f;++h){var d=c[h],g=d.layer,y=this.getLayerRenderer(g);Object(s.b)(d,p)&&d.sourceState==E.a.READY&&y.prepareFrame(t,d)&&y.composeFrame(t,d,e)}a&&e.restore(),this.dispatchRenderEvent(u.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,o,r,a,c){var u,l,h=e.viewState.resolution,f=e.layerStatesArray,p=f.length,d=Object(n.a)(e.pixelToCoordinateTransform,t.slice());for(l=p-1;l>=0;--l){var g=f[l],y=g.layer;if(Object(s.b)(g,h)&&a.call(c,y)&&(u=this.getLayerRenderer(y).forEachLayerAtCoordinate(d,e,i,o,r)))return u}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,n=e.length;i<n;++i){var r=e[i];Object(o.d)(C,r)||C.push(r)}},e}(O);e.default=S}]);